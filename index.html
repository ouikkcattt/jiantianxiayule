<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-visual" />
  <title>Âí©Âí©Âú®ËøôÈáå</title>
  
  <!-- ========== PWAÈÖçÁΩÆÂºÄÂßã - iOS/AndroidÁúüÂÖ®Â±èÈÄÇÈÖç ========== -->

  <!-- iOS SafariÂÖ®Â±èÊîØÊåÅ -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- ‰øùÁïôÁ≥ªÁªüÁä∂ÊÄÅÊ†èÔºå‰∏çËÆ©ÂÜÖÂÆπÂª∂‰º∏Âà∞Áä∂ÊÄÅÊ†èÂå∫Âüü -->
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Âí©Âí©Âú®ËøôÈáå" />

  <!-- iOSÂêØÂä®ÁîªÈù¢ËÉåÊôØËâ≤ - ‰ΩøÁî®Ê∑±Ëâ≤Á°Æ‰øùÁä∂ÊÄÅÊ†èÊñáÂ≠óÂèØËßÅ -->
  <meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)" />
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: light)" />

  <!-- Android ChromeÂÖ®Â±èÊîØÊåÅ -->
  <meta name="mobile-web-app-capable" content="yes" />

  <!-- Á¶ÅÁî®iOSËá™Âä®Ê£ÄÊµã -->
  <meta name="format-detection" content="telephone=no" />
  <meta name="format-detection" content="date=no" />
  <meta name="format-detection" content="address=no" />
  <meta name="format-detection" content="email=no" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- ========== PWAÈÖçÁΩÆÁªìÊùü ========== -->
  
  <!-- Dexie.js - IndexedDB Wrapper -->
  <script src="https://cdn.jsdelivr.net/npm/dexie@3.2.4/dist/dexie.min.js"></script>
  <link rel="stylesheet" href="ovo-style.css">
</head>
<body>
  <!-- Phone Container -->
  <div class="phone-container">
    <!-- Phone Frame -->
    <div class="phone-frame"></div>

    <!-- Notch -->
    <div class="notch"></div>

    <!-- Dynamic Island (Âú®ÂàòÊµ∑Â±è‰ΩçÁΩÆ) -->
    <div class="dynamic-island compact hidden" id="dynamicIsland">
      <div class="island-content">
        <div class="island-icon" id="islandIcon">
          <svg viewBox="0 0 24 24">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <div class="island-text-wrapper">
          <div class="island-title" id="islandTitle">ÈÄöÁü•</div>
          <div class="island-subtitle" id="islandSubtitle">Ê∂àÊÅØÂÜÖÂÆπ</div>
        </div>
      </div>
    </div>

    <!-- Edit Mode Indicator -->
    <div class="edit-mode-indicator" id="editModeIndicator">
      ÈïøÊåâÊãñÂä®ÂõæÊ†áÈáçÊñ∞ÊéíÂàó
    </div>

    <!-- Edit Done Button -->
    <button class="edit-done-btn" id="editDoneBtn">ÂÆåÊàê</button>

    <!-- Screen -->
    <div class="screen">
      <!-- Decorative Stars & Pixels -->
      <div class="deco-stars">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="pixel-border"></div>
        <div class="pixel-border"></div>
        <div class="pixel-border"></div>
      </div>

      <!-- Boot Screen -->
      <div class="boot-screen" id="bootScreen">
        <!-- DefaultÂä®Áîª -->
        <div class="boot-anim boot-anim-default active">
          <div class="boot-dots">
            <div class="boot-dot"></div>
            <div class="boot-dot"></div>
            <div class="boot-dot"></div>
          </div>
          <div class="boot-text">Loading...</div>
        </div>

        <!-- BlogÂä®Áîª -->
        <div class="boot-anim boot-anim-blog">
          <div class="boot-blog-stars">
            <div class="boot-blog-star"></div>
            <div class="boot-blog-star"></div>
            <div class="boot-blog-star"></div>
            <div class="boot-blog-star"></div>
          </div>
          <div class="boot-blog-container">
            <div class="boot-blog-date">2025.12.10</div>
            <div class="boot-blog-title">Loading...</div>
            <div class="boot-blog-tags">
              <span class="boot-blog-tag">SYSTEM</span>
              <span class="boot-blog-tag">BOOT</span>
            </div>
            <div class="boot-blog-loading">
              <span>Initializing</span>
              <div class="boot-blog-dots">
                <div class="boot-blog-dot"></div>
                <div class="boot-blog-dot"></div>
                <div class="boot-blog-dot"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- RingÂä®Áîª -->
        <div class="boot-anim boot-anim-ring">
          <div class="boot-ring-wrapper">
            <div class="boot-ring-circle"></div>
            <div class="boot-ring-progress"></div>
            <div class="boot-ring-dots-outer">
              <div class="boot-ring-dot"></div>
              <div class="boot-ring-dot"></div>
              <div class="boot-ring-dot"></div>
              <div class="boot-ring-dot"></div>
              <div class="boot-ring-dot"></div>
              <div class="boot-ring-dot"></div>
            </div>
            <div class="boot-ring-content">
              <div class="boot-ring-text">LOADING</div>
              <div class="boot-ring-subtext">system.init</div>
            </div>
          </div>
        </div>

        <!-- PulseÂä®Áîª -->
        <div class="boot-anim boot-anim-pulse">
          <div class="boot-pulse-container">
            <div class="boot-pulse-corners">
              <div class="boot-pulse-corner"></div>
              <div class="boot-pulse-corner"></div>
              <div class="boot-pulse-corner"></div>
              <div class="boot-pulse-corner"></div>
            </div>
            <div class="boot-pulse-square"></div>
            <div class="boot-pulse-square boot-pulse-square-2"></div>
            <div class="boot-pulse-square boot-pulse-square-3"></div>
            <div class="boot-pulse-text-wrapper">
              <div class="boot-pulse-text">BOOTING</div>
              <div class="boot-pulse-progress">
                <div class="boot-pulse-progress-bar"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Home Screen -->
      <div class="home-screen" id="homeScreen">
        <!-- Status Bar -->
        <div class="status-bar">
          <div class="status-left">
            <span id="statusTime">12:00</span>
          </div>
          <div class="status-right">
            <!-- Network Signal Icon (Áªü‰∏ÄÈ´òÂ∫¶12px) -->
            <svg class="status-icon" viewBox="0 0 16 12" id="networkIcon" style="width: 16px; height: 12px;">
              <rect x="0.5" y="7" width="2.5" height="5" rx="0.5" fill="currentColor" opacity="0.3" />
              <rect x="4.5" y="5" width="2.5" height="7" rx="0.5" fill="currentColor" opacity="0.5" />
              <rect x="8.5" y="3" width="2.5" height="9" rx="0.5" fill="currentColor" opacity="0.8" />
              <rect x="12.5" y="0.5" width="2.5" height="11.5" rx="0.5" fill="currentColor" />
            </svg>
            <!-- Battery Icon (Áªü‰∏ÄÈ´òÂ∫¶12px) -->
            <svg class="status-icon" viewBox="0 0 22 12" id="batteryIcon" style="width: 20px; height: 12px;">
              <rect x="0.5" y="0.5" width="18" height="11" rx="2" stroke="currentColor" stroke-width="1" fill="none" />
              <rect x="2" y="2.5" width="14" height="7" rx="1" id="batteryFill" fill="currentColor" />
              <path d="M19 4v4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            <span id="batteryPercent" style="font-size: 11px; font-family: 'JetBrains Mono', monospace;">100%</span>
          </div>
        </div>

        <!-- App Grid - 28ÁΩëÊ†ºÁ≥ªÁªüÔºà7Ë°å√ó4ÂàóÔºâ-->
        <div class="app-grid" id="appGrid">
          <!-- Êó∂ÈíüÁªÑ‰ª∂Âç†ÊçÆÂâç2Ë°åÔºà8‰∏™ÁΩëÊ†ºÔºâ-->
          <div class="grid-cell clock-cell">
            <div class="clock-widget">
              <div class="clock-time" id="clockTime">12:00</div>
              <div class="clock-date" id="clockDate">Loading...</div>
            </div>
          </div>

          <!-- ÁΩëÊ†º0 - Settings -->
          <div class="grid-cell" data-grid-index="0">
            <div class="app-icon" data-app="settings">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24">
                  <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <div class="app-label">Settings</div>
            </div>
          </div>

          <!-- ÁΩëÊ†º1 - API -->
          <div class="grid-cell" data-grid-index="1">
            <div class="app-icon" data-app="api">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24">
                  <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="app-label">API</div>
            </div>
          </div>

          <!-- ÁΩëÊ†º2 - Characters -->
          <div class="grid-cell" data-grid-index="2">
            <div class="app-icon" data-app="characters">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r=".5" fill="currentColor" />
                  <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
                </svg>
              </div>
              <div class="app-label">ËßíËâ≤</div>
            </div>
          </div>

          <!-- ÁΩëÊ†º3 - Chat -->
          <div class="grid-cell" data-grid-index="3">
            <div class="app-icon" data-app="chat">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                  <path d="M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="app-label">ËÅäÂ§©</div>
            </div>
          </div>

          <!-- ÁΩëÊ†º4 - X -->
          <div class="grid-cell" data-grid-index="4">
            <div class="app-icon" data-app="x">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="app-label">X</div>
            </div>
          </div>

          <!-- Á©∫ÁΩëÊ†º5-19ÔºàÂâ©‰Ωô15‰∏™Á©∫ÁΩëÊ†ºÔºâ-->
          <!-- ÁΩëÊ†º5 - Appearance Â§ñËßÇ -->
          <div class="grid-cell" data-grid-index="5">
            <div class="app-icon" data-app="appearance">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <div class="app-label">Â§ñËßÇ</div>
            </div>
          </div>
          <!-- ÁΩëÊ†º6 - BaoBaoBook ÁôæÂÆù‰π¶ -->
          <div class="grid-cell" data-grid-index="6">
            <div class="app-icon" data-app="baobaobook">
              <div class="app-icon-img">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="app-label">ÁôæÂÆù‰π¶</div>
            </div>
          </div>
          <div class="grid-cell" data-grid-index="7"></div>
          <div class="grid-cell" data-grid-index="8"></div>
          <div class="grid-cell" data-grid-index="9"></div>
          <div class="grid-cell" data-grid-index="10"></div>
          <div class="grid-cell" data-grid-index="11"></div>
          <div class="grid-cell" data-grid-index="12"></div>
          <div class="grid-cell" data-grid-index="13"></div>
          <div class="grid-cell" data-grid-index="14"></div>
          <div class="grid-cell" data-grid-index="15"></div>
          <div class="grid-cell" data-grid-index="16"></div>
          <div class="grid-cell" data-grid-index="17"></div>
          <div class="grid-cell" data-grid-index="18"></div>
          <div class="grid-cell" data-grid-index="19"></div>
        </div>

        <!-- Dock -->
        <div class="dock">
          <div class="dock-bg">
            <div class="dock-icon" data-app="phone">
              <svg viewBox="0 0 24 24">
                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="dock-icon" data-app="camera">
              <svg viewBox="0 0 24 24">
                <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2v11z" />
                <circle cx="12" cy="13" r="4" />
              </svg>
            </div>
            <div class="dock-icon" data-app="browser">
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" stroke-linecap="round" />
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings App Screen -->
      <div class="app-screen" id="settingsScreen">
        <div class="app-content" style="padding-top: 68px;">
          <!-- Header Section -->
          <div class="settings-header-section">
            <div class="settings-logo-area">
              <div class="settings-logo-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <div class="settings-logo-text">ÂÖ®Â±ÄËÆæÁΩÆ</div>
            </div>
            <div class="settings-header-actions">
              <div class="settings-icon-btn" onclick="closeApp()" title="ÂÖ≥Èó≠">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- È¢ÑËÆæÁÆ°ÁêÜÂô® -->
          <div class="settings-section">
            <div class="settings-section-header">È¢ÑËÆæÁÆ°ÁêÜ</div>
            <div class="settings-card">
              <div class="preset-selector">
                <select class="settings-select" id="presetSelect" onchange="handlePresetChange()">
                  <option value="">-- ÈÄâÊã©È¢ÑËÆæ --</option>
                </select>
                <div class="preset-manager-btn" onclick="updateCurrentPreset()" title="Êõ¥Êñ∞ÂΩìÂâçÈ¢ÑËÆæ">
                  <svg viewBox="0 0 24 24">
                    <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="preset-manager-btn" onclick="showPresetManagerModal()" title="ÁÆ°ÁêÜÈ¢ÑËÆæ">
                  <svg viewBox="0 0 24 24">
                    <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- ÂÖ®Â±Ä‰∏ñÁïåËßÇËÆæÁΩÆ -->
          <div class="settings-section">
            <div class="settings-section-header">‰∏ñÁïåËßÇËÆæÂÆö</div>
            <div class="settings-card">
              <div class="settings-input-group">
                <label class="settings-label">‰∏ñÁïåËßÇÂêçÁß∞</label>
                <input type="text" class="settings-input" id="worldviewName" placeholder="‰∏∫‰Ω†ÁöÑ‰∏ñÁïåËßÇÂëΩÂêç..." />
              </div>
              <div class="settings-input-group">
                <label class="settings-label">‰∏ñÁïåËßÇÊèèËø∞</label>
                <textarea class="settings-textarea" id="worldviewDesc" placeholder="ÊèèËø∞Ëøô‰∏™‰∏ñÁïåÁöÑÂü∫Êú¨ËÆæÂÆö„ÄÅËßÑÂàô„ÄÅÂéÜÂè≤ËÉåÊôØÁ≠â..."></textarea>
              </div>
              <div class="settings-btn-group">
                <button class="settings-btn" onclick="clearWorldview()">Ê∏ÖÁ©∫</button>
                <button class="settings-btn primary" onclick="saveWorldview()">‰øùÂ≠ò</button>
              </div>
            </div>
          </div>

          <!-- Áü•ËØÜÂ∫ìÁÆ°ÁêÜ -->
          <div class="settings-section">
            <div class="settings-section-header">Áü•ËØÜÂ∫ì</div>
            <div class="settings-card">
              <div class="settings-btn-group">
                <button class="settings-btn primary" onclick="showAddKnowledgeModal()">
                  <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                    <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                  </svg>
                  Ê∑ªÂä†Áü•ËØÜÊù°ÁõÆ
                </button>
              </div>
              <div id="knowledgeList" style="margin-top: 12px;">
                <!-- Áü•ËØÜÂ∫ìÂàóË°®Â∞ÜÈÄöËøáJSÂä®ÊÄÅÊ∏≤Êüì -->
              </div>
            </div>
          </div>

          <!-- Êï∞ÊçÆÁÆ°ÁêÜ -->
          <div class="settings-section">
            <div class="settings-section-header">Êï∞ÊçÆÁÆ°ÁêÜ</div>
            <div class="settings-card">
              <!-- üî• „ÄêËÄÅÁéãÊñ∞Â¢û„ÄëÂ≠òÂÇ®‰ΩøÁî®ÊÉÖÂÜµ -->
              <div class="data-management-item">
                <div class="data-management-info">
                  <div class="data-management-title">
                    <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 6px;">
                      <path d="M3 3h18v18H3V3zm2 2v14h14V5H5zm2 2h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z" fill="currentColor"/>
                    </svg>
                    Â≠òÂÇ®‰ΩøÁî®ÊÉÖÂÜµ
                  </div>
                  <div class="data-management-desc" id="storageUsageInfo">Ê≠£Âú®Ê£ÄÊµã...</div>
                </div>
                <button class="settings-btn" onclick="checkStorageUsage()">Âà∑Êñ∞</button>
              </div>
              <div class="data-management-divider"></div>
              <div class="data-management-item">
                <div class="data-management-info">
                  <div class="data-management-title">
                    <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 6px;">
                      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ÂØºÂá∫ÂÖ®ÈÉ®Êï∞ÊçÆ
                  </div>
                  <div class="data-management-desc">Â∞ÜÊâÄÊúâÊâãÊú∫Êï∞ÊçÆÂØºÂá∫‰∏∫JSONÊñá‰ª∂ÔºåÂåÖÂê´ËßíËâ≤„ÄÅËÅäÂ§©ËÆ∞ÂΩï„ÄÅËÆæÁΩÆÁ≠â</div>
                </div>
                <button class="settings-btn primary" onclick="exportAllPhoneData()">ÂØºÂá∫</button>
              </div>
              <div class="data-management-divider"></div>
              <div class="data-management-item">
                <div class="data-management-info">
                  <div class="data-management-title">
                    <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 6px;">
                      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ÂØºÂÖ•Êï∞ÊçÆ
                  </div>
                  <div class="data-management-desc">‰ªéÂ§á‰ªΩÊñá‰ª∂ÊÅ¢Â§çÊï∞ÊçÆÔºà‚ö†Ô∏è Â∞ÜË¶ÜÁõñÁé∞ÊúâÂÖ®ÈÉ®Êï∞ÊçÆÔºâ</div>
                </div>
                <button class="settings-btn" onclick="importAllPhoneData()">ÂØºÂÖ•</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- API App Screen -->
      <div class="app-screen" id="apiScreen">
        <div class="app-content" style="padding-top: 68px;">
          <!-- Header Section -->
          <div class="settings-header-section">
            <div class="settings-logo-area">
              <div class="settings-logo-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="settings-logo-text">APIËÆæÁΩÆ</div>
            </div>
            <div class="settings-header-actions">
              <div class="settings-icon-btn" onclick="closeApp()" title="ÂÖ≥Èó≠">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- È¢ÑËÆæÁÆ°ÁêÜÂô® -->
          <div class="settings-section">
            <div class="settings-section-header">APIÈ¢ÑËÆæ</div>
            <div class="settings-card">
              <div class="preset-selector">
                <select class="settings-select" id="apiPresetSelect" onchange="handleAPIPresetChange()">
                  <option value="">-- ÈÄâÊã©APIÈ¢ÑËÆæ --</option>
                </select>
                <div class="preset-manager-btn" onclick="updateCurrentAPIPreset()" title="Êõ¥Êñ∞ÂΩìÂâçÈ¢ÑËÆæ">
                  <svg viewBox="0 0 24 24">
                    <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="preset-manager-btn" onclick="showAPIPresetManagerModal()" title="ÁÆ°ÁêÜÈ¢ÑËÆæ">
                  <svg viewBox="0 0 24 24">
                    <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- APIÈÖçÁΩÆ -->
          <div class="settings-section">
            <div class="settings-section-header">Âü∫Á°ÄÈÖçÁΩÆ</div>
            <div class="settings-card">
              <div class="settings-input-group">
                <label class="settings-label">APIÂú∞ÂùÄ (Proxy URL)</label>
                <input type="text" class="settings-input" id="apiProxyUrl" placeholder="https://api.example.com" />
              </div>
              <div class="settings-input-group">
                <label class="settings-label">APIÂØÜÈí• (API Key)</label>
                <input type="password" class="settings-input" id="apiKey" placeholder="sk-..." />
              </div>
              <div class="settings-btn-group" style="margin-top: 8px;">
                <button class="settings-btn primary" onclick="fetchAvailableModels()" style="width: 100%;">
                  <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                    <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                  </svg>
                  ÊãâÂèñÂèØÁî®Ê®°Âûã
                </button>
              </div>
              <div class="settings-input-group">
                <label class="settings-label">ÈÄâÊã©Ê®°Âûã (Model)</label>
                <select class="settings-select" id="apiModel">
                  <option value="">-- ËØ∑ÂÖàÊãâÂèñÊ®°ÂûãÂàóË°® --</option>
                </select>
              </div>
              <div class="settings-btn-group">
                <button class="settings-btn" onclick="clearAPIConfig()">Ê∏ÖÁ©∫</button>
                <button class="settings-btn" onclick="testAPIConnection()">ÊµãËØïËøûÊé•</button>
                <button class="settings-btn primary" onclick="saveAPIConfig()">‰øùÂ≠ò</button>
              </div>
            </div>
          </div>

          <!-- ËøûÊé•Áä∂ÊÄÅ -->
          <div class="settings-section">
            <div class="settings-section-header">ËøûÊé•Áä∂ÊÄÅ</div>
            <div class="settings-card" id="apiStatusCard">
              <div style="text-align: center; padding: 20px 0;">
                <svg viewBox="0 0 24 24" style="width: 48px; height: 48px; stroke: var(--text-tertiary); fill: none; stroke-width: 2; margin: 0 auto 12px;">
                  <circle cx="12" cy="12" r="10" />
                  <path d="M12 16v-4M12 8h.01" stroke-linecap="round" />
                </svg>
                <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                  ÈÖçÁΩÆAPIÂêéÁÇπÂáª"ÊµãËØïËøûÊé•"<br/>È™åËØÅÈÖçÁΩÆÊòØÂê¶Ê≠£Á°Æ
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Characters App Screen -->
      <div class="app-screen" id="charactersScreen">
        <div class="app-content" style="padding-top: 68px;">
          <!-- Header Section -->
          <div class="character-header">
            <div class="character-logo-area">
              <div class="character-logo-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </div>
              <div class="character-logo-text">ËßíËâ≤ÂàóË°®</div>
            </div>
            <div class="character-header-actions">
              <div class="character-icon-btn" onclick="closeApp()" title="ÂÖ≥Èó≠">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Worldview Tabs -->
          <div class="worldview-tabs" id="worldviewTabs">
            <div class="worldview-tab active" data-worldview="all" onclick="filterCharactersByWorldview('all')">ÂÖ®ÈÉ®ËßíËâ≤</div>
            <div class="worldview-tab" data-worldview="unbound" onclick="filterCharactersByWorldview('unbound')">Êú™ÁªëÂÆö</div>
            <!-- ÂÖ∂‰ªñ‰∏ñÁïåËßÇÊ†áÁ≠æÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
          </div>

          <!-- Character Grid -->
          <div class="character-grid" id="characterGrid">
            <!-- Create New Card -->
            <div class="character-card create-card" onclick="showCreateCharacterModal()">
              <div class="create-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="create-text">ÂàõÂª∫Êñ∞ËßíËâ≤</div>
            </div>

            <!-- Character cards will be dynamically generated here -->
          </div>
        </div>
      </div>

      <!-- Chat App Screen -->
      <div class="app-screen" id="chatScreen">
        <div class="app-content" style="padding-top: 20px; padding-bottom: 80px;">

          <!-- Chat Header -->
          <div class="chat-app-header">
            <div class="chat-header-top">
              <div class="chat-user-info">
                <div class="chat-user-avatar-mini">
                  <img id="chatAppUserAvatar" src="https://i.postimg.cc/4xmx7V4R/mmexport1759081128356.jpg" alt="User" onerror="this.src='https://i.postimg.cc/4xmx7V4R/mmexport1759081128356.jpg'">
                </div>
                <div class="chat-user-text-mini">
                  <div class="chat-user-name-mini" id="chatAppUserName">User</div>
                  <div class="chat-user-status-mini" id="chatAppUserBio">Online</div>
                </div>
              </div>
              <div class="chat-header-actions-mini">
                <div class="chat-icon-btn-mini" onclick="closeApp()" title="ÂÖ≥Èó≠">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
            </div>
            <div class="chat-search-bar-mini">
              <input type="text" class="chat-search-input-mini" placeholder="Search chats..." id="chatSearchInput">
            </div>
          </div>

          <!-- Stories Section -->
          <div class="chat-stories-section">
            <div class="chat-stories-inner-scroll">
              <!-- Add Story -->
              <div class="story-item-mini" onclick="showCharacterSelector()" style="cursor: pointer;">
                <div class="story-avatar-mini add-story-mini">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 4v16m8-8H4" stroke-linecap="round" />
                  </svg>
                </div>
                <div class="story-name-mini">Add</div>
              </div>
              <!-- Stories dynamically loaded -->
            </div>
          </div>

          <!-- Chat Requests Section -->
          <div class="chat-requests-mini" id="chatRequestsSection">
            <div class="requests-left-mini">
              <div class="requests-icon-mini">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="8.5" cy="7" r="4" />
                  <path d="M23 11v6M20 14h6" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div>
                <div class="requests-text-mini">Chat Requests</div>
                <div class="requests-count-mini" id="chatRequestsCount">0 new</div>
              </div>
            </div>
            <div class="requests-arrow-mini">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- Chat List -->
          <div class="chat-list-container">
            <div class="chat-list-header-mini">
              <div class="chat-list-title-mini">Chats</div>
              <div class="chat-list-count-mini" id="chatListCount">0</div>
            </div>
            <div class="chat-list-items" id="chatListItems">
              <!-- Chat items dynamically loaded -->
              <div class="chat-empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M9 10h6M9 14h3" stroke-linecap="round" />
                </svg>
                <div class="empty-text">No chats yet</div>
                <div class="empty-subtext">Start a conversation to see it here</div>
              </div>
            </div>
          </div>

          <!-- Bottom Navigation -->
          <div class="chat-bottom-nav">
            <!-- Chats -->
            <div class="chat-nav-item active" data-nav="chats">
              <div class="chat-nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="chat-nav-label">Chats</div>
              <div class="chat-nav-badge" id="chatsNavBadge">0</div>
            </div>

            <!-- Groups -->
            <div class="chat-nav-item" data-nav="groups">
              <div class="chat-nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="9" cy="7" r="4" />
                </svg>
              </div>
              <div class="chat-nav-label">Groups</div>
              <div class="chat-nav-badge">0</div>
            </div>

            <!-- Center Avatar -->
            <div class="chat-nav-item center" onclick="toggleChatStyleSwitcher()">
              <div class="chat-nav-icon">
                <img id="chatNavCenterAvatar" src="https://i.postimg.cc/4xmx7V4R/mmexport1759081128356.jpg" alt="Profile" onerror="this.src='https://i.postimg.cc/4xmx7V4R/mmexport1759081128356.jpg'">
              </div>
            </div>

            <!-- Moments -->
            <div class="chat-nav-item" data-nav="moments">
              <div class="chat-nav-icon">
                <svg viewBox="0 0 24 24">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <path d="M21 15l-5-5L5 21" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="chat-nav-label">Moments</div>
            </div>

            <!-- User -->
            <div class="chat-nav-item" data-nav="user">
              <div class="chat-nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </div>
              <div class="chat-nav-label">User</div>
            </div>
          </div>

        </div>

        <!-- Chat Detail Screen - ËÅäÂ§©ËØ¶ÊÉÖÈ°µ -->
        <div class="chat-detail-screen" id="chatDetailScreen">
          <!-- Chat Detail Header -->
          <div class="chat-detail-header">
            <div class="chat-detail-back-btn" onclick="closeChatDetail()">
              <svg viewBox="0 0 24 24">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>

            <div class="chat-detail-avatar" id="chatDetailAvatar" onclick="openCharProfile()" style="cursor: pointer;">
              <img src="" alt="Avatar">
            </div>

            <div class="chat-detail-info" id="chatDetailInfo">
              <div class="chat-detail-name" id="chatDetailName">Loading...</div>
              <div class="chat-detail-status" id="chatDetailStatus">Online</div>
            </div>

            <div class="chat-detail-actions">
              <!-- Â•ΩÊÑüÂ∫¶Ê†áËØÜ - Â∞èÂ∑ßÁ≤æËá¥Áâà -->
              <div class="chat-affection-indicator" id="chatAffectionIndicator" style="display: none;">
                <!-- Âä®ÊÄÅÊ∏≤ÊüìÁöÑÂ•ΩÊÑüÂ∫¶Ê†áËØÜ -->
              </div>

              <div class="chat-detail-icon-btn" onclick="openChatSettings()" title="Chat Settings">
                <svg viewBox="0 0 24 24">
                  <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Messages Area -->
          <div class="chat-messages-area" id="chatMessagesArea">
            <!-- Empty state -->
            <div class="chat-empty-messages" id="chatEmptyMessages">
              <svg viewBox="0 0 24 24">
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9 10h6M9 14h3" stroke-linecap="round" />
              </svg>
              <div class="chat-empty-messages-text">No messages yet</div>
              <div class="chat-empty-messages-subtext">Send a message to start the conversation</div>
            </div>

            <!-- Messages will be dynamically loaded here -->
          </div>

          <!-- Custom Affection Tooltip - Ëá™ÂÆö‰πâÂ•ΩÊÑüÂ∫¶ÊèêÁ§∫ -->
          <div class="custom-affection-tooltip" id="customAffectionTooltip">
            <div class="custom-tooltip-content">
              <!-- ÂçïÊ†èÊ®°ÂºèÔºàÈªòËÆ§Ôºâ -->
              <div class="custom-tooltip-single" id="customTooltipSingle">
                <div class="custom-tooltip-label">Affection</div>
                <div class="custom-tooltip-value" id="customTooltipValue">0</div>
                <div class="custom-tooltip-bar">
                  <div class="custom-tooltip-bar-fill" id="customTooltipBarFill"></div>
                </div>
              </div>

              <!-- ÂèåÊ†èÊ®°ÂºèÔºàÈÄÜÊîªÁï•Ôºâ -->
              <div class="custom-tooltip-dual" id="customTooltipDual" style="display: none;">
                <div class="dual-column">
                  <div class="dual-label">TA‚ÜíYou</div>
                  <div class="dual-value" id="customTooltipCharToUser">0</div>
                  <div class="dual-bar">
                    <div class="dual-bar-fill" id="customTooltipCharToUserBar"></div>
                  </div>
                </div>
                <div class="dual-divider"></div>
                <div class="dual-column">
                  <div class="dual-label">You‚ÜíTA</div>
                  <div class="dual-value" id="customTooltipUserToChar">0</div>
                  <div class="dual-bar">
                    <div class="dual-bar-fill" id="customTooltipUserToCharBar"></div>
                  </div>
                </div>
              </div>

              <!-- ÊÇÑÊÇÑËØùÂå∫Âüü -->
              <div class="custom-tooltip-whisper" id="customTooltipWhisper" style="display: none;">
                <div class="whisper-icon">
                  <div class="pixel-star"></div>
                </div>
                <div class="whisper-text" id="customTooltipWhisperText"></div>
              </div>
              <!-- ÂèòÂåñÂéüÂõ†Âå∫Âüü -->
              <div class="custom-tooltip-reason" id="customTooltipReason" style="display: none;">
                <div class="reason-text" id="customTooltipReasonText"></div>
              </div>
            </div>
          </div>

          <!-- Attachment Menu -->
          <div class="chat-attachment-menu" id="chatAttachmentMenu">
            <div class="chat-menu-item" onclick="chatAttachImage()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <rect x="3" y="3" width="18" height="18" rx="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <path d="M21 15l-5-5L5 21" stroke-linecap="round" />
                </svg>
              </div>
              <div class="chat-menu-item-label">Image</div>
            </div>
            <div class="chat-menu-item" onclick="openUserTextImageModal()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <rect x="3" y="3" width="18" height="18" rx="2" />
                  <path d="M7 8h10M7 12h6M7 16h8" stroke-linecap="round" />
                </svg>
              </div>
              <div class="chat-menu-item-label">ÊñáÂ≠óÂõæ</div>
            </div>
            <div class="chat-menu-item" onclick="chatAttachFile()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9l-7-7z" />
                  <path d="M13 2v7h7" stroke-linecap="round" />
                </svg>
              </div>
              <div class="chat-menu-item-label">File</div>
            </div>
            <div class="chat-menu-item" onclick="chatRecordVoice()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z" />
                  <path d="M19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8" stroke-linecap="round" />
                </svg>
              </div>
              <div class="chat-menu-item-label">Voice</div>
            </div>
            <div class="chat-menu-item" onclick="chatOpenEmoji()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10" />
                  <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" stroke-linecap="round" />
                </svg>
              </div>
              <div class="chat-menu-item-label">Emoji</div>
            </div>
            <div class="chat-menu-item" onclick="chatRegenerateAIResponse()">
              <div class="chat-menu-item-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" />
                  <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" />
                </svg>
              </div>
              <div class="chat-menu-item-label">ÈáçÂõû</div>
            </div>
          </div>

          <!-- Hidden File Input for Image Upload -->
          <input type="file" id="chatImageInput" accept="image/*" multiple style="display: none;" onchange="handleChatImageUpload(event)">

          <!-- Sticker Picker Overlay -->
          <div class="sticker-picker-overlay" id="stickerPickerOverlay" onclick="closeChatStickerPicker()">
            <div class="sticker-picker-sheet" id="stickerPickerContainer" onclick="event.stopPropagation()">
              <!-- Handle -->
              <div class="sticker-picker-handle"></div>
              <!-- Header -->
              <div class="sticker-picker-header">
                <div class="sticker-picker-title">Ë°®ÊÉÖÂåÖ</div>
                <div class="sticker-picker-actions">
                  <div class="sticker-picker-action" onclick="openBatchManagement()" title="ÊâπÈáèÁÆ°ÁêÜ">
                    <svg viewBox="0 0 24 24">
                      <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                  <div class="sticker-picker-action" onclick="openBatchImportModal()" title="ÊâπÈáèÂØºÂÖ•">
                    <svg viewBox="0 0 24 24">
                      <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                </div>
              </div>

              <!-- Category Bar - ÂàÜÁ±ªÊ†è -->
              <div class="sticker-category-bar" id="stickerCategoryBar">
                <div class="sticker-category-item active" data-category="all" onclick="switchStickerCategory('all')">ÂÖ®ÈÉ®</div>
                <!-- Âä®ÊÄÅÂàÜÁ±ªÂ∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
                <div class="sticker-category-manage" onclick="openCategoryManagement()" title="ÁÆ°ÁêÜÂàÜÁ±ª">
                  <svg viewBox="0 0 24 24">
                    <path d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>

              <!-- Sticker Grid -->
              <div class="sticker-grid" id="stickerGrid">
                <div class="sticker-grid-empty">ÊöÇÊó†Ë°®ÊÉÖÂåÖÔºåÁÇπÂáªÂè≥‰∏äËßí"+"ÊâπÈáèÂØºÂÖ•</div>
              </div>
            </div>
          </div>

          <!-- Batch Import Modal -->
          <div class="batch-import-modal" id="batchImportModal">
            <div class="batch-import-content">
              <div class="batch-import-header">
                <div class="batch-import-title">ÊâπÈáèÂØºÂÖ•Ë°®ÊÉÖÂåÖ</div>
                <div class="batch-import-close" onclick="closeBatchImportModal()">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
              <div class="batch-import-body">
                <div class="batch-import-hint">
                  ÊØèË°å‰∏Ä‰∏™Ë°®ÊÉÖÂåÖÔºåÊ†ºÂºèÔºö<br>
                  <span style="color: var(--accent-color);">ÊèèËø∞:ÈìæÊé•</span> Êàñ <span style="color: var(--accent-color);">ÊèèËø∞ÔºöÈìæÊé•</span><br>
                  ÊîØÊåÅ‰∏≠Ëã±ÊñáÂÜíÂè∑
                </div>
                <div class="batch-import-form-group">
                  <label class="batch-import-label">ÈÄâÊã©ÂàÜÁ±ª</label>
                  <select id="batchImportCategorySelect" class="batch-import-select">
                    <option value="default">ÈªòËÆ§ÂàÜÁ±ª</option>
                    <!-- Âä®ÊÄÅÂàÜÁ±ªÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
                  </select>
                </div>
                <textarea id="batchImportTextarea" class="batch-import-textarea" placeholder="ÂºÄÂøÉÁöÑÁå´Âí™:https://example.com/cat.gif
ÈöæËøáÁöÑË°®ÊÉÖ:https://example.com/sad.png
ÁÇπËµûÔºöhttps://example.com/thumbs.jpg"></textarea>
              </div>
              <div class="batch-import-footer">
                <div class="batch-import-btn" onclick="executeBatchImport()">ÂØºÂÖ•Ë°®ÊÉÖÂåÖ</div>
              </div>
            </div>
          </div>

          <!-- Category Management Modal - ÂàÜÁ±ªÁÆ°ÁêÜÂºπÁ™ó -->
          <div class="category-management-modal" id="categoryManagementModal">
            <div class="category-management-content">
              <div class="category-management-header">
                <div class="category-management-title">ÁÆ°ÁêÜÂàÜÁ±ª</div>
                <div class="category-management-close" onclick="closeCategoryManagement();">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
              <div class="category-management-list" id="categoryManagementList">
                <!-- ÂàÜÁ±ªÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∏≤Êüì -->
              </div>
              <div class="category-add-section">
                <input type="text" id="newCategoryNameInput" class="category-add-input" placeholder="ËæìÂÖ•Êñ∞ÂàÜÁ±ªÂêçÁß∞" maxlength="10">
                <div class="category-add-checkbox-group">
                  <label class="category-add-checkbox-label">
                    <input type="checkbox" id="newCategorySharedCheckbox" class="category-add-checkbox">
                    <span>ÂêåÊ≠•ÁªôËßíËâ≤/AI‰ΩøÁî®</span>
                  </label>
                </div>
                <button class="category-add-button" onclick="event.stopPropagation(); addNewStickerCategory();">Ê∑ªÂä†</button>
              </div>
            </div>
          </div>

          <!-- Sticker Batch Management Modal - ÊâπÈáèÁÆ°ÁêÜË°®ÊÉÖÂåÖÂºπÁ™ó -->
          <div class="sticker-batch-management-modal" id="stickerBatchManagementModal">
            <div class="sticker-batch-management-content">
              <div class="sticker-batch-management-header">
                <div class="sticker-batch-management-title">ÊâπÈáèÁÆ°ÁêÜË°®ÊÉÖÂåÖ</div>
                <div class="sticker-batch-management-close" onclick="closeBatchManagement()">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>

              <div class="sticker-batch-management-toolbar">
                <button class="sticker-batch-management-btn" onclick="toggleSelectAll()" id="selectAllBtn">ÂÖ®ÈÄâ</button>
                <button class="sticker-batch-management-btn danger" onclick="deleteSelectedStickers()" id="deleteSelectedBtn" disabled>Âà†Èô§ÈÄâ‰∏≠</button>
                <button class="sticker-batch-management-btn danger" onclick="deleteCurrentCategoryStickers()">Âà†Èô§ÂΩìÂâçÂàÜÁ±ª</button>
              </div>

              <div class="sticker-batch-management-list" id="stickerBatchManagementList">
                <!-- Ë°®ÊÉÖÂåÖÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∏≤Êüì -->
              </div>
            </div>
          </div>

          <!-- Sticker Edit Modal - ÁºñËæëË°®ÊÉÖÂåÖÂºπÁ™ó -->
          <div class="sticker-edit-modal" id="stickerEditModal">
            <div class="sticker-edit-content">
              <div class="sticker-edit-header">
                <div class="sticker-edit-title">ÁºñËæëË°®ÊÉÖÂåÖ</div>
                <div class="sticker-edit-close" onclick="closeStickerEdit()">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>

              <div class="sticker-edit-body">
                <div class="sticker-edit-preview" id="stickerEditPreview">
                  <img src="" alt="È¢ÑËßà" id="stickerEditPreviewImg">
                </div>

                <div class="sticker-edit-form-group">
                  <label class="sticker-edit-label">Ë°®ÊÉÖÂåÖÊèèËø∞</label>
                  <input type="text" id="stickerEditDescInput" class="sticker-edit-input" placeholder="ËæìÂÖ•Ë°®ÊÉÖÂåÖÊèèËø∞" maxlength="20">
                </div>

                <div class="sticker-edit-form-group">
                  <label class="sticker-edit-label">Ë°®ÊÉÖÂåÖÈìæÊé•</label>
                  <input type="text" id="stickerEditUrlInput" class="sticker-edit-input" placeholder="ËæìÂÖ•Ë°®ÊÉÖÂåÖÈìæÊé•Ôºàhttps://...Ôºâ">
                </div>
              </div>

              <div class="sticker-edit-footer">
                <button class="sticker-edit-cancel-btn" onclick="closeStickerEdit()">ÂèñÊ∂à</button>
                <button class="sticker-edit-save-btn" onclick="saveStickerEdit()">‰øùÂ≠ò</button>
              </div>
            </div>
          </div>

          <!-- User Text Image Drawer - Áî®Êà∑ÊñáÂ≠óÂõæÁâáÊäΩÂ±â -->
          <div class="text-image-overlay" id="textImageOverlay" onclick="closeUserTextImageModal()">
            <div class="text-image-sheet" onclick="event.stopPropagation()">
              <!-- Handle -->
              <div class="text-image-handle"></div>
              <!-- Header -->
              <div class="text-image-header">
                <div class="text-image-title">ÊñáÂ≠óÂõæÁâá</div>
                <div class="text-image-subtitle">ËßíËâ≤‰ºöÂ∞ÜÂÜÖÂÆπËßÜ‰∏∫ÂõæÁâá</div>
              </div>
              <!-- Input Area -->
              <div class="text-image-body">
                <textarea id="userTextImageInput" class="text-image-textarea" placeholder="ËæìÂÖ•ÂõæÁâáÂÜÖÂÆπ..."></textarea>
              </div>
              <!-- Footer -->
              <div class="text-image-footer">
                <button class="text-image-send-btn" onclick="sendUserTextImage()">ÂèëÈÄÅ</button>
              </div>
            </div>
          </div>

          <!-- Reply Preview (ÂºïÁî®È¢ÑËßà) -->
          <div class="chat-reply-preview" id="chatReplyPreview">
            <div class="reply-preview-bar"></div>
            <div class="reply-preview-content">
              <div class="reply-preview-name" id="replyPreviewName">Name</div>
              <div class="reply-preview-text" id="replyPreviewText">Message content...</div>
            </div>
            <div class="reply-preview-close" onclick="clearChatReplyPreview()">
              <svg viewBox="0 0 24 24">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- Chat Input Area -->
          <div class="chat-input-area">
            <!-- Attachment Button -->
            <div class="chat-attach-btn" id="chatAttachBtn" onclick="toggleChatAttachmentMenu()">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>

            <!-- Input Wrapper -->
            <div class="chat-input-wrapper">
              <textarea class="chat-message-input" id="chatMessageInput" placeholder="Message" rows="1" onkeydown="handleChatKeyPress(event)"></textarea>
              <div class="chat-send-btn" onclick="sendChatMessage(true)" title="ÂèëÈÄÅÂπ∂Ëß¶ÂèëAIÂõûÂ§ç">
                <svg viewBox="0 0 24 24">
                  <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Message Selection Toolbar -->
          <div class="message-selection-toolbar" id="messageSelectionToolbar">
            <div class="selection-toolbar-info" id="selectionToolbarInfo">Â∑≤ÈÄâÊã© 0 Êù°Ê∂àÊÅØ</div>
            <div class="selection-toolbar-actions">
              <div class="selection-toolbar-btn" onclick="chatSelectAllMessages()">ÂÖ®ÈÄâ</div>
              <div class="selection-toolbar-btn danger" onclick="chatDeleteSelectedMessages()">Âà†Èô§</div>
              <div class="selection-toolbar-btn" onclick="chatExitMessageSelectionMode()">ÂèñÊ∂à</div>
            </div>
          </div>

          <!-- ========== Message Action Menu (iOS iMessage Style) ========== -->
          <div class="message-action-overlay" id="messageActionOverlay" onclick="hideMessageActionMenu()">
            <!-- Quick Reaction Bar - Âä®ÊÄÅÊ∏≤ÊüìÔºåÊîØÊåÅËá™ÂÆö‰πâ -->
            <div class="message-reaction-bar" id="messageReactionBar" onclick="event.stopPropagation();">
              <!-- 5‰∏™ÂèçÂ∫îÊßΩ‰Ωç + 1‰∏™Ëá™ÂÆö‰πâÊåâÈíÆÔºåÁî±JSÂä®ÊÄÅÊ∏≤Êüì -->
            </div>

            <!-- Action Menu - ÁªùÂØπÂÆö‰ΩçÂà∞Ê∞îÊ≥°‰∏ãÊñπ -->
            <div class="message-action-menu" id="messageActionMenu" onclick="event.stopPropagation();">
              <div class="action-menu-item" onclick="messageReply()">
                <span class="action-menu-text">Reply</span>
                <svg viewBox="0 0 24 24"><path d="M9 4l-6 6 6 6"/><path d="M3 10h11c4 0 7 3 7 7v1"/></svg>
              </div>
              <div class="action-menu-divider"></div>
              <div class="action-menu-item" onclick="messageAddSticker()">
                <span class="action-menu-text">Add Sticker</span>
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><circle cx="9" cy="10" r="1" fill="currentColor" stroke="none"/><circle cx="15" cy="10" r="1" fill="currentColor" stroke="none"/><path d="M17 7l2-2m0 0h-2.5m2.5 0v2.5"/></svg>
              </div>
              <div class="action-menu-divider"></div>
              <div class="action-menu-item" onclick="messageCopy()">
                <span class="action-menu-text">Copy</span>
                <svg viewBox="0 0 24 24"><rect x="9" y="9" width="11" height="11" rx="2"/><path d="M5 15V5a2 2 0 0 1 2-2h10"/></svg>
              </div>
              <div class="action-menu-divider"></div>
              <div class="action-menu-item" onclick="messageTranslate()">
                <span class="action-menu-text">Translate</span>
                <svg viewBox="0 0 24 24"><path d="M3 5h8M7 3v2M5.5 5c.8 2.5 2 4 4.5 6"/><path d="M13 21l3-7 3 7"/><path d="M14.5 18h5"/><path d="M10 12L3 19"/></svg>
              </div>
              <div class="action-menu-divider"></div>
              <div class="action-menu-item" onclick="messageMore()">
                <span class="action-menu-text">More...</span>
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none"/><circle cx="8" cy="12" r="1" fill="currentColor" stroke="none"/><circle cx="12" cy="12" r="1" fill="currentColor" stroke="none"/><circle cx="16" cy="12" r="1" fill="currentColor" stroke="none"/></svg>
              </div>
            </div>
          </div>
          <!-- ========== End Message Action Menu ========== -->

          <!-- ========== Custom Reaction Manager Modal ========== -->
          <div class="custom-reaction-modal" id="customReactionModal" onclick="event.target === this && closeCustomReactionModal()">
            <div class="custom-reaction-container">
              <div class="custom-reaction-header">
                <span class="custom-reaction-title">Customize Reactions</span>
                <div class="custom-reaction-close" onclick="closeCustomReactionModal()">
                  <svg viewBox="0 0 24 24"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg>
                </div>
              </div>

              <div class="custom-reaction-content">
                <!-- Current Slots -->
                <div class="custom-reaction-section">
                  <div class="custom-reaction-section-title">Current Reactions</div>
                  <div class="custom-reaction-slots" id="customReactionSlots">
                    <!-- 5‰∏™ÊßΩ‰ΩçÁî±JSÂä®ÊÄÅÊ∏≤Êüì -->
                  </div>
                </div>

                <!-- Add New Reaction -->
                <div class="custom-reaction-section">
                  <div class="custom-reaction-section-title">Add New Reaction</div>
                  <div class="custom-reaction-input-row">
                    <input type="text" class="custom-reaction-input" id="customReactionInput" placeholder="Enter emoji or text..." maxlength="10" />
                    <button class="custom-reaction-add-btn" onclick="addCustomReaction()">Add</button>
                  </div>
                </div>

                <!-- Preset Emojis -->
                <div class="custom-reaction-section">
                  <div class="custom-reaction-section-title">Quick Pick</div>
                  <div class="custom-reaction-presets" id="customReactionPresets">
                    <span class="preset-emoji" onclick="pickPresetEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üëç')">üëç</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üëé')">üëé</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üòÇ')">üòÇ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üòÆ')">üòÆ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üò¢')">üò¢</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üò°')">üò°</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üî•')">üî•</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üíØ')">üíØ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üéâ')">üéâ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üíî')">üíî</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üôè')">üôè</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üëÄ')">üëÄ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('üíÄ')">üíÄ</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('ü§°')">ü§°</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('ü§î')">ü§î</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('!!')">!!</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('?')">?</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('OK')">OK</span>
                    <span class="preset-emoji" onclick="pickPresetEmoji('NO')">NO</span>
                  </div>
                </div>

                <!-- Reset to Default -->
                <div class="custom-reaction-reset" onclick="resetReactionsToDefault()">
                  <svg viewBox="0 0 24 24"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                  <span>Reset to Default</span>
                </div>
              </div>
            </div>
          </div>
          <!-- ========== End Custom Reaction Manager Modal ========== -->

        </div>

        <!-- Chat Style Popup - ‰ªéÂ§¥ÂÉèÂÜíÂá∫ÁöÑÂ∞èÂØπËØùÊ°Ü -->
        <div class="chat-style-modal" id="chatStyleModal" onclick="event.target === this && closeChatStyleModal()">
          <div class="chat-style-container">
            <div class="chat-style-inner-scroll">
              <div class="style-cards-scroll" id="styleCardsScroll">
                <!-- ÈªòËÆ§Ê†∑ÂºèÂç°Áâá -->
                <div class="style-preview-card active" data-style="default" onclick="switchChatStyle('default')">
                  <div class="style-preview-frame">
                    <div class="style-preview-content">
                      <!-- ÁÆÄÂåñÈ¢ÑËßàÔºöÈªòËÆ§Ê†∑Âºè -->
                      <div style="padding: 8px; background: var(--bg-primary); display: flex; flex-direction: column; gap: 5px;">
                        <!-- È°∂ÈÉ®ÔºöÂ§¥ÂÉè+ÊòµÁß∞Â∑¶‰æß -->
                        <div style="display: flex; align-items: center; gap: 6px;">
                          <div style="width: 24px; height: 24px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                          <div style="flex: 1;">
                            <div style="height: 6px; width: 35px; background: var(--text-primary); opacity: 0.3; border-radius: 2px; margin-bottom: 2px;"></div>
                            <div style="height: 5px; width: 50px; background: var(--text-secondary); opacity: 0.2; border-radius: 2px;"></div>
                          </div>
                        </div>
                        <!-- ÊêúÁ¥¢Ê†è -->
                        <div style="height: 14px; background: var(--bg-secondary); border-radius: 7px; border: 1px solid var(--border-color);"></div>
                        <!-- StoriesÊ®™Êéí -->
                        <div style="display: flex; gap: 5px;">
                          <div style="width: 26px; height: 26px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                          <div style="width: 26px; height: 26px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                          <div style="width: 26px; height: 26px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                        </div>
                        <!-- ChatsÊ†áÈ¢ò -->
                        <div style="font-family: 'Caveat', cursive; font-size: 14px; font-weight: 700; opacity: 0.5; margin: 2px 0;">Chats</div>
                        <!-- ËÅäÂ§©ÂàóË°®È°π -->
                        <div style="display: flex; gap: 4px; align-items: center;">
                          <div style="width: 18px; height: 18px; border-radius: 50%; background: var(--bg-tertiary); flex-shrink: 0;"></div>
                          <div style="flex: 1;">
                            <div style="height: 5px; width: 40px; background: var(--text-primary); opacity: 0.3; border-radius: 2px; margin-bottom: 2px;"></div>
                            <div style="height: 4px; width: 60px; background: var(--text-secondary); opacity: 0.2; border-radius: 1px;"></div>
                          </div>
                        </div>
                        <div style="display: flex; gap: 4px; align-items: center;">
                          <div style="width: 18px; height: 18px; border-radius: 50%; background: var(--bg-tertiary); flex-shrink: 0;"></div>
                          <div style="flex: 1;">
                            <div style="height: 5px; width: 40px; background: var(--text-primary); opacity: 0.3; border-radius: 2px; margin-bottom: 2px;"></div>
                            <div style="height: 4px; width: 60px; background: var(--text-secondary); opacity: 0.2; border-radius: 1px;"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="style-card-info">
                    <div class="style-card-name">ÈªòËÆ§Ê†∑Âºè</div>
                    <div class="style-card-desc">ÁªèÂÖ∏Â∏ÉÂ±Ä</div>
                    <div class="style-card-checkmark">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>
                </div>

                <!-- ÊûÅÁÆÄÁÅ∞Ê†∑ÂºèÂç°Áâá -->
                <div class="style-preview-card" data-style="minimal-gray" onclick="switchChatStyle('minimal-gray')">
                  <div class="style-preview-frame">
                    <div class="style-preview-content">
                      <!-- ÁÆÄÂåñÈ¢ÑËßàÔºöÊûÅÁÆÄÁÅ∞Ê†∑Âºè - Â±Ö‰∏≠Â∏ÉÂ±Ä -->
                      <div style="padding: 8px; background: var(--bg-primary); display: flex; flex-direction: column; gap: 5px;">
                        <!-- È°∂ÈÉ®ÔºöÂ§¥ÂÉè+ÊòµÁß∞Â±Ö‰∏≠ -->
                        <div style="display: flex; flex-direction: column; align-items: center; text-align: center; gap: 2px;">
                          <div style="width: 28px; height: 28px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color);"></div>
                          <div style="height: 6px; width: 35px; background: var(--text-primary); opacity: 0.3; border-radius: 2px;"></div>
                          <div style="height: 5px; width: 50px; background: var(--text-secondary); opacity: 0.2; border-radius: 2px;"></div>
                        </div>
                        <!-- ChatsÊ†áÈ¢ò -->
                        <div style="font-family: 'Caveat', cursive; font-size: 14px; font-weight: 700; opacity: 0.5; margin: 2px 0;">Chats</div>
                        <!-- StoriesÊ®™ÊéíÂ±Ö‰∏≠ -->
                        <div style="display: flex; gap: 5px; justify-content: center;">
                          <div style="width: 24px; height: 24px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                          <div style="width: 24px; height: 24px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                          <div style="width: 24px; height: 24px; border-radius: 50%; background: var(--bg-tertiary); border: 1px solid var(--border-color); flex-shrink: 0;"></div>
                        </div>
                        <!-- ËÅäÂ§©ÂàóË°®È°π -->
                        <div style="display: flex; gap: 4px; align-items: center;">
                          <div style="width: 18px; height: 18px; border-radius: 50%; background: var(--bg-tertiary); flex-shrink: 0;"></div>
                          <div style="flex: 1;">
                            <div style="height: 5px; width: 40px; background: var(--text-primary); opacity: 0.3; border-radius: 2px; margin-bottom: 2px;"></div>
                            <div style="height: 4px; width: 60px; background: var(--text-secondary); opacity: 0.2; border-radius: 1px;"></div>
                          </div>
                        </div>
                        <div style="display: flex; gap: 4px; align-items: center;">
                          <div style="width: 18px; height: 18px; border-radius: 50%; background: var(--bg-tertiary); flex-shrink: 0;"></div>
                          <div style="flex: 1;">
                            <div style="height: 5px; width: 40px; background: var(--text-primary); opacity: 0.3; border-radius: 2px; margin-bottom: 2px;"></div>
                            <div style="height: 4px; width: 60px; background: var(--text-secondary); opacity: 0.2; border-radius: 1px;"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="style-card-info">
                    <div class="style-card-name">ÊûÅÁÆÄÁÅ∞</div>
                    <div class="style-card-desc">Â±Ö‰∏≠Â∏ÉÂ±Ä</div>
                    <div class="style-card-checkmark">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>
                </div>
            </div>

            <!-- ÊöÇÊó†Ê†∑ÂºèÊèêÁ§∫ - ÂÖ∂‰ªñÈ°µÈù¢ÊòæÁ§∫ -->
            <div id="noStyleHint" style="display: none; text-align: center; padding: 20px 12px; color: var(--text-secondary);">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 48px; height: 48px; margin: 0 auto 12px; opacity: 0.3;">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 16v-4M12 8h.01" stroke-linecap="round" />
              </svg>
              <div style="font-size: 14px; font-weight: 600; margin-bottom: 6px;">ÊöÇÊó†Ê†∑ÂºèÈÄâÈ°π</div>
              <div style="font-size: 12px; opacity: 0.7;">ËØ•È°µÈù¢Ê†∑ÂºèÂäüËÉΩÂç≥Â∞Ü‰∏äÁ∫ø</div>
            </div>

            <!-- ËÉåÊôØËÆæÁΩÆÂå∫Âüü - ‰ªÖchatsÈ°µÈù¢ÊòæÁ§∫ -->
            <div class="style-settings-section" id="styleBackgroundSettings" style="display: none;">
              <div class="style-settings-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <path d="M21 15l-5-5L5 21" stroke-linecap="round" />
                </svg>
                ËÉåÊôØËÆæÁΩÆ
              </div>

              <!-- ËÉåÊôØÁ±ªÂûãÈÄâÊã© -->
              <div class="bg-type-buttons">
                <div class="bg-type-btn active" data-type="none" onclick="selectBgType('none')">ÈªòËÆ§</div>
                <div class="bg-type-btn" data-type="image" onclick="selectBgType('image')">ÂõæÁâá</div>
                <div class="bg-type-btn" data-type="solid" onclick="selectBgType('solid')">Á∫ØËâ≤</div>
                <div class="bg-type-btn" data-type="gradient" onclick="selectBgType('gradient')">Ê∏êÂèò</div>
              </div>

              <!-- ‰∏ä‰º†ÂõæÁâá -->
              <div class="bg-setting-container" id="bgImageContainer">
                <div class="bg-upload-area" onclick="document.getElementById('styleBackgroundUpload').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                  <div class="bg-upload-text">ÁÇπÂáª‰∏ä‰º†ËÉåÊôØÂõæÁâá</div>
                </div>
                <input type="file" id="styleBackgroundUpload" accept="image/*" style="display: none;" onchange="handleStyleBackgroundUpload(event)" />
              </div>

              <!-- Á∫ØËâ≤ËÉåÊôØ -->
              <div class="bg-setting-container" id="bgSolidContainer">
                <div class="bg-color-picker">
                  <span class="bg-color-label">ÈÄâÊã©È¢úËâ≤</span>
                  <input type="color" class="bg-color-input" id="styleBgSolidColor" value="#ffffff" oninput="applyStyleBackground()" />
                </div>
              </div>

              <!-- Ê∏êÂèòËÉåÊôØ -->
              <div class="bg-setting-container" id="bgGradientContainer">
                <div class="bg-gradient-preview" id="bgGradientPreview"></div>
                <div class="bg-gradient-colors">
                  <div class="bg-color-picker">
                    <span class="bg-color-label">Ëµ∑ÂßãÈ¢úËâ≤</span>
                    <input type="color" class="bg-color-input" id="styleBgGradientStart" value="#ff6b6b" oninput="applyStyleBackground()" />
                  </div>
                  <div class="bg-color-picker">
                    <span class="bg-color-label">ÁªìÊùüÈ¢úËâ≤</span>
                    <input type="color" class="bg-color-input" id="styleBgGradientEnd" value="#4ecdc4" oninput="applyStyleBackground()" />
                  </div>
                </div>
              </div>
            </div>
            </div>
          </div>

        </div>

        <!-- Chat Settings Screen - ËÅäÂ§©ËÆæÁΩÆÈ°µ -->
        <div class="chat-settings-screen" id="chatSettingsScreen">
          <div class="app-content" style="padding-top: 68px;">
            <!-- Header Section -->
            <div class="settings-header-section">
              <div class="settings-logo-area">
                <div class="settings-logo-icon">
                  <svg viewBox="0 0 24 24">
                    <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </div>
                <div class="settings-logo-text">ËÅäÂ§©ËÆæÁΩÆ</div>
              </div>
              <div class="settings-header-actions">
                <div class="settings-icon-btn" onclick="closeChatSettings()" title="ÂÖ≥Èó≠">
                  <svg viewBox="0 0 24 24">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
            </div>

            <!-- ËßíËâ≤‰ø°ÊÅØÈ¢ÑËßà -->
            <div class="settings-section">
              <div class="settings-section-header">ËßíËâ≤‰ø°ÊÅØ</div>
              <div class="settings-card" style="text-align: center;">
                <div class="chat-settings-avatar" id="chatSettingsAvatar">
                  <img src="" alt="Avatar">
                </div>
                <div class="chat-settings-original-name" id="chatSettingsOriginalName">Loading...</div>
              </div>
            </div>

            <!-- ËßíËâ≤Â§áÊ≥® -->
            <div class="settings-section">
              <div class="settings-section-header">ËßíËâ≤Â§áÊ≥®</div>
              <div class="settings-card">
                <div class="settings-input-group">
                  <label class="settings-label">Â§áÊ≥®ÂêçÁß∞ÔºàÁïôÁ©∫‰ΩøÁî®ÂéüÂêçÔºâ</label>
                  <input type="text" class="settings-input" id="chatSettingsNickname" placeholder="Ëá™ÂÆö‰πâËßíËâ≤ÊòæÁ§∫ÂêçÁß∞..." />
                  <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
                    Â§áÊ≥®ÂêçÁß∞Â∞ÜÂú®ËÅäÂ§©È°µÈù¢ÂíåËÅäÂ§©ÂàóË°®‰∏≠ÊòæÁ§∫
                  </div>
                </div>
              </div>
            </div>

            <!-- Áî®Êà∑ËÆæÂÆö -->
            <div class="settings-section">
              <div class="settings-section-header">Áî®Êà∑ËÆæÂÆö</div>
              <div class="settings-card">
                <div class="settings-input-group">
                  <label class="settings-label">ÈÄâÊã©Áî®Êà∑ËµÑÊñô</label>
                  <select class="settings-select" id="chatSettingsUserProfile">
                    <option value="">-- ÈÄâÊã©Áî®Êà∑ËµÑÊñô --</option>
                  </select>
                  <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
                    AIÂ∞ÜÊ†πÊçÆÈÄâÊã©ÁöÑÁî®Êà∑ËµÑÊñôËøõË°åÂØπËØù
                  </div>
                </div>
              </div>
            </div>

            <!-- ÂâßÊÉÖÁÇπ -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>ÂâßÊÉÖÁÇπ</span>
                <div class="plot-point-header-stars">
                  <div class="plot-point-mini-star"></div>
                  <div class="plot-point-mini-star"></div>
                  <div class="plot-point-mini-star"></div>
                </div>
              </div>
              <div class="settings-card plot-points-card">
                <!-- ËØ¥ÊòéÊñáÂ≠ó -->
                <div class="plot-point-description">ËÆ∞ÂΩïÂÖ≥ÈîÆÂâßÊÉÖËäÇÁÇπÔºåÂ∏ÆÂä©AIÁêÜËß£ÊïÖ‰∫ãÂèëÂ±ïËÑâÁªú</div>
                <!-- ÂâßÊÉÖÁÇπÂàóË°® -->
                <div id="plotPointsList" class="plot-points-list">
                  <!-- Á©∫Áä∂ÊÄÅ -->
                  <div class="plot-points-empty">
                    <svg viewBox="0 0 24 24">
                      <path d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2z" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M9 10h6M9 14h3" stroke-linecap="round" />
                    </svg>
                    <div class="empty-text">ÊöÇÊó†ÂâßÊÉÖÁÇπ</div>
                    <div class="empty-subtext">ÁÇπÂáª‰∏ãÊñπÊåâÈíÆÊ∑ªÂä†</div>
                  </div>
                </div>

                <!-- Ê∑ªÂä†ÊåâÈíÆ -->
                <button class="add-plot-point-btn-main" onclick="showAddPlotPointModal()">
                  <svg viewBox="0 0 24 24">
                    <line x1="12" y1="5" x2="12" y2="19" stroke-linecap="round" stroke-linejoin="round" />
                    <line x1="5" y1="12" x2="19" y2="12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                  <span>Ê∑ªÂä†ÂâßÊÉÖÁÇπ</span>
                </button>
              </div>
            </div>

            <!-- ÁôæÂÆù‰π¶ÁªëÂÆö - ËÅäÂ§©Ê°ÜÁ∫ßÂà´ -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>ÁôæÂÆù‰π¶ÁªëÂÆö</span>
              </div>
              <div class="settings-card">
                <div class="chat-baobaobook-binding-container" id="chatBaobaobookBindingContainer">
                  <div class="chat-baobaobook-binding-header" onclick="toggleChatBaobaobookBindingList()">
                    <span class="chat-baobaobook-binding-summary" id="chatBaobaobookBindingSummary">Êú™ÈÄâÊã©‰ªª‰ΩïÊù°ÁõÆ</span>
                    <svg class="chat-baobaobook-binding-arrow" viewBox="0 0 24 24" id="chatBaobaobookBindingArrow">
                      <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                  <div class="chat-baobaobook-binding-list" id="chatBaobaobookBindingList">
                    <div class="chat-baobaobook-binding-empty" id="chatBaobaobookBindingEmpty">
                      ÊöÇÊó†ÁôæÂÆù‰π¶Êù°ÁõÆÔºåËØ∑ÂÖàÂú®ÁôæÂÆù‰π¶App‰∏≠ÂàõÂª∫
                    </div>
                  </div>
                </div>
                <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 10px;">
                  Êó†ÂÖ≥ÈîÆËØçÊù°ÁõÆÂõ∫ÂÆöËß¶ÂèëÔºåÊúâÂÖ≥ÈîÆËØçÊù°ÁõÆÈúÄÂåπÈÖçÁî®Êà∑Ê∂àÊÅØ
                </div>
              </div>
            </div>

            <!-- ËÅäÂ§©ËÆ∞ÂøÜ -->
            <div class="settings-section">
              <div class="settings-section-header">ËÅäÂ§©ËÆ∞ÂøÜ</div>
              <div class="settings-card">
                <div class="settings-input-group">
                  <label class="settings-label">‰∏ä‰∏ãÊñáËÆ∞ÂøÜÊù°Êï∞</label>
                  <input type="number" class="settings-input" id="chatSettingsMemoryLength" value="20" min="1" max="100" />
                  <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
                    AIÂ∞ÜËØªÂèñÊúÄËøëÁöÑ N Êù°Ê∂àÊÅØ‰Ωú‰∏∫‰∏ä‰∏ãÊñáÔºà1-100Êù°Ôºâ
                  </div>
                </div>
              </div>
            </div>

            <!-- Ê∏©Â∫¶ËÆæÁΩÆ -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>Ê∏©Â∫¶ËÆæÁΩÆ</span>
                <div class="temp-header-stars">
                  <div class="temp-mini-star"></div>
                  <div class="temp-mini-star"></div>
                  <div class="temp-mini-star"></div>
                </div>
              </div>
              <div class="settings-card temp-card">
                <!-- Ê∏©Â∫¶ÊòæÁ§∫ -->
                <div class="temp-display">
                  <div class="temp-label">TEMPERATURE</div>
                  <div class="temp-value" id="currentTempValue">1.0</div>
                  <div class="temp-description" id="currentTempDescription">Âπ≥Ë°°ÂàõÈÄ†ÊÄß‰∏éÁ®≥ÂÆöÊÄß</div>
                </div>

                <!-- ÊªëÂä®Êù° -->
                <div class="temp-slider-container">
                  <input
                    type="range"
                    class="temp-slider"
                    id="chatTempSlider"
                    min="0"
                    max="20"
                    step="1"
                    value="10"
                    oninput="updateChatTemperature(this.value)"
                  >
                  <div class="temp-range-labels">
                    <span class="temp-range-label">Á≤æÁ°Æ 0.0</span>
                    <span class="temp-range-label">2.0 ÂàõÊÑè</span>
                  </div>
                </div>

                <!-- È¢ÑËÆæÊåâÈíÆ -->
                <div class="temp-presets">
                  <button class="temp-preset-btn" onclick="setChatTempPreset(0)">0.0<br>ÊûÅÁ≤æÁ°Æ</button>
                  <button class="temp-preset-btn" onclick="setChatTempPreset(5)">0.5<br>Á®≥ÂÆö</button>
                  <button class="temp-preset-btn active" onclick="setChatTempPreset(10)">1.0<br>Âπ≥Ë°°</button>
                  <button class="temp-preset-btn" onclick="setChatTempPreset(15)">1.5<br>ÂàõÊÑè</button>
                  <button class="temp-preset-btn" onclick="setChatTempPreset(20)">2.0<br>ÈöèÊú∫</button>
                </div>

                <!-- ËØ¥Êòé‰ø°ÊÅØ -->
                <div class="temp-info">
                  <div class="temp-info-title">ËØ¥Êòé</div>
                  ËæÉ‰ΩéÁöÑÊ∏©Â∫¶‰ΩøËæìÂá∫Êõ¥Âä†Á°ÆÂÆöÂíå‰∏ÄËá¥ÔºåËæÉÈ´òÁöÑÊ∏©Â∫¶‰ΩøËæìÂá∫Êõ¥Âä†Â§öÊ†∑ÂíåÂàõÈÄ†ÊÄß„ÄÇÊØè‰∏™ËÅäÂ§©‰ºöËØùÂèØ‰ª•Áã¨Á´ãËÆæÁΩÆÊ∏©Â∫¶„ÄÇ
                </div>
              </div>
            </div>

            <!-- ËÅäÂ§©‰∏ªÈ¢ò -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>ËÅäÂ§©‰∏ªÈ¢ò</span>
                <svg class="theme-star-icon" viewBox="0 0 24 24" style="width: 10px; height: 10px; display: inline-block; margin-left: 6px; vertical-align: middle;">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/>
                </svg>
              </div>
              <div class="settings-card chat-theme-card">
                <!-- üíÖ ÂÆûÊó∂È¢ÑËßàÊ°Ü -->
                <div class="theme-preview-container">
                  <div class="theme-preview-label">ÂÆûÊó∂È¢ÑËßà</div>
                  <div class="theme-preview-bubbles">
                    <!-- ËßíËâ≤Ê∞îÊ≥° -->
                    <div class="theme-preview-message character">
                      <div class="theme-preview-bubble" id="themePreviewCharacter">
                        ËøôÊòØËßíËâ≤ÁöÑÊ∂àÊÅØÁ§∫‰æã
                      </div>
                    </div>
                    <!-- Áî®Êà∑Ê∞îÊ≥° -->
                    <div class="theme-preview-message user">
                      <div class="theme-preview-bubble" id="themePreviewUser">
                        ËøôÊòØÁî®Êà∑ÁöÑÊ∂àÊÅØÁ§∫‰æã
                      </div>
                    </div>
                  </div>
                </div>

                <!-- üíÖ Ê∞îÊ≥°Ê†∑ÂºèÈÄâÊã© -->
                <div class="theme-control-group">
                  <label class="theme-label">
                    <span class="theme-label-text">Ê∞îÊ≥°Ê†∑Âºè</span>
                  </label>
                  <div class="theme-style-selector">
                    <div class="theme-style-option" data-style="default" onclick="selectBubbleStyle('default')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">ÈªòËÆ§Ê†∑Âºè</div>
                        <div class="theme-style-desc">ÁÆÄÁ∫¶ÂúÜËßíÁü©ÂΩ¢</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble default"></div>
                      </div>
                    </div>
                    <div class="theme-style-option" data-style="imessage" onclick="selectBubbleStyle('imessage')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">iMessage</div>
                        <div class="theme-style-desc">AppleÈ£éÊ†ºÂ∞ñËßí</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble imessage"></div>
                      </div>
                    </div>
                    <div class="theme-style-option" data-style="discord" onclick="selectBubbleStyle('discord')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">Discord</div>
                        <div class="theme-style-desc">Á¥´Ëâ≤Ê∏êÂèòÂúÜÊ∂¶</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble discord"></div>
                      </div>
                    </div>
                    <div class="theme-style-option" data-style="cute-v1" onclick="selectBubbleStyle('cute-v1')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">Cute v1</div>
                        <div class="theme-style-desc">‰æßËæπÂ∞è‰∏âËßí</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble cute-v1"></div>
                      </div>
                    </div>
                    <div class="theme-style-option" data-style="cute-v2" onclick="selectBubbleStyle('cute-v2')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">Cute v2</div>
                        <div class="theme-style-desc">‰∏äÊñπÂ∞ñ‰∏âËßí</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble cute-v2"></div>
                      </div>
                    </div>
                    <div class="theme-style-option" data-style="tooltip" onclick="selectBubbleStyle('tooltip')">
                      <div class="theme-style-radio">
                        <div class="theme-style-radio-dot"></div>
                      </div>
                      <div class="theme-style-info">
                        <div class="theme-style-name">Tooltip</div>
                        <div class="theme-style-desc">Â∫ïÈÉ®‰∏âËßí+Â§¥ÂÉè</div>
                      </div>
                      <div class="theme-style-preview">
                        <div class="style-preview-bubble tooltip"></div>
                      </div>
                    </div>
                  </div>
                  <input type="hidden" id="chatThemeBubbleStyle" value="default" />
                </div>

                <!-- Ê∞îÊ≥°Â§ßÂ∞èË∞ÉÊï¥ -->
                <div class="theme-control-group">
                  <label class="theme-label">
                    <span class="theme-label-text">Ê∞îÊ≥°Â§ßÂ∞è</span>
                    <span class="theme-label-value" id="chatThemeBubbleSizeValue">1.0</span>
                  </label>
                  <div class="theme-slider-container">
                    <input type="range" class="theme-slider" id="chatThemeBubbleSize" min="0.8" max="1.2" step="0.1" value="1.0" oninput="updateBubbleSizeValue(this.value); applyThemePreview();" />
                    <div class="theme-slider-track"></div>
                    <div class="theme-slider-labels">
                      <span>Á¥ßÂáë</span>
                      <span>Ê†áÂáÜ</span>
                      <span>ÂÆΩÊùæ</span>
                    </div>
                  </div>
                </div>

                <!-- Áî®Êà∑Ê∞îÊ≥°È¢úËâ≤ -->
                <div class="theme-control-group">
                  <div class="theme-group-header">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
                      <circle cx="12" cy="7" r="4" stroke="currentColor" fill="none" stroke-width="2"/>
                    </svg>
                    <span>Áî®Êà∑Ê∞îÊ≥°</span>
                  </div>
                  <div class="theme-color-grid">
                    <div class="theme-color-item">
                      <label class="theme-color-label">ËæπÊ°Ü</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeUserBorder" value="#e0e0e0" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                    <div class="theme-color-item">
                      <label class="theme-color-label">ËÉåÊôØ</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeUserBackground" value="#ffffff" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                    <div class="theme-color-item">
                      <label class="theme-color-label">ÊñáÂ≠ó</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeUserText" value="#000000" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ËßíËâ≤Ê∞îÊ≥°È¢úËâ≤ -->
                <div class="theme-control-group">
                  <div class="theme-group-header">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                      <path d="M18 8A6 6 0 1 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>ËßíËâ≤Ê∞îÊ≥°</span>
                  </div>
                  <div class="theme-color-grid">
                    <div class="theme-color-item">
                      <label class="theme-color-label">ËæπÊ°Ü</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeCharacterBorder" value="#e0e0e0" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                    <div class="theme-color-item">
                      <label class="theme-color-label">ËÉåÊôØ</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeCharacterBackground" value="#f5f5f5" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                    <div class="theme-color-item">
                      <label class="theme-color-label">ÊñáÂ≠ó</label>
                      <div class="theme-color-input-wrapper">
                        <input type="color" class="theme-color-input" id="chatThemeCharacterText" value="#000000" oninput="applyThemePreview();" />
                        <div class="theme-color-preview"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ÈáçÁΩÆÊåâÈíÆ -->
                <div class="theme-control-group" style="margin-top: 20px;">
                  <button class="theme-reset-btn" onclick="resetChatTheme()">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                      <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M21 3v5h-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M3 21v-5h5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ÈáçÁΩÆ‰∏∫ÈªòËÆ§‰∏ªÈ¢ò
                  </button>
                </div>

              </div>
            </div>

            <!-- ËÅäÂ§©ËÉåÊôØ -->
            <div class="settings-section">
              <div class="settings-section-header">ËÅäÂ§©ËÉåÊôØ</div>
              <div class="settings-card">
                <div class="settings-input-group">
                  <label class="settings-label">Ëá™ÂÆö‰πâËÅäÂ§©ËÉåÊôØ</label>
                  <div class="chat-background-preview" id="chatBackgroundPreview">
                    <div class="background-preview-placeholder">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" />
                        <circle cx="8.5" cy="8.5" r="1.5" />
                        <path d="M21 15l-5-5L5 21" stroke-linecap="round" />
                      </svg>
                      <div style="margin-top: 8px; font-size: 12px; color: var(--text-tertiary);">ÁÇπÂáª‰∏ä‰º†ËÉåÊôØÂõæÁâá</div>
                    </div>
                  </div>
                  <input type="file" id="chatBackgroundInput" accept="image/*" style="display: none;" onchange="handleChatBackgroundUpload(event)" />
                  <div class="settings-btn-group" style="margin-top: 12px;">
                    <button class="settings-btn" onclick="document.getElementById('chatBackgroundInput').click()">
                      <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                      </svg>
                      ‰∏ä‰º†ÂõæÁâá
                    </button>
                    <button class="settings-btn" onclick="clearChatBackground()">Ê∏ÖÈô§ËÉåÊôØ</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ÊîªÁï•Ê®°Âºè -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>ÊîªÁï•Ê®°Âºè</span>
                <svg class="affection-star-icon" viewBox="0 0 24 24" style="width: 10px; height: 10px; display: inline-block; margin-left: 6px; vertical-align: middle;">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/>
                </svg>
              </div>

              <!-- ÂÖ®Êñ∞insÈ£éÊ†ºÂç°ÁâáÂÆπÂô® -->
              <div class="affection-container-v2">

                <!-- È°∂ÈÉ®ÊéßÂà∂Èù¢Êùø -->
                <div class="affection-top-panel">
                  <div class="affection-status-bar">
                    <div class="status-dot"></div>
                    <span class="status-text">Strategy Mode</span>
                  </div>
                  <label class="affection-toggle-modern">
                    <input type="checkbox" id="affectionModeToggle" onchange="toggleAffectionMode(this.checked)">
                    <span class="toggle-track"></span>
                    <span class="toggle-thumb"></span>
                  </label>
                </div>

                <!-- Â±ïÂºÄÂÜÖÂÆπ -->
                <div id="affectionModeDetails" class="affection-content-v2">

                  <!-- ÂäüËÉΩËØ¥Êòé -->
                  <div class="affection-grid-container">
                    <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.6;">
                      ÊîªÁï•Ê®°ÂºèÂºÄÂêØÂêéÔºåÂèØÂú®ËÅäÂ§©ÁïåÈù¢ÂÆûÊó∂ÊòæÁ§∫Â•ΩÊÑüÂ∫¶Ê†áËØÜÔºåÂ∏ÆÂä©‰Ω†Êõ¥Áõ¥ËßÇÂú∞‰∫ÜËß£ÂΩìÂâçÂÖ≥Á≥ªËøõÂ∫¶
                    </div>

                    <!-- ÈÄÜÊîªÁï•Ê®°Âºè -->
                    <div class="affection-grid-label" style="border-bottom: none; padding-bottom: 8px; margin-bottom: 12px;">
                      <span style="font-size: 13px;">ÈÄÜÊîªÁï•Ê®°Âºè</span>
                      <label class="affection-toggle-modern" style="margin: 0;">
                        <input type="checkbox" id="reverseAffectionMode" onchange="toggleReverseAffectionMode(this.checked)">
                        <span class="toggle-track"></span>
                        <span class="toggle-thumb"></span>
                      </label>
                    </div>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-bottom: 12px; line-height: 1.5;">
                      ËßíËâ≤ÊîªÁï•Áî®Êà∑Ê®°ÂºèÔºåÊòæÁ§∫ÂèåÂêëÂ•ΩÊÑüÂ∫¶ÔºàÂ∑¶ÔºöËßíËâ≤‚ÜíÁî®Êà∑ÔºåÂè≥ÔºöÁî®Êà∑‚ÜíËßíËâ≤Ôºâ
                    </div>

                    <!-- ÈÄÜÊîªÁï•Ê®°ÂºèË°®Âçï - ÂèØÂ±ïÂºÄ -->
                    <div id="reverseAffectionForm" style="max-height: 0; overflow: hidden; transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease, margin-bottom 0.4s ease; opacity: 0; margin-bottom: 0;">
                      <div style="padding: 16px; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 20px;">

                        <!-- ÂàùÂßã/Êª°ÂÄºÂ•ΩÊÑüÂ∫¶ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                          <div>
                            <label style="display: block; font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; letter-spacing: 0.3px;">ÂàùÂßãÂ•ΩÊÑüÂ∫¶</label>
                            <input type="number" id="reverseInitialAffection" min="0" max="100" value="0" oninput="saveReverseAffectionFormData()" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 13px; background: var(--bg-primary); color: var(--text-primary);">
                          </div>
                          <div>
                            <label style="display: block; font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; letter-spacing: 0.3px;">Êª°ÂÄºÂ•ΩÊÑüÂ∫¶</label>
                            <input type="number" id="reverseMaxAffection" min="0" max="100" value="100" oninput="saveReverseAffectionFormData()" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 13px; background: var(--bg-primary); color: var(--text-primary);">
                          </div>
                        </div>

                        <!-- Â•ΩÊÑüÂ∫¶Èò∂ÊÆµÂÆö‰πâ -->
                        <div style="margin-bottom: 16px;">
                          <label style="display: block; font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; letter-spacing: 0.3px;">Â•ΩÊÑüÂ∫¶Èò∂ÊÆµÂÆö‰πâ</label>
                          <textarea id="reverseAffectionStages" placeholder="Ëá™ÂÆö‰πâÂ•ΩÊÑüÂ∫¶Èò∂ÊÆµÔºå‰æãÂ¶ÇÔºö&#10;0-20: ÈôåÁîü‰∫∫&#10;20-50: ÊúãÂèã&#10;50-80: Â•ΩÂèã&#10;80-100: ÊÅã‰∫∫" oninput="saveReverseAffectionFormData()" style="width: 100%; min-height: 90px; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 12px; background: var(--bg-primary); color: var(--text-primary); font-family: inherit; resize: vertical; line-height: 1.6;"></textarea>
                        </div>

                        <!-- ÈÄÅÁªôËßíËâ≤ÁöÑËØù -->
                        <div>
                          <label style="display: block; font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; letter-spacing: 0.3px;">ÈÄÅÁªôËßíËâ≤ÁöÑ‰∏ÄÂè•ËØù</label>
                          <textarea id="reverseMessageToChar" placeholder="ÂÜô‰∏ã‰Ω†ÊÉ≥ÂØπËßíËâ≤ËØ¥ÁöÑËØù..." oninput="saveReverseAffectionFormData()" style="width: 100%; min-height: 70px; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 12px; background: var(--bg-primary); color: var(--text-primary); font-family: inherit; resize: vertical; line-height: 1.6;"></textarea>
                        </div>

                      </div>
                    </div>

                    <!-- ÊòØÂê¶ÊòæÁ§∫Â•ΩÊÑüÂ∫¶Ê†áËØÜ -->
                    <div class="affection-grid-label" style="border-bottom: none; padding-bottom: 8px; margin-bottom: 12px;">
                      <span style="font-size: 13px;">ÊòæÁ§∫Â•ΩÊÑüÂ∫¶Ê†áËØÜ</span>
                      <label class="affection-toggle-modern" style="margin: 0;">
                        <input type="checkbox" id="showAffectionIndicator" onchange="toggleAffectionIndicator(this.checked)">
                        <span class="toggle-track"></span>
                        <span class="toggle-thumb"></span>
                      </label>
                    </div>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-bottom: 20px; line-height: 1.5;">
                      Âú®ËÅäÂ§©È°µÈù¢È°∂ÈÉ®ÊòæÁ§∫Â•ΩÊÑüÂ∫¶Ê†áËØÜÔºåÂÆûÊó∂Â±ïÁ§∫ÂΩìÂâçÂ•ΩÊÑüÂ∫¶Êï∞ÂÄº
                    </div>

                    <!-- ÊòØÂê¶ÊòæÁ§∫Â•ΩÊÑüÂ∫¶ÊèêÈÜí -->
                    <div class="affection-grid-label" style="border-bottom: none; padding-bottom: 8px; margin-bottom: 12px;">
                      <span style="font-size: 13px;">ÊòæÁ§∫Â•ΩÊÑüÂ∫¶ÊèêÈÜí</span>
                      <label class="affection-toggle-modern" style="margin: 0;">
                        <input type="checkbox" id="showAffectionReminder" onchange="toggleAffectionReminder(this.checked)">
                        <span class="toggle-track"></span>
                        <span class="toggle-thumb"></span>
                      </label>
                    </div>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-bottom: 20px; line-height: 1.5;">
                      Âú®ËßíËâ≤Ê∂àÊÅØÊó∂Èó¥Êà≥ÊóÅÊòæÁ§∫Â•ΩÊÑüÂ∫¶ÂèòÂåñÂéüÂõ†ÔºåÂ∏ÆÂä©‰Ω†‰∫ÜËß£ÂÖ≥Á≥ªÂèòÂåñÁöÑÁªÜËäÇ
                    </div>

                    <!-- Â•ΩÊÑüÂ∫¶Ê†áËØÜÊ†∑Âºè -->
                    <div class="affection-grid-label">
                      <span>Ê†áËØÜÊ†∑Âºè</span>
                      <span class="grid-count">5 styles</span>
                    </div>

                    <!-- Ê†∑ÂºèÈÄâÊã©ÁΩëÊ†º -->
                    <div class="affection-styles-grid">

                      <!-- Letter ‰ø°Á∫∏ÈÇÆ‰ª∂ -->
                      <div class="style-card-v2 active" data-style="letter" onclick="selectIndicatorStyle('letter')">
                        <div class="card-header-v2">
                          <div class="card-icon-v2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                              <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                          </div>
                          <div class="card-check-v2"></div>
                        </div>
                        <div class="card-preview-v2">
                          <div class="indicator-letter">
                            <div class="letter-lines"></div>
                            <div class="letter-stamp">‚ô°</div>
                            <div class="letter-content">
                              Affection<br>
                              <span class="letter-value">72%</span>
                            </div>
                          </div>
                        </div>
                        <div class="card-footer-v2">
                          <div class="card-name">Letter</div>
                          <div class="card-desc">‰ø°Á∫∏ÈÇÆÊà≥</div>
                        </div>
                      </div>

                      <!-- Blog ÂçöÂÆ¢Âç°Áâá -->
                      <div class="style-card-v2" data-style="blog" onclick="selectIndicatorStyle('blog')">
                        <div class="card-header-v2">
                          <div class="card-icon-v2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                              <path d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zM9 7h6M9 11h6M9 15h4"/>
                            </svg>
                          </div>
                          <div class="card-check-v2"></div>
                        </div>
                        <div class="card-preview-v2">
                          <div class="indicator-blog">
                            <div class="blog-date">Nov 15, 2024</div>
                            <div class="blog-title">Current Affection</div>
                            <div class="blog-value">72%</div>
                            <div class="blog-meta">
                              <span>Status</span>
                              <span>Updating</span>
                            </div>
                          </div>
                        </div>
                        <div class="card-footer-v2">
                          <div class="card-name">Blog</div>
                          <div class="card-desc">ÂçöÂÆ¢Âç°Áâá</div>
                        </div>
                      </div>

                      <!-- Badge ÂæΩÁ´†Ê†áÁ≠æ -->
                      <div class="style-card-v2" data-style="badge" onclick="selectIndicatorStyle('badge')">
                        <div class="card-header-v2">
                          <div class="card-icon-v2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                              <path d="M12 15a3 3 0 100-6 3 3 0 000 6z"/>
                              <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                            </svg>
                          </div>
                          <div class="card-check-v2"></div>
                        </div>
                        <div class="card-preview-v2">
                          <div class="indicator-badge">
                            <div class="badge-left">AFFECTION</div>
                            <div class="badge-right">72%</div>
                          </div>
                        </div>
                        <div class="card-footer-v2">
                          <div class="card-name">Badge</div>
                          <div class="card-desc">ÂæΩÁ´†Ê†áÁ≠æ</div>
                        </div>
                      </div>

                      <!-- Stars ÊòüËΩ®ÁéØÁªï -->
                      <div class="style-card-v2" data-style="stars" onclick="selectIndicatorStyle('stars')">
                        <div class="card-header-v2">
                          <div class="card-icon-v2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                          </div>
                          <div class="card-check-v2"></div>
                        </div>
                        <div class="card-preview-v2">
                          <div class="indicator-stars">
                            <div class="stars-orbit">
                              <div class="star"></div>
                              <div class="star"></div>
                              <div class="star"></div>
                              <div class="star"></div>
                            </div>
                            <div class="stars-content">
                              <div class="stars-label">Affection</div>
                              <div class="stars-value">72</div>
                            </div>
                          </div>
                        </div>
                        <div class="card-footer-v2">
                          <div class="card-name">Stars</div>
                          <div class="card-desc">ÊòüËΩ®ÁéØÁªï</div>
                        </div>
                      </div>

                      <!-- Custom Ëá™ÂÆö‰πâÂõæÁâá -->
                      <div class="style-card-v2" data-style="custom" onclick="selectIndicatorStyle('custom')">
                        <div class="card-header-v2">
                          <div class="card-icon-v2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                              <rect x="3" y="3" width="18" height="18" rx="2"/>
                              <circle cx="8.5" cy="8.5" r="1.5"/>
                              <path d="M21 15l-5-5L5 21" stroke-linecap="round"/>
                            </svg>
                          </div>
                          <div class="card-check-v2"></div>
                        </div>
                        <div class="card-preview-v2">
                          <div class="indicator-custom" id="customIndicatorPreview">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width: 32px; height: 32px; opacity: 0.3;">
                              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                          </div>
                        </div>
                        <div class="card-footer-v2">
                          <div class="card-name">Custom</div>
                          <div class="card-desc">Ëá™ÂÆö‰πâÂõæÁâá</div>
                        </div>
                      </div>

                    </div>

                    <!-- Ëá™ÂÆö‰πâÂõæÁâá‰∏ä‰º†Âå∫Âüü -->
                    <div class="custom-upload-section" id="customUploadSection" style="display: none;">
                      <div class="custom-upload-card">
                        <div class="upload-header">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21" stroke-linecap="round"/>
                          </svg>
                          <span>‰∏ä‰º†Ëá™ÂÆö‰πâÂõæÁâá</span>
                        </div>
                        <div class="upload-preview" id="customUploadPreview">
                          <div class="upload-placeholder" onclick="document.getElementById('customAffectionImageUpload').click()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="placeholder-text">ÁÇπÂáª‰∏ä‰º†</div>
                            <div class="placeholder-hint">ÊîØÊåÅ JPG„ÄÅPNG„ÄÅGIF</div>
                          </div>
                        </div>
                        <input type="file" id="customAffectionImageUpload" accept="image/*" style="display: none;" onchange="handleCustomAffectionImageUpload(event)">
                        <div class="upload-actions">
                          <button class="upload-action-btn secondary" onclick="clearCustomAffectionImage()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke-linecap="round"/>
                            </svg>
                            Ê∏ÖÈô§
                          </button>
                          <button class="upload-action-btn primary" onclick="document.getElementById('customAffectionImageUpload').click()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            ÈÄâÊã©ÂõæÁâá
                          </button>
                        </div>
                      </div>
                    </div>

                  </div>

                </div>

              </div>
            </div>

            <!-- ÊùÇÁâ©Â∫ì -->
            <div class="settings-section">
              <div class="settings-section-header">
                <span>ÊùÇÁâ©Â∫ì</span>
                <svg viewBox="0 0 24 24" style="width: 10px; height: 10px; display: inline-block; margin-left: 6px; vertical-align: middle;">
                  <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="settings-card">
                <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.6;">
                  ‰∏Ä‰∫õ‰∏çÂ§™Â•ΩÂàÜÁ±ªÁöÑÂ∞èÂäüËÉΩËÆæÁΩÆ
                </div>

                <!-- HTMLÂç°ÁâáÂºÄÂÖ≥ -->
                <div class="affection-grid-label" style="border-bottom: 1px solid var(--border-color); padding-bottom: 16px;">
                  <div>
                    <span style="font-size: 13px;">HTMLÂç°Áâá</span>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px; line-height: 1.4;">
                      ÂêØÁî®ÂêéAIÂèØÂèëÈÄÅÂØåÂ™í‰ΩìÂç°ÁâáÔºàÁ•®ÊçÆ„ÄÅËØÅ‰ª∂Á≠âÔºâ
                    </div>
                  </div>
                  <label class="affection-toggle-modern" style="margin: 0; flex-shrink: 0;">
                    <input type="checkbox" id="htmlCardToggle" onchange="toggleHtmlCardMode(this.checked)" checked>
                    <span class="toggle-track"></span>
                    <span class="toggle-thumb"></span>
                  </label>
                </div>

                <!-- Ë∂ÖÁ∫ßHTMLÂç°ÁâáÂºÄÂÖ≥ -->
                <div class="affection-grid-label" style="border-bottom: none; padding-bottom: 0; margin-top: 16px;">
                  <div>
                    <span style="font-size: 13px;">Ë∂ÖÁ∫ßHTMLÂç°Áâá</span>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px; line-height: 1.4;">
                      ‰∏ìÂÆ∂Á∫ßÂ§çÊùÇ‰∫§‰∫íÂç°ÁâáÔºåÊîØÊåÅCSSÂä®Áîª+JS‰∫íÂä®
                    </div>
                  </div>
                  <label class="affection-toggle-modern" style="margin: 0; flex-shrink: 0;">
                    <input type="checkbox" id="superHtmlCardToggle" onchange="toggleSuperHtmlCardMode(this.checked)">
                    <span class="toggle-track"></span>
                    <span class="toggle-thumb"></span>
                  </label>
                </div>

              </div>
            </div>

            <!-- Â§öÂºÄËÅäÂ§©Ê°Ü -->
            <div class="settings-section">
              <div class="settings-section-header">Â§öÂºÄËÅäÂ§©Ê°Ü</div>
              <div class="settings-card">
                <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.6;">
                  ‰∏∫ÂΩìÂâçËßíËâ≤ÂàõÂª∫Â§ö‰∏™Áã¨Á´ãÁöÑËÅäÂ§©Ê°ÜÔºåÊØè‰∏™ËÅäÂ§©Ê°Ü‰øùÂ≠òÁã¨Á´ãÁöÑÂØπËØùÂéÜÂè≤
                </div>

                <!-- ËÅäÂ§©Ê°ÜÂàóË°® -->
                <div id="chatSessionsList" style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 16px;">
                  <!-- Âä®ÊÄÅÂä†ËΩΩËÅäÂ§©Ê°ÜÂàóË°® -->
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆÔºöÊñ∞Âª∫ËÅäÂ§©Ê°Ü -->
                <button class="settings-btn" onclick="createNewChatSession()" style="width: 100%;">
                  <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                    <path d="M12 5v14m-7-7h14" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                  </svg>
                  Êñ∞Âª∫ËÅäÂ§©Ê°Ü
                </button>
              </div>
            </div>

            <!-- Êï∞ÊçÆÁÆ°ÁêÜ -->
            <div class="settings-section">
              <div class="settings-section-header">Êï∞ÊçÆÁÆ°ÁêÜ</div>
              <div class="settings-card">
                <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 12px; line-height: 1.6;">
                  ÁÆ°ÁêÜÂΩìÂâçËÅäÂ§©Ê°ÜÁöÑÊï∞ÊçÆÔºàÊ∂àÊÅØËÆ∞ÂΩï„ÄÅÂ•ΩÊÑüÂ∫¶„ÄÅÊó•Á®ãË°®Ôºâ
                </div>
                <div class="settings-btn-group">
                  <button class="settings-btn" onclick="exportChatData()" title="ÂØºÂá∫ÂΩìÂâçËßíËâ≤ÁöÑÊâÄÊúâÊï∞ÊçÆ">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                    </svg>
                    ÂØºÂá∫Êï∞ÊçÆ
                  </button>
                  <button class="settings-btn" onclick="importChatData()" title="ÂØºÂÖ•ËßíËâ≤Êï∞ÊçÆ">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                    </svg>
                    ÂØºÂÖ•Êï∞ÊçÆ
                  </button>
                </div>
                <div class="settings-btn-group" style="margin-top: 8px;">
                  <button class="settings-btn" style="background: #ef4444; color: white; border-color: #ef4444; flex: 1;" onclick="clearAllChatData()" title="Ê∏ÖÈô§ÂΩìÂâçËßíËâ≤ÁöÑÊâÄÊúâÊï∞ÊçÆ">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                      <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                    </svg>
                    Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆ
                  </button>
                </div>
                <div style="font-size: 10px; color: var(--text-tertiary); margin-top: 8px; padding: 8px; background: var(--bg-tertiary); border-radius: 8px;">
                  ‚ö†Ô∏è Ê∏ÖÈô§Êìç‰Ωú‰ªÖÂà†Èô§ÂΩìÂâçËßíËâ≤ÁöÑÊï∞ÊçÆÔºå‰∏çÂΩ±ÂìçÂÖ∂‰ªñËßíËâ≤
                </div>
              </div>
            </div>

            <!-- ‰øùÂ≠òÊåâÈíÆ -->
            <div class="settings-section">
              <div class="settings-card">
                <div class="settings-btn-group">
                  <button class="settings-btn" onclick="closeChatSettings()">ÂèñÊ∂à</button>
                  <button class="settings-btn primary" onclick="saveChatSettings()">‰øùÂ≠òËÆæÁΩÆ</button>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- ÂâßÊÉÖÁÇπÊ∑ªÂä†/ÁºñËæëÊ®°ÊÄÅÊ°Ü -->
        <div class="plot-point-modal" id="plotPointModal" onclick="if(event.target === this) closePlotPointModal()">
          <div class="plot-point-modal-content">
            <div class="plot-point-modal-header">
              <div class="plot-point-modal-title">
                <span id="plotPointModalTitleText">Ê∑ªÂä†ÂâßÊÉÖÁÇπ</span>
                <div class="plot-point-header-stars">
                  <div class="plot-point-mini-star"></div>
                  <div class="plot-point-mini-star"></div>
                  <div class="plot-point-mini-star"></div>
                </div>
              </div>
              <div class="plot-point-modal-close" onclick="closePlotPointModal()">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>

            <div class="plot-point-modal-body">
              <!-- Êó•ÊúüÈÄâÊã© -->
              <div class="plot-point-form-group">
                <label class="plot-point-label">
                  <svg viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  <span>Êó•Êúü</span>
                </label>
                <input type="date" class="plot-point-input" id="plotPointDate" />
              </div>

              <!-- Âú∞ÁÇπËæìÂÖ• -->
              <div class="plot-point-form-group">
                <label class="plot-point-label">
                  <svg viewBox="0 0 24 24">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Âú∞ÁÇπ</span>
                </label>
                <input type="text" class="plot-point-input" id="plotPointLocation" placeholder="‰æãÂ¶ÇÔºöÂíñÂï°È¶Ü„ÄÅÂõæ‰π¶È¶Ü..." maxlength="30" />
              </div>

              <!-- ÂÜÖÂÆπËæìÂÖ• -->
              <div class="plot-point-form-group">
                <label class="plot-point-label">
                  <svg viewBox="0 0 24 24">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                  <span>ÂâßÊÉÖÂÜÖÂÆπ</span>
                </label>
                <textarea class="plot-point-textarea" id="plotPointContent" placeholder="ÊèèËø∞Ëøô‰∏™ÂâßÊÉÖËäÇÁÇπÂèëÁîüÁöÑ‰∫ãÊÉÖ..." rows="5"></textarea>
                <div class="plot-point-char-count">
                  <span id="plotPointCharCount">0</span> / 500
                </div>
              </div>

              <!-- ÈöêËóèÂ≠óÊÆµÔºöÂâßÊÉÖÁÇπIDÔºàÁºñËæëÊó∂‰ΩøÁî®Ôºâ -->
              <input type="hidden" id="plotPointId" value="" />
            </div>

            <div class="plot-point-modal-footer">
              <button class="plot-point-modal-btn secondary" onclick="closePlotPointModal()">ÂèñÊ∂à</button>
              <button class="plot-point-modal-btn primary" onclick="savePlotPoint()">‰øùÂ≠ò</button>
            </div>
          </div>
        </div>

        <!-- User Profile Screen - Áî®Êà∑ËµÑÊñôÈ°µ -->
        <div class="user-profile-main-screen" id="userProfileScreen">
          <div class="user-profile-content">
          <!-- Decorative Top Lace -->
          <div class="profile-lace-top">
            <div class="lace-pattern-bar"></div>
          </div>

          <!-- Decorative Stars -->
          <div class="profile-star-deco star-1"></div>
          <div class="profile-star-deco star-2"></div>
          <div class="profile-star-deco star-3"></div>

          <!-- Main Profile Card -->
          <div class="user-profile-main-card" id="userProfileMainCard">
            <!-- Background Image Layer -->
            <div class="user-card-background" id="userCardBackground"></div>

            <!-- Pixel Corner Decorations -->
            <div class="profile-pixel-corner top-left"></div>
            <div class="profile-pixel-corner top-right"></div>
            <div class="profile-pixel-corner bottom-left"></div>
            <div class="profile-pixel-corner bottom-right"></div>

            <div class="user-profile-avatar-section">
              <div class="user-avatar-wrapper">
                <div class="user-avatar-large" id="userProfileAvatar">
                  <!-- Default Avatar SVG -->
                  <svg viewBox="0 0 24 24">
                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                </div>
                <div class="user-pixel-heart"></div>
              </div>

              <div class="user-display-name" id="userProfileName"></div>
              <div class="user-display-username" id="userProfileUsername"></div>
              <div class="user-display-pronouns" id="userProfilePronouns"></div>

              <div class="user-display-bio" id="userProfileBio"></div>

              <div class="user-profile-stats-row">
                <div class="user-stat-box">
                  <div class="user-stat-value" id="userStatMood"></div>
                  <div class="user-stat-label">Mood</div>
                </div>
                <div class="user-stat-box">
                  <div class="user-stat-value" id="userStatChats">0</div>
                  <div class="user-stat-label">Chats</div>
                </div>
                <div class="user-stat-box">
                  <div class="user-stat-value" id="userStatZone"></div>
                  <div class="user-stat-label">Zone</div>
                </div>
              </div>
            </div>
          </div>

          <!-- About Me Section -->
          <div class="user-profile-section-box" id="userAboutSection">
            <div class="user-section-header-title">
              <span>About Me</span>
            </div>
            <div class="user-about-text" id="userAboutText"></div>
          </div>

          <!-- Interests Section -->
          <div class="user-profile-section-box" id="userInterestsSection">
            <div class="user-section-header-title">
              <span>Interests</span>
            </div>
            <div class="user-list-group">
              <div class="user-list-group-title">yes !</div>
              <div class="user-tags-container" id="userTagsYes">
                <!-- Positive tags will be loaded here -->
              </div>
            </div>
            <div class="user-list-group">
              <div class="user-list-group-title">no !</div>
              <div class="user-tags-container" id="userTagsNo">
                <!-- Negative tags will be loaded here -->
              </div>
            </div>
          </div>

          <!-- Custom Lists Section -->
          <div class="user-profile-section-box" id="userListsSection">
            <div class="user-section-header-title">
              <span>My Lists</span>
            </div>
            <div id="userCustomLists">
              <!-- Custom lists will be loaded here -->
            </div>
          </div>

          <!-- Floating Action Buttons -->
          <div class="profile-floating-actions">
            <div class="profile-action-btn" onclick="openUserProfileEditModal()" title="Edit Profile">
              <svg viewBox="0 0 24 24">
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="profile-action-btn" onclick="openUserProfileSettings()" title="Settings">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12.22 2h-.44a2 2 0 00-2 2v.18a2 2 0 01-1 1.73l-.43.25a2 2 0 01-2 0l-.15-.08a2 2 0 00-2.73.73l-.22.38a2 2 0 00.73 2.73l.15.1a2 2 0 011 1.72v.51a2 2 0 01-1 1.74l-.15.09a2 2 0 00-.73 2.73l.22.38a2 2 0 002.73.73l.15-.08a2 2 0 012 0l.43.25a2 2 0 011 1.73V20a2 2 0 002 2h.44a2 2 0 002-2v-.18a2 2 0 011-1.73l.43-.25a2 2 0 012 0l.15.08a2 2 0 002.73-.73l.22-.39a2 2 0 00-.73-2.73l-.15-.08a2 2 0 01-1-1.74v-.5a2 2 0 011-1.74l.15-.09a2 2 0 00.73-2.73l-.22-.38a2 2 0 00-2.73-.73l-.15.08a2 2 0 01-2 0l-.43-.25a2 2 0 01-1-1.73V4a2 2 0 00-2-2z" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      </div> <!-- /chatScreen -->

      <!-- Appearance App Screen - Â§ñËßÇËÆæÁΩÆ -->
      <div class="app-screen" id="appearanceScreen">
        <div class="app-content" style="padding-top: 68px;">
          <!-- Header Section -->
          <div class="settings-header-section">
            <div class="settings-logo-area">
              <div class="settings-logo-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <div class="settings-logo-text">Â§ñËßÇËÆæÁΩÆ</div>
            </div>
            <div class="settings-header-actions">
              <div class="settings-icon-btn" onclick="closeApp()" title="ÂÖ≥Èó≠">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Profile Card - ‰∏ªÈ¢òÁªüËÆ°Âç°Áâá -->
          <div class="appearance-profile-card">
            <div class="appearance-profile-header">
              <div class="appearance-profile-avatar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <div class="appearance-profile-info">
                <div class="appearance-profile-name">‰∏ªÈ¢òÈÖçÁΩÆ</div>
                <div class="appearance-profile-bio">[ customize_your_theme ]</div>
                <div style="margin-top: 8px">
                  <span class="appearance-feature-badge">v2.0</span>
                </div>
              </div>
            </div>

            <div class="appearance-profile-stats">
              <div class="appearance-stat-item">
                <div class="appearance-stat-value">12</div>
                <div class="appearance-stat-label">‰∏ªÈ¢ò</div>
              </div>
              <div class="appearance-stat-item">
                <div class="appearance-stat-value">24</div>
                <div class="appearance-stat-label">ÂõæÊ†á</div>
              </div>
              <div class="appearance-stat-item">
                <div class="appearance-stat-value">8</div>
                <div class="appearance-stat-label">Â≠ó‰Ωì</div>
              </div>
            </div>
          </div>

          <!-- Settings Grid - ËÆæÁΩÆÁΩëÊ†º -->
          <div class="appearance-settings-grid">
            <!-- Wallpaper - Â£ÅÁ∫∏ -->
            <div class="appearance-setting-card" onclick="openWallpaperSettings()">
              <div class="appearance-setting-header">
                <div class="appearance-setting-title">Â£ÅÁ∫∏</div>
                <div class="appearance-setting-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <path d="M21 15l-5-5L5 21" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
              <div class="appearance-setting-desc">
                Ëá™ÂÆö‰πâÈîÅÂ±èÂíå‰∏ªÂ±èÂ£ÅÁ∫∏ÔºåÊîØÊåÅ <span class="appearance-code-text">Êú¨Âú∞</span> Êàñ <span class="appearance-code-text">URL</span> ÂØºÂÖ•
              </div>
            </div>

            <!-- App Icons - Â∫îÁî®ÂõæÊ†á -->
            <div class="appearance-setting-card" onclick="openIconSettings()">
              <div class="appearance-setting-header">
                <div class="appearance-setting-title">Â∫îÁî®ÂõæÊ†á</div>
                <div class="appearance-setting-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="14" width="7" height="7" rx="1" />
                    <rect x="3" y="14" width="7" height="7" rx="1" />
                  </svg>
                </div>
              </div>
              <div class="appearance-setting-desc">Êõ¥Êîπ Dock Ê†èÂõæÊ†áÔºåÂàõÂª∫Ëá™ÂÆö‰πâÂ∫îÁî®Â§ñËßÇ</div>
            </div>

            <!-- Typography - ÊéíÁâà -->
            <div class="appearance-setting-card" onclick="openTypographySettings()">
              <div class="appearance-setting-header">
                <div class="appearance-setting-title">ÊéíÁâà</div>
                <div class="appearance-setting-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 20h16M6 16h12M8 12h8M10 8h4" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
              <div class="appearance-setting-desc">‰∏ä‰º†Ëá™ÂÆö‰πâÂ≠ó‰ΩìÔºåÂÖ®Â±ÄË∞ÉÊï¥È¢úËâ≤ÊñπÊ°à</div>
            </div>

            <!-- Sticker System - Ë¥¥Á∫∏Á≥ªÁªü -->
            <div class="appearance-setting-card" onclick="openStickerSettings()">
              <div class="appearance-setting-header">
                <div class="appearance-setting-title">Ë¥¥Á∫∏Á≥ªÁªü</div>
                <div class="appearance-setting-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
              <div class="appearance-setting-desc">Ê∑ªÂä†Ë£ÖÈ•∞Ë¥¥Á∫∏ÔºåÊîØÊåÅÊãñÂä®„ÄÅÊóãËΩ¨ÂíåÁº©ÊîæÊéßÂà∂</div>
            </div>
          </div>

          <!-- Section Divider - ÂàÜÈöîÁ∫ø -->
          <div class="appearance-section-divider"></div>

          <!-- Action Buttons - Êìç‰ΩúÊåâÈíÆ -->
          <div class="appearance-action-buttons">
            <div class="appearance-action-btn" onclick="exportTheme()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom: 4px;">
                <path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" stroke-linecap="round" />
              </svg>
              <div>ÂØºÂá∫</div>
            </div>
            <div class="appearance-action-btn primary" onclick="applyTheme()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom: 4px;">
                <path d="M5 13l4 4L19 7" stroke-linecap="round" />
              </svg>
              <div>Â∫îÁî®</div>
            </div>
          </div>

          <!-- Version Info - ÁâàÊú¨‰ø°ÊÅØ -->
          <div style="margin-top: 20px; text-align: center; padding-bottom: 20px;">
            <div class="appearance-code-text" style="display: inline-block;">v2.0.0-preview</div>
          </div>
        </div>
      </div>

      <!-- BaoBaoBook App Screen - ÁôæÂÆù‰π¶ÔºàÁ±ª‰ººËßíËâ≤ÂàóË°®ÁöÑËÆæËÆ°Ôºâ -->
      <div class="app-screen" id="baobaobookScreen">
        <div class="app-content" style="padding-top: 68px;">
          <!-- Header Section - Â§çÁî®character-headerÊ†∑Âºè -->
          <div class="character-header">
            <div class="character-logo-area">
              <div class="character-logo-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="character-logo-text">ÁôæÂÆù‰π¶</div>
            </div>
            <div class="character-header-actions">
              <!-- ÂàÜÁ±ªÁÆ°ÁêÜÊåâÈíÆ -->
              <div class="character-icon-btn" onclick="showBaobaobookCategoryManager()" title="ÁÆ°ÁêÜÂàÜÁ±ª">
                <svg viewBox="0 0 24 24">
                  <path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
              <div class="character-icon-btn" onclick="closeApp()" title="ÂÖ≥Èó≠">
                <svg viewBox="0 0 24 24">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </div>
          </div>

          <!-- ÂàÜÁ±ªÊªëÂä®ÂØºËà™ - Â§çÁî®worldview-tabsÊ†∑Âºè -->
          <div class="worldview-tabs" id="baobaobookCategoryTabs">
            <div class="worldview-tab active" data-category-id="all" onclick="filterBaobaobookByCategory('all')">ÂÖ®ÈÉ®</div>
            <!-- ÂÖ∂‰ªñÂàÜÁ±ªÊ†áÁ≠æÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
          </div>

          <!-- ÁôæÂÆù‰π¶Êù°ÁõÆÂàóË°® - Á¥ßÂáëÂàóË°®ÂºèÂ∏ÉÂ±Ä -->
          <div class="baobaobook-entry-container" id="baobaobookGrid">
            <!-- ÂàõÂª∫ÊåâÈíÆÂíåÊù°ÁõÆÂàóË°®Â∞ÜÈÄöËøáJSÂä®ÊÄÅÊ∏≤Êüì -->
          </div>

          <!-- Á©∫Áä∂ÊÄÅÊèêÁ§∫ÔºàÂΩìÊ≤°ÊúâÊù°ÁõÆÊó∂ÊòæÁ§∫Ôºâ -->
          <div class="baobaobook-empty-state" id="baobaobookEmptyState" style="display: none;">
            <div style="text-align: center; padding: 40px 20px; color: var(--text-tertiary);">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width: 64px; height: 64px; margin: 0 auto 16px; opacity: 0.4;">
                <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div style="font-size: 15px; font-weight: 500; margin-bottom: 8px;">ËøòÊ≤°ÊúâÁü•ËØÜÊù°ÁõÆ</div>
              <div style="font-size: 13px; opacity: 0.7; line-height: 1.5;">
                ÁÇπÂáª„ÄåÊñ∞Âª∫Êù°ÁõÆ„ÄçÊ∑ªÂä†‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™Áü•ËØÜÊù°ÁõÆ<br>
                AIËßíËâ≤ÂèØ‰ª•Âú®ÂØπËØù‰∏≠ÂèÇËÄÉËøô‰∫õÁü•ËØÜ
              </div>
            </div>
          </div>

        </div>

        <!-- BaoBaoBook Create Entry Drawer - Êñ∞Âª∫Êù°ÁõÆÊäΩÂ±â -->
        <div class="baobaobook-entry-drawer-overlay" id="baobaobookEntryDrawerOverlay" onclick="closeCreateBaobaobookModal()">
          <div class="baobaobook-entry-drawer-sheet" onclick="event.stopPropagation()">
            <!-- Drawer Header -->
            <div class="baobaobook-entry-drawer-header">
              <div class="baobaobook-entry-drawer-handle"></div>
              <div class="baobaobook-entry-drawer-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px; margin-right: 8px; vertical-align: middle;">
                  <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                  <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                  <path d="M2 2l7.586 7.586"/>
                  <circle cx="11" cy="11" r="2"/>
                </svg>
                <span id="baobaobookEntryDrawerTitleText">Êñ∞Âª∫Êù°ÁõÆ</span>
              </div>
              <div class="baobaobook-entry-drawer-subtitle" id="baobaobookEntryDrawerSubtitle">ËÆ∞ÂΩï‰Ω†ÁöÑÁü•ËØÜÂà∞ÁôæÂÆù‰π¶</div>
            </div>

            <!-- Form Content -->
            <div class="baobaobook-entry-drawer-form">
              <!-- Êù°ÁõÆÂêçÁß∞ -->
              <div class="baobaobook-entry-form-group">
                <label class="baobaobook-entry-label">Êù°ÁõÆÂêçÁß∞ <span class="required-mark">*</span></label>
                <input type="text" id="baobaobookEntryNameInput" class="baobaobook-entry-input" placeholder="‰æãÂ¶ÇÔºöÈ≠îÊ≥ïÁ≥ªÁªüËÆæÂÆö" maxlength="50">
              </div>

              <!-- Ëß¶ÂèëÂÖ≥ÈîÆËØç -->
              <div class="baobaobook-entry-form-group">
                <label class="baobaobook-entry-label">Ëß¶ÂèëÂÖ≥ÈîÆËØç <span class="optional-mark">(ÈÄâÂ°´)</span></label>
                <input type="text" id="baobaobookEntryKeywordsInput" class="baobaobook-entry-input" placeholder="Áî®Ëã±ÊñáÈÄóÂè∑ÂàÜÈöîÔºå‰æãÂ¶ÇÔºöÈ≠îÊ≥ï,magic,Ê≥ïÊúØ">
                <div class="baobaobook-entry-hint">Ê£ÄÊµãÂà∞Ëøô‰∫õÂÖ≥ÈîÆËØçÊó∂‰ºöÂèÇËÄÉÊ≠§Êù°ÁõÆÔºåËã•Á©∫ÂàôÈªòËÆ§‰ΩøÁî®</div>
              </div>

              <!-- ÈÄâÊã©ÂàÜÁ±ª -->
              <div class="baobaobook-entry-form-group">
                <label class="baobaobook-entry-label">ÊâÄÂ±ûÂàÜÁ±ª <span class="required-mark">*</span></label>
                <select id="baobaobookEntryCategorySelect" class="baobaobook-entry-select">
                  <option value="">ËØ∑ÈÄâÊã©ÂàÜÁ±ª</option>
                  <!-- ÂàÜÁ±ªÈÄâÈ°πÂ∞ÜÂä®ÊÄÅÂä†ËΩΩ -->
                </select>
                <div class="baobaobook-entry-hint">Â¶ÇÊûúÊ≤°ÊúâÂêàÈÄÇÁöÑÂàÜÁ±ªÔºåËØ∑ÂÖàÂú®ÂàÜÁ±ªÁÆ°ÁêÜ‰∏≠ÂàõÂª∫</div>
              </div>

              <!-- Êù°ÁõÆÂÜÖÂÆπ -->
              <div class="baobaobook-entry-form-group">
                <label class="baobaobook-entry-label">Êù°ÁõÆÂÜÖÂÆπ <span class="required-mark">*</span></label>
                <textarea id="baobaobookEntryContentTextarea" class="baobaobook-entry-textarea" placeholder="ËØ¶ÁªÜÊèèËø∞Ëøô‰∏™Áü•ËØÜÊù°ÁõÆÁöÑÂÜÖÂÆπ...&#10;&#10;ÊîØÊåÅÂ§öË°åÊñáÊú¨ÔºåÂèØ‰ª•ÂÜôÂæóÂ∞ΩÂèØËÉΩËØ¶ÁªÜ„ÄÇ" rows="8"></textarea>
                <div class="baobaobook-entry-char-count">
                  <span id="baobaobookEntryCharCount">0</span> Â≠óÁ¨¶
                </div>
              </div>
            </div>

            <!-- Bottom Actions -->
            <div class="baobaobook-entry-drawer-actions" id="baobaobookEntryDrawerActions">
              <button class="baobaobook-entry-btn-cancel" id="baobaobookEntryBtnLeft" onclick="closeCreateBaobaobookModal()">ÂèñÊ∂à</button>
              <button class="baobaobook-entry-btn-save" onclick="saveBaobaobookEntry()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M17 21v-8H7v8M7 3v5h8" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>‰øùÂ≠ò</span>
              </button>
            </div>
          </div>
        </div>

        <!-- BaoBaoBook Category Management Drawer - ÁôæÂÆù‰π¶ÂàÜÁ±ªÁÆ°ÁêÜÊäΩÂ±âÔºàÊîæÂú®app-contentÂ§ñÔºåbaobaobookScreenÂÜÖÔºâ -->
        <div class="baobaobook-category-drawer-overlay" id="baobaobookCategoryDrawerOverlay" onclick="closeBaobaobookCategoryManager()">
          <div class="baobaobook-category-drawer-sheet" onclick="event.stopPropagation()">
            <!-- Drawer Header -->
            <div class="baobaobook-category-drawer-header">
              <div class="baobaobook-category-drawer-handle"></div>
              <div class="baobaobook-category-drawer-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px; margin-right: 8px; vertical-align: middle;">
                  <path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>ÂàÜÁ±ªÁÆ°ÁêÜ</span>
              </div>
              <div class="baobaobook-category-drawer-subtitle">ÁÆ°ÁêÜ‰Ω†ÁöÑÁôæÂÆù‰π¶ÂàÜÁ±ª</div>
            </div>

            <!-- Category List -->
            <div class="baobaobook-category-drawer-list" id="baobaobookCategoryManagementList">
              <!-- ÂàÜÁ±ªÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∏≤Êüì -->
            </div>

            <!-- Add New Category Section -->
            <div class="baobaobook-category-drawer-add-section">
              <div class="baobaobook-category-drawer-add-title">ÂàõÂª∫Êñ∞ÂàÜÁ±ª</div>
              <div class="baobaobook-category-drawer-add-form">
                <input type="text" id="baobaobookNewCategoryNameInput" class="baobaobook-category-drawer-input" placeholder="ËæìÂÖ•ÂàÜÁ±ªÂêçÁß∞Ôºà1-20Â≠óÁ¨¶Ôºâ" maxlength="20">
                <button class="baobaobook-category-drawer-add-btn" onclick="event.stopPropagation(); createBaobaobookCategory()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                    <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                  <span>Ê∑ªÂä†</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phone Dialer App Screen -->
      <div class="app-screen" id="phoneScreen">
        <div class="phone-dialer-main">
          <!-- Close Button -->
          <button class="phone-theme-switch" onclick="closeApp()">
            <svg viewBox="0 0 24 24">
              <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>

          <div class="phone-main-content">
            <!-- Number Display -->
            <div class="phone-display-area">
              <div class="phone-pixel-deco"></div>
              <div class="phone-pixel-deco"></div>
              <div class="phone-pixel-deco"></div>
              <div class="phone-pixel-deco"></div>
              <div class="phone-pixel-deco"></div>
              <div class="phone-display-label">Phone</div>
              <div class="phone-display-number empty" id="phoneNumberDisplay">Enter number</div>
              <div class="phone-display-hint" id="phoneDisplayHint">tap to copy</div>
            </div>

            <!-- Dialpad -->
            <div class="phone-dialpad">
              <div class="phone-key-row">
                <button class="phone-key" onclick="pressPhoneKey('1')">
                  <span class="phone-key-num">1</span>
                  <span class="phone-key-letters"></span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('2')">
                  <span class="phone-key-num">2</span>
                  <span class="phone-key-letters">ABC</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('3')">
                  <span class="phone-key-num">3</span>
                  <span class="phone-key-letters">DEF</span>
                </button>
              </div>
              <div class="phone-key-row">
                <button class="phone-key" onclick="pressPhoneKey('4')">
                  <span class="phone-key-num">4</span>
                  <span class="phone-key-letters">GHI</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('5')">
                  <span class="phone-key-num">5</span>
                  <span class="phone-key-letters">JKL</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('6')">
                  <span class="phone-key-num">6</span>
                  <span class="phone-key-letters">MNO</span>
                </button>
              </div>
              <div class="phone-key-row">
                <button class="phone-key" onclick="pressPhoneKey('7')">
                  <span class="phone-key-num">7</span>
                  <span class="phone-key-letters">PQRS</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('8')">
                  <span class="phone-key-num">8</span>
                  <span class="phone-key-letters">TUV</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('9')">
                  <span class="phone-key-num">9</span>
                  <span class="phone-key-letters">WXYZ</span>
                </button>
              </div>
              <div class="phone-key-row">
                <button class="phone-key phone-symbol" onclick="pressPhoneKey('*')">
                  <span class="phone-key-num">*</span>
                </button>
                <button class="phone-key" onclick="pressPhoneKey('0')">
                  <span class="phone-key-num">0</span>
                  <span class="phone-key-letters">+</span>
                </button>
                <button class="phone-key phone-symbol" onclick="pressPhoneKey('#')">
                  <span class="phone-key-num">#</span>
                </button>
              </div>
            </div>

            <!-- Action Row -->
            <div class="phone-action-row">
              <button class="phone-action-btn" onclick="clearPhoneNumber()">
                <svg viewBox="0 0 24 24">
                  <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
                  <line x1="18" y1="9" x2="12" y2="15"/>
                  <line x1="12" y1="9" x2="18" y2="15"/>
                </svg>
              </button>
              <button class="phone-call-btn" onclick="makePhoneCall()">
                <svg viewBox="0 0 24 24">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
              </button>
              <button class="phone-action-btn" onclick="phoneBackspace()">
                <svg viewBox="0 0 24 24">
                  <path d="M12 19l-7-7 7-7"/>
                  <path d="M19 12H5"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- ========== Recent Calls View ========== -->
          <div class="phone-recent-content" id="phoneRecentContent" style="display: none;">
            <!-- Toolbar -->
            <div class="recent-toolbar">
              <button class="recent-toolbar-btn">ÁºñËæë</button>
              <div class="recent-filter-tabs">
                <button class="recent-filter-tab active" onclick="filterRecentCalls('all')">ÊâÄÊúâ</button>
                <button class="recent-filter-tab" onclick="filterRecentCalls('missed')">Êú™Êé•Êù•Áîµ</button>
              </div>
              <div class="recent-filter-icon">
                <svg viewBox="0 0 24 24">
                  <line x1="4" y1="6" x2="20" y2="6"/>
                  <line x1="4" y1="12" x2="20" y2="12"/>
                  <line x1="4" y1="18" x2="20" y2="18"/>
                </svg>
                <span class="recent-badge" id="recentMissedBadge" style="display: none;">0</span>
              </div>
            </div>

            <!-- Title -->
            <div class="recent-title-section">
              <div class="recent-pixel-deco"></div>
              <div class="recent-pixel-deco"></div>
              <div class="recent-pixel-deco"></div>
              <h1 class="recent-title">ÊúÄËøëÈÄöËØù</h1>
            </div>

            <!-- Search -->
            <div class="recent-search-container">
              <div class="recent-search-bar">
                <svg viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
                <input type="text" id="recentSearchInput" placeholder="ÊêúÁ¥¢" oninput="searchRecentCalls(this.value)">
                <div class="recent-voice-btn">
                  <svg viewBox="0 0 24 24">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Content -->
            <div class="recent-content-scroll">
              <!-- User Profile Card -->
              <div class="recent-promo-card" onclick="openPhoneContacts()">
                <div class="recent-promo-avatar">
                  <img id="recentPromoAvatar" class="recent-promo-avatar-img" src="https://i.postimg.cc/4xmx7V4R/mmexport1759081128356.jpg" alt="Avatar">
                </div>
                <div class="recent-promo-info">
                  <div id="recentPromoName" class="recent-promo-title">User</div>
                  <div id="recentPromoBio" class="recent-promo-subtitle">No bio</div>
                </div>
                <div class="recent-promo-arrow">
                  <svg viewBox="0 0 24 24">
                    <path d="M9 18l6-6-6-6"/>
                  </svg>
                </div>
              </div>

              <!-- Call List - Âä®ÊÄÅÁîüÊàê -->
              <div class="recent-call-list" id="recentCallList">
                <!-- Empty State -->
                <div class="recent-empty-state" id="recentEmptyState">
                  <svg viewBox="0 0 24 24">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
                  </svg>
                  <div class="recent-empty-text">ÊöÇÊó†ÈÄöËØùËÆ∞ÂΩï</div>
                  <div class="recent-empty-subtext">Êã®ÊâìÊàñÊé•Âê¨ÁîµËØùÂêé‰ºöÊòæÁ§∫Âú®ËøôÈáå</div>
                </div>
              </div>
            </div>
          </div>

          <!-- ========== Contact Detail View - ËÅîÁ≥ª‰∫∫ËØ¶ÊÉÖÈ°µÈù¢ ========== -->
          <div class="phone-contact-detail" id="phoneContactDetail" style="display: none;">
            <!-- Header -->
            <div class="contact-detail-header">
              <button class="contact-back-btn" onclick="hideContactDetail()">
                <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
              </button>
              <button class="contact-more-btn">
                <svg viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/>
                </svg>
              </button>
            </div>

            <!-- Content -->
            <div class="contact-detail-content">
              <!-- Avatar Section -->
              <div class="contact-avatar-section">
                <div class="contact-avatar-large">
                  <div class="contact-avatar-main" id="contactDetailAvatar">
                    <svg viewBox="0 0 24 24">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                </div>

                <div class="contact-detail-info">
                  <div class="contact-detail-status" id="contactDetailStatus">Êú™Áü•</div>
                  <div class="contact-detail-label" id="contactDetailLabel">Êú™Áü•Âè∑Á†Å</div>
                  <div class="contact-detail-number" id="contactDetailNumber">10086</div>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="contact-action-buttons">
                <div class="contact-action-btn" onclick="sendMessageToContact()">
                  <div class="contact-action-icon">
                    <svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                  </div>
                  <span class="contact-action-label">‰ø°ÊÅØ</span>
                </div>
                <div class="contact-action-btn" onclick="callContact()">
                  <div class="contact-action-icon">
                    <svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                  </div>
                  <span class="contact-action-label">ÂëºÂè´</span>
                </div>
                <div class="contact-action-btn">
                  <div class="contact-action-icon">
                    <svg viewBox="0 0 24 24"><rect x="2" y="5" width="14" height="14" rx="2"/><path d="M16 10l6-4v12l-6-4"/></svg>
                  </div>
                  <span class="contact-action-label">ËßÜÈ¢ë</span>
                </div>
                <div class="contact-action-btn">
                  <div class="contact-action-icon">
                    <svg viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 6l-10 7L2 6"/></svg>
                  </div>
                  <span class="contact-action-label">ÈÇÆ‰ª∂</span>
                </div>
              </div>

              <!-- Info Section -->
              <div class="contact-info-section">
                <!-- ÈÄöËØùËÆ∞ÂΩïÂç°Áâá -->
                <div class="contact-history-card">
                  <div class="contact-card-header" onclick="toggleContactHistoryCard(this)">
                    <div class="contact-card-title">
                      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                      ÈÄöËØùËÆ∞ÂΩï
                      <span class="contact-card-badge" id="contactHistoryBadge">0 Êù°</span>
                    </div>
                    <div class="contact-card-arrow">
                      <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
                    </div>
                  </div>
                  <div class="contact-card-content">
                    <div class="contact-card-content-inner" id="contactHistoryList">
                      <!-- ÈÄöËØùËÆ∞ÂΩïÂä®ÊÄÅÁîüÊàê -->
                    </div>
                  </div>
                </div>

                <!-- Êìç‰ΩúÈÄâÈ°π -->
                <div class="contact-options-card">
                  <div class="contact-option-item" onclick="createNewContact()">
                    <span>Êñ∞Âª∫ËÅîÁ≥ª‰∫∫</span>
                    <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                  </div>
                  <div class="contact-option-item" onclick="addToExistingContact()">
                    <span>Ê∑ªÂä†Âà∞Áé∞ÊúâËÅîÁ≥ª‰∫∫</span>
                    <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                  </div>
                  <div class="contact-option-item" onclick="shareContact()">
                    <span>ÂÖ±‰∫´ËÅîÁ≥ª‰∫∫</span>
                    <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                  </div>
                  <!-- üî• Âà†Èô§ËÅîÁ≥ª‰∫∫ÈÄâÈ°πÔºà‰ªÖÂΩìÂ∑≤ÊòØËÅîÁ≥ª‰∫∫Êó∂ÊòæÁ§∫Ôºâ -->
                  <div class="contact-option-item danger" id="deleteContactOption" onclick="deleteCurrentContact()" style="display: none;">
                    <span>Âà†Èô§ËÅîÁ≥ª‰∫∫</span>
                    <svg viewBox="0 0 24 24"><path d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z"/></svg>
                  </div>
                  <div class="contact-option-item danger" onclick="blockNumber()">
                    <span>Â±èËîΩÊ≠§Âè∑Á†Å</span>
                    <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                  </div>
                  <!-- üî• Âà†Èô§Ê≠§Âè∑Á†ÅÈÄâÈ°πÔºà‰ªÖÂΩìÊòØÈöèÊú∫ÈôåÁîü‰∫∫Êó∂ÊòæÁ§∫Ôºâ -->
                  <div class="contact-option-item danger" id="deleteStrangerOption" onclick="deleteStrangerNumber()" style="display: none;">
                    <span>Âà†Èô§Ê≠§Âè∑Á†Å</span>
                    <svg viewBox="0 0 24 24"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ========== SMS Detail Screen - Áü≠‰ø°ËØ¶ÊÉÖÈ°µ ========== -->
          <div class="sms-detail-screen" id="smsDetailScreen">
            <!-- Header -->
            <div class="sms-header">
              <button class="sms-back-btn" onclick="closeSmsDetail()">
                <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
                Messages
              </button>
              <div class="sms-contact-info">
                <div class="sms-contact-name" id="smsContactName">ËÅîÁ≥ª‰∫∫</div>
                <div class="sms-contact-status" id="smsContactStatus">iMessage</div>
              </div>
              <button class="sms-edit-btn" id="smsEditBtn" onclick="toggleSmsEditMode()">Edit</button>
            </div>

            <!-- Action Bar -->
            <div class="sms-action-bar">
              <div class="sms-action-item" onclick="smsCallContact()">Call</div>
              <div class="sms-action-item" onclick="smsFaceTimeContact()">FaceTime</div>
              <div class="sms-action-item" onclick="smsViewContact()">Contact</div>
            </div>

            <!-- Messages Area -->
            <div class="sms-messages" id="smsMessagesArea">
              <!-- Empty State -->
              <div class="sms-empty-state" id="smsEmptyState">
                <svg viewBox="0 0 24 24">
                  <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                  <path d="M9 10h6M9 14h3"/>
                </svg>
                <div class="sms-empty-text">No messages yet</div>
                <div class="sms-empty-subtext">Start a conversation</div>
              </div>

              <!-- Messages will be dynamically generated here -->

              <!-- Typing Indicator -->
              <div class="sms-typing" id="smsTypingIndicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
              </div>
            </div>

            <!-- Input Area -->
            <div class="sms-input-area">
              <button class="sms-camera-btn" onclick="smsRegenerateAIResponse()">
                <svg viewBox="0 0 24 24">
                  <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2v11z"/>
                  <circle cx="12" cy="13" r="4"/>
                </svg>
              </button>
              <div class="sms-input-wrapper">
                <input type="text" class="sms-input" id="smsInput" placeholder="Text Message" onkeydown="handleSmsKeyPress(event)">
              </div>
              <button class="sms-send-btn" onclick="sendSmsToAI()">Send</button>
            </div>

            <!-- üî• ÁºñËæëÊ®°ÂºèÂ∑•ÂÖ∑Ê†è -->
            <div class="sms-edit-toolbar" id="smsEditToolbar" style="display: none;">
              <button class="sms-edit-tool-btn" id="smsSelectAllBtn" onclick="smsSelectAll()">
                <svg viewBox="0 0 24 24">
                  <path d="M9 11l3 3L22 4"/>
                  <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
                </svg>
                <span>ÂÖ®ÈÄâ</span>
              </button>
              <div class="sms-edit-toolbar-spacer"></div>
              <button class="sms-edit-tool-btn danger" id="smsDeleteBtn" onclick="smsDeleteSelected()" disabled>
                <svg viewBox="0 0 24 24">
                  <path d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z"/>
                </svg>
                <span id="smsDeleteBtnText">Âà†Èô§</span>
              </button>
            </div>
          </div>

          <!-- User Profile Selector for Call -->
          <div class="phone-profile-selector-overlay" id="phoneProfileSelectorOverlay" onclick="closePhoneProfileSelector()">
            <div class="phone-profile-selector-sheet" onclick="event.stopPropagation()">
              <div class="phone-profile-selector-header">
                <div class="phone-profile-selector-handle"></div>
                <div class="phone-profile-selector-title">Select Caller ID</div>
                <div class="phone-profile-selector-subtitle">Choose your phone number</div>
              </div>
              <div class="phone-profile-selector-list" id="phoneProfileSelectorList">
                <!-- User profiles will be loaded here -->
              </div>
            </div>
          </div>

          <!-- New Contact Sheet - Êñ∞Âª∫ËÅîÁ≥ª‰∫∫Â∫ïÈÉ®ÊäΩÂ±â -->
          <div class="new-contact-sheet-overlay" id="newContactSheetOverlay" onclick="closeNewContactModal()">
            <div class="new-contact-sheet" onclick="event.stopPropagation()">
              <div class="new-contact-sheet-header">
                <div class="new-contact-sheet-handle"></div>
                <div class="new-contact-sheet-title">Êñ∞Âª∫ËÅîÁ≥ª‰∫∫</div>
                <div class="new-contact-sheet-subtitle">ADD TO CONTACTS</div>
              </div>

              <div class="new-contact-sheet-content">
                <!-- Avatar Section -->
                <div class="new-contact-avatar-section">
                  <div class="new-contact-avatar" id="newContactAvatarPreview" onclick="triggerNewContactAvatarUpload()">
                    <svg viewBox="0 0 24 24">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div class="new-contact-avatar-hint">ÁÇπÂáªÊõ¥Êç¢Â§¥ÂÉè</div>
                  <input type="file" id="newContactAvatarInput" accept="image/*" style="display: none;" onchange="handleNewContactAvatarUpload(event)">
                </div>

                <!-- Phone Number (readonly) -->
                <div class="new-contact-input-group">
                  <label class="new-contact-label">ÁîµËØùÂè∑Á†Å</label>
                  <input type="text" class="new-contact-input readonly" id="newContactPhone" readonly>
                </div>

                <!-- Nickname -->
                <div class="new-contact-input-group">
                  <label class="new-contact-label">Â§áÊ≥®ÂêçÁß∞</label>
                  <input type="text" class="new-contact-input" id="newContactNickname" placeholder="ÁªôËÅîÁ≥ª‰∫∫Ëµ∑‰∏™ÂêçÂ≠ó...">
                </div>

                <!-- Real Name (for strangers, readonly) -->
                <div class="new-contact-input-group" id="newContactRealNameGroup" style="display: none;">
                  <label class="new-contact-label">ÁúüÂÆûÂßìÂêç <span style="opacity: 0.5; font-size: 10px;">(AIÁîüÊàê)</span></label>
                  <input type="text" class="new-contact-input readonly" id="newContactRealName" readonly>
                </div>

                <!-- Character Info (for existing characters) -->
                <div class="new-contact-character-info" id="newContactCharacterInfo" style="display: none;">
                  <div class="new-contact-persona-title">
                    <svg viewBox="0 0 24 24" style="width: 14px; height: 14px;">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    ÂÖ≥ËÅîËßíËâ≤
                  </div>
                  <div class="new-contact-character-name" id="newContactCharacterName"></div>
                  <div class="new-contact-persona-note">
                    ‚Ä† Â§¥ÂÉèÈªòËÆ§ÂêåÊ≠•ËßíËâ≤ËµÑÊñôÔºåÊÇ®ÂèØ‰ª•ÁÇπÂáª‰∏äÊñπÂ§¥ÂÉèÊõ¥Êç¢‰∏∫Ëá™ÂÆö‰πâÂ§¥ÂÉè
                  </div>
                </div>
              </div>

              <div class="new-contact-sheet-actions">
                <div class="new-contact-sheet-btn cancel" onclick="closeNewContactModal()">ÂèñÊ∂à</div>
                <div class="new-contact-sheet-btn primary" onclick="saveNewContact()">‰øùÂ≠ò</div>
              </div>
            </div>
          </div>

          <!-- ========== Contacts View ========== -->
          <div class="phone-contacts-content" id="phoneContactsContent" style="display: none;">
            <!-- Header -->
            <div class="contacts-header">
              <button class="contacts-header-btn" onclick="switchPhoneTab('keypad')">
                <svg viewBox="0 0 24 24">
                  <path d="M15 18l-6-6 6-6"/>
                </svg>
              </button>
              <div class="contacts-title">ËÅîÁ≥ª‰∫∫</div>
              <button class="contacts-header-btn" onclick="showNewContactModal()">
                <svg viewBox="0 0 24 24">
                  <path d="M12 5v14M5 12h14"/>
                </svg>
              </button>
            </div>

            <!-- Search Bar -->
            <div class="contacts-search-section">
              <div class="contacts-search-bar">
                <svg class="contacts-search-icon" viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
                <input type="text" class="contacts-search-input" id="contactsSearchInput" placeholder="ÊêúÁ¥¢" oninput="filterContacts(this.value)">
                <button class="contacts-search-voice">
                  <svg viewBox="0 0 24 24">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                    <line x1="8" y1="23" x2="16" y2="23"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- My Card -->
            <div class="contacts-mycard" onclick="showMyCardDetail()">
              <div class="contacts-mycard-avatar" id="contactsMyCardAvatar">
                <svg viewBox="0 0 24 24">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </div>
              <div class="contacts-mycard-info">
                <div class="contacts-mycard-name" id="contactsMyCardName">Áî®Êà∑</div>
                <div class="contacts-mycard-label">ÊàëÁöÑÂêçÁâá</div>
              </div>
              <svg class="contacts-mycard-arrow" viewBox="0 0 24 24">
                <path d="M9 18l6-6-6-6"/>
              </svg>
            </div>

            <!-- Contact List Container -->
            <div class="contacts-list-container">
              <!-- Contact List -->
              <div class="contacts-list" id="contactsList">
                <!-- Groups will be dynamically generated by JS -->
              </div>

              <!-- Alphabet Index -->
              <div class="contacts-alphabet-index" id="contactsAlphabetIndex">
                <div class="contacts-index-letter" data-letter="A">A</div>
                <div class="contacts-index-letter" data-letter="B">B</div>
                <div class="contacts-index-letter" data-letter="C">C</div>
                <div class="contacts-index-letter" data-letter="D">D</div>
                <div class="contacts-index-letter" data-letter="E">E</div>
                <div class="contacts-index-letter" data-letter="F">F</div>
                <div class="contacts-index-letter" data-letter="G">G</div>
                <div class="contacts-index-letter" data-letter="H">H</div>
                <div class="contacts-index-letter" data-letter="I">I</div>
                <div class="contacts-index-letter" data-letter="J">J</div>
                <div class="contacts-index-letter" data-letter="K">K</div>
                <div class="contacts-index-letter" data-letter="L">L</div>
                <div class="contacts-index-letter" data-letter="M">M</div>
                <div class="contacts-index-letter" data-letter="N">N</div>
                <div class="contacts-index-letter" data-letter="O">O</div>
                <div class="contacts-index-letter" data-letter="P">P</div>
                <div class="contacts-index-letter" data-letter="Q">Q</div>
                <div class="contacts-index-letter" data-letter="R">R</div>
                <div class="contacts-index-letter" data-letter="S">S</div>
                <div class="contacts-index-letter" data-letter="T">T</div>
                <div class="contacts-index-letter" data-letter="U">U</div>
                <div class="contacts-index-letter" data-letter="V">V</div>
                <div class="contacts-index-letter" data-letter="W">W</div>
                <div class="contacts-index-letter" data-letter="X">X</div>
                <div class="contacts-index-letter" data-letter="Y">Y</div>
                <div class="contacts-index-letter" data-letter="Z">Z</div>
                <div class="contacts-index-letter" data-letter="#">#</div>
              </div>
            </div>

            <!-- Letter Indicator -->
            <div class="contacts-letter-indicator" id="contactsLetterIndicator">A</div>
          </div>

          <!-- Bottom Nav -->
          <nav class="phone-bottom-nav">
            <div class="phone-nav-item" onclick="switchPhoneTab('recent')">
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              <span>Recent</span>
            </div>
            <div class="phone-nav-item" onclick="switchPhoneTab('contacts')">
              <svg viewBox="0 0 24 24">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <span>Contacts</span>
            </div>
            <div class="phone-nav-item active" onclick="switchPhoneTab('keypad')">
              <svg viewBox="0 0 24 24">
                <rect x="3" y="3" width="7" height="7" rx="1"/>
                <rect x="14" y="3" width="7" height="7" rx="1"/>
                <rect x="3" y="14" width="7" height="7" rx="1"/>
                <rect x="14" y="14" width="7" height="7" rx="1"/>
              </svg>
              <span>Keypad</span>
            </div>
            <div class="phone-nav-item" onclick="openImessage()">
              <svg viewBox="0 0 24 24">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span>Message</span>
            </div>
          </nav>
        </div>
      </div>

      <!-- Call Screen Container - ÈÄöËØùÁïåÈù¢ÔºàÂú®phone-containerÂÜÖ‰ΩÜphoneScreenÂ§ñÔºâ -->
      <div class="phone-call-screen hidden" id="phoneCallScreen">
        <div class="call-screen-deco">
          <div class="call-deco-dot"></div>
          <div class="call-deco-dot"></div>
          <div class="call-deco-dot"></div>
          <div class="call-deco-dot"></div>
        </div>

        <div class="call-content">
          <!-- Â§¥ÂÉèÂåÖË£ÖÂô®ÔºöÂèëË®ÄÊ°Ü+Â§¥ÂÉè -->
          <div class="call-avatar-wrapper">
            <!-- ÂØπÊñπÂèëË®ÄÊ°Ü - Âú®Â§¥ÂÉèÊ≠£‰∏äÊñπ -->
            <div class="call-speech-bubble hidden" id="callSpeechBubble" onclick="nextCallSpeech()">
              <div class="call-speech-text" id="callSpeechText">‰Ω†Â•ΩÂëÄ~</div>
              <div class="call-speech-indicator" id="callSpeechIndicator">1/3</div>
            </div>

            <div class="call-avatar-orbit">
              <div class="call-orbit-ring"></div>
              <div class="call-avatar-circle" id="callAvatarCircle">
                <!-- ÈªòËÆ§SVGÂõæÊ†á -->
                <svg viewBox="0 0 24 24" id="callAvatarDefaultIcon">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
                <!-- ËßíËâ≤Â§¥ÂÉè -->
                <img id="callAvatarImage" class="call-avatar-img" src="" alt="Avatar" style="display: none;" onerror="this.style.display='none'; document.getElementById('callAvatarDefaultIcon').style.display='block';">
              </div>
            </div>
          </div>

          <div class="call-name" id="callName">ÁéãÈπ§Êïè</div>
          <div class="call-status" id="callStatus">Calling</div>
          <div class="call-timer hidden" id="callTimer">00:00</div>
        </div>

        <!-- Áî®Êà∑ÂõûÂ§çÂå∫Âüü - Âú®ËÆ°Êó∂Âô®ÂíåÊìç‰ΩúÊåâÈíÆ‰πãÈó¥ -->
        <div class="call-user-replies hidden" id="callUserReplies">
          <!-- ÂõûÂ§ç‰ºöÂä®ÊÄÅÊ∑ªÂä† -->
        </div>

        <!-- ËæìÂÖ•Ê°Ü -->
        <div class="call-reply-input-container hidden" id="callReplyInputContainer">
          <input type="text" class="call-reply-input" id="callReplyInput" placeholder="Type your message...">
          <button class="call-reply-send-btn" onclick="sendCallReply()">
            <svg viewBox="0 0 24 24">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
          </button>
        </div>

        <div class="call-actions">
          <div class="call-btn-grid" id="callBtnGrid">
            <!-- ÊåâÈíÆ‰ºöÊ†πÊçÆÁä∂ÊÄÅÂä®ÊÄÅÁîüÊàê -->
          </div>
        </div>
      </div>

      <!-- iMessage App Screen -->
      <div class="imessage-screen" id="imessageScreen">
        <!-- Navigation Bar -->
        <div class="imessage-nav-bar">
          <div class="imessage-nav-left" onclick="closeImessage()">Back</div>
          <div class="imessage-nav-title">Messages</div>
          <div class="imessage-nav-right" id="imessageEditBtn" onclick="toggleImessageEditMode()">
            <svg viewBox="0 0 24 24">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <path d="M12 8v8M8 12h8"/>
            </svg>
          </div>
        </div>

        <!-- Search Bar -->
        <div class="imessage-search-bar">
          <div class="imessage-search-icon">
            <svg viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
          </div>
          <input type="text" class="imessage-search-input" placeholder="Search" id="imessageSearchInput">
          <div class="imessage-mic-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <path d="M12 19v4M8 23h8"/>
            </svg>
          </div>
        </div>

        <!-- Scrollable Content -->
        <div class="imessage-content">
          <!-- Pinned Contacts - JSÂä®ÊÄÅÁîüÊàê -->
          <div class="imessage-pinned-section" id="imessagePinnedSection">
            <div class="imessage-pinned-grid" id="imessagePinnedGrid">
              <!-- Áî±JSÂä®ÊÄÅÁîüÊàê -->
            </div>
          </div>

          <!-- Messages List - JSÂä®ÊÄÅÁîüÊàê -->
          <div class="imessage-list" id="imessageList">
            <!-- Áî±JSÂä®ÊÄÅÁîüÊàê -->
          </div>
        </div>
      </div>

      <!-- Character Selector Modal for Chat -->
      <div class="irregular-modal" id="characterSelectorModal" style="max-width: 90%; max-height: 80vh; overflow-y: auto;">
        <div class="modal-title">Select Character</div>
        <div class="modal-subtitle" style="font-size: 13px; color: var(--text-secondary); margin-top: 4px; margin-bottom: 16px;">Choose a character to start chatting</div>
        <div class="modal-content">
          <div class="character-grid-selector" id="characterGridSelector">
            <!-- Characters will be loaded here -->
            <div class="character-selector-empty">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width: 48px; height: 48px; opacity: 0.3;">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                <circle cx="12" cy="7" r="4" />
              </svg>
              <div style="margin-top: 12px; font-size: 14px; color: var(--text-tertiary);">No characters yet</div>
              <div style="margin-top: 4px; font-size: 12px; color: var(--text-tertiary);">Create characters in the Characters app first</div>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <div class="modal-btn" onclick="closeCharacterSelector()">Cancel</div>
        </div>
      </div>

      <!-- Icon Management Modal -->
      <div class="wallpaper-modal icon-management-modal" id="iconManagementModal">
        <div class="wallpaper-container icon-management-container">
          <!-- Ë£ÖÈ•∞ÊÄßÂÉèÁ¥†ÂÖÉÁ¥† -->
          <div class="wallpaper-deco-pixels">
            <div class="deco-pixel-dot" style="top: 10%; left: 6%;"></div>
            <div class="deco-pixel-dot" style="top: 15%; right: 8%;"></div>
            <div class="deco-pixel-dot" style="bottom: 20%; left: 10%;"></div>
            <div class="deco-star-small" style="top: 25%; right: 15%;"></div>
            <div class="deco-star-small" style="bottom: 30%; right: 6%;"></div>
          </div>

          <!-- Header -->
          <div class="wallpaper-header icon-management-header">
            <div class="wallpaper-title-area">
              <svg class="wallpaper-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="14" width="7" height="7" rx="1" />
                <rect x="3" y="14" width="7" height="7" rx="1" />
              </svg>
              <div>
                <div class="wallpaper-title">Â∫îÁî®ÂõæÊ†áÁÆ°ÁêÜ</div>
                <div class="wallpaper-subtitle">[ icon_customization ]</div>
              </div>
            </div>
            <div class="wallpaper-close icon-management-close" onclick="closeIconManagementModal()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- ‰∏ªÂ±èÂõæÊ†áÂå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <rect x="3" y="3" width="18" height="18" rx="2" />
                <path d="M9 3v18M3 9h18M3 15h18M15 3v18" stroke-linecap="round" />
              </svg>
              <span>‰∏ªÂ±èÂõæÊ†á</span>
            </div>

          <!-- Icon Grid -->
          <div class="icon-mgmt-grid">

            <!-- Settings Icon -->
            <div class="icon-mgmt-card" data-app="settings">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-settings">
                  <svg viewBox="0 0 24 24">
                    <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">Settings</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-settings" accept="image/*" style="display: none;" onchange="handleIconFileUpload('settings', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-settings').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-settings" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('settings')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('settings')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- API Icon -->
            <div class="icon-mgmt-card" data-app="api">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-api">
                  <svg viewBox="0 0 24 24">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">API</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-api" accept="image/*" style="display: none;" onchange="handleIconFileUpload('api', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-api').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-api" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('api')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('api')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Characters Icon -->
            <div class="icon-mgmt-card" data-app="characters">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-characters">
                  <svg viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r=".5" fill="currentColor" />
                    <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">ËßíËâ≤</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-characters" accept="image/*" style="display: none;" onchange="handleIconFileUpload('characters', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-characters').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-characters" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('characters')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('characters')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Chat Icon -->
            <div class="icon-mgmt-card" data-app="chat">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-chat">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">ËÅäÂ§©</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-chat" accept="image/*" style="display: none;" onchange="handleIconFileUpload('chat', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-chat').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-chat" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('chat')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('chat')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- X Icon -->
            <div class="icon-mgmt-card" data-app="x">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-x">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">X</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-x" accept="image/*" style="display: none;" onchange="handleIconFileUpload('x', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-x').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-x" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('x')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('x')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Appearance Icon -->
            <div class="icon-mgmt-card" data-app="appearance">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-appearance">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">Â§ñËßÇ</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-appearance" accept="image/*" style="display: none;" onchange="handleIconFileUpload('appearance', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-appearance').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-appearance" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('appearance')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('appearance')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- BaoBaoBook Icon - ÁôæÂÆù‰π¶ -->
            <div class="icon-mgmt-card" data-app="baobaobook">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon" id="preview-baobaobook">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">ÁôæÂÆù‰π¶</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-baobaobook" accept="image/*" style="display: none;" onchange="handleIconFileUpload('baobaobook', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-baobaobook').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-baobaobook" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('baobaobook')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('baobaobook')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

          </div>
          </div>

          <!-- Dock ÂõæÊ†áÂå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <rect x="3" y="18" width="18" height="4" rx="2" />
                <circle cx="7" cy="20" r="1" />
                <circle cx="12" cy="20" r="1" />
                <circle cx="17" cy="20" r="1" />
              </svg>
              <span>Dock ÂõæÊ†á</span>
            </div>

          <div class="icon-mgmt-grid">

            <!-- Phone Icon (Dock) -->
            <div class="icon-mgmt-card" data-app="phone">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon dock-icon-preview" id="preview-phone">
                  <svg viewBox="0 0 24 24">
                    <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">ÁîµËØù (Dock)</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-phone" accept="image/*" style="display: none;" onchange="handleIconFileUpload('phone', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-phone').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-phone" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('phone')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('phone')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 919-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Camera Icon (Dock) -->
            <div class="icon-mgmt-card" data-app="camera">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon dock-icon-preview" id="preview-camera">
                  <svg viewBox="0 0 24 24">
                    <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2v11z" />
                    <circle cx="12" cy="13" r="4" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">Áõ∏Êú∫ (Dock)</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-camera" accept="image/*" style="display: none;" onchange="handleIconFileUpload('camera', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-camera').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-camera" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('camera')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('camera')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Browser Icon (Dock) -->
            <div class="icon-mgmt-card" data-app="browser">
              <div class="icon-mgmt-preview">
                <div class="icon-mgmt-preview-icon dock-icon-preview" id="preview-browser">
                  <svg viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
              <div class="icon-mgmt-name">ÊµèËßàÂô® (Dock)</div>
              <div class="icon-mgmt-controls">
                <input type="file" id="file-browser" accept="image/*" style="display: none;" onchange="handleIconFileUpload('browser', this)">
                <button class="icon-mgmt-btn upload" onclick="document.getElementById('file-browser').click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="text" class="icon-mgmt-url-input" id="url-browser" placeholder="ÊàñËæìÂÖ•URL">
                <button class="icon-mgmt-btn apply" onclick="applyIconFromUrl('browser')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <button class="icon-mgmt-btn restore" onclick="restoreDefaultIcon('browser')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 3v5h-5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>

          </div>

          </div>
          </div>

        </div>
      </div>

      <!-- Modal Overlay -->
      <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>

      <!-- Irregular Modal -->
      <div class="irregular-modal" id="irregularModal">
        <div class="modal-title">Ê¨¢Ëøé‰ΩøÁî®ÊâãÊú∫Ê®°ÊãüÂô®</div>
        <div class="modal-content">
          ËøôÊòØ‰∏Ä‰∏™ÊûÅÁÆÄ‰∏ª‰πâÈ£éÊ†ºÁöÑÁßªÂä®Á´ØÊ®°ÊãüÂô®ÔºåÈááÁî®Ê∏ÖÁàΩÁöÑËÆæËÆ°„ÄÅÊµÅÁïÖÁöÑÂä®ÁîªÂíå‰∏ìÊ≥®‰∫éÁî®Êà∑‰ΩìÈ™åÁöÑ‰∫§‰∫í„ÄÇ
        </div>
        <div class="modal-actions">
          <div class="modal-btn" onclick="closeModal()">ÂèñÊ∂à</div>
          <div class="modal-btn primary" onclick="closeModal()">Áü•ÈÅì‰∫Ü</div>
        </div>
      </div>

      <!-- User Profile Edit Modal -->
      <div class="irregular-modal" id="userProfileEditModal" style="width: 66.67%; max-width: 400px; max-height: 85vh;">
        <div class="modal-title">ÁºñËæëËµÑÊñô</div>
        <div class="modal-content profile-edit-modal-content">

          <!-- Avatar Upload -->
          <div class="settings-input-group">
            <label class="settings-label">Â§¥ÂÉè</label>
            <div class="profile-upload-area" id="avatarUploadArea" onclick="document.getElementById('avatarFileInput').click()">
              <div class="profile-upload-overlay">Êõ¥Êç¢Â§¥ÂÉè</div>
              <div id="avatarPreviewContent">
                <svg viewBox="0 0 24 24" style="width: 40px; height: 40px; stroke: var(--text-tertiary); margin-bottom: 8px;">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
                <div style="font-size: 12px; color: var(--text-tertiary);">ÁÇπÂáª‰∏ä‰º†Â§¥ÂÉè</div>
              </div>
            </div>
            <input type="file" id="avatarFileInput" accept="image/*" style="display: none;" onchange="handleUserProfileAvatarUpload(event)">
          </div>

          <!-- Background Image Upload -->
          <div class="settings-input-group">
            <label class="settings-label">ÂêçÁâáËÉåÊôØ</label>
            <div class="profile-upload-area" id="bgUploadArea" onclick="document.getElementById('bgFileInput').click()">
              <div class="profile-upload-overlay">Êõ¥Êç¢ËÉåÊôØ</div>
              <div id="bgPreviewContent">
                <svg viewBox="0 0 24 24" style="width: 40px; height: 40px; stroke: var(--text-tertiary); margin-bottom: 8px;">
                  <rect x="3" y="3" width="18" height="18" rx="2" stroke-linecap="round"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <path d="M21 15l-5-5L5 21" stroke-linecap="round"/>
                </svg>
                <div style="font-size: 12px; color: var(--text-tertiary);">ÁÇπÂáª‰∏ä‰º†ËÉåÊôØÂõæ</div>
              </div>
            </div>
            <input type="file" id="bgFileInput" accept="image/*" style="display: none;" onchange="handleBgUpload(event)">
          </div>

          <!-- Name -->
          <div class="settings-input-group">
            <label class="settings-label">ÊòæÁ§∫ÂêçÁß∞</label>
            <input type="text" class="settings-input" id="editProfileName" placeholder="‰Ω†ÁöÑÂêçÂ≠ó">
          </div>

          <!-- Username -->
          <div class="settings-input-group">
            <label class="settings-label">Áî®Êà∑Âêç</label>
            <input type="text" class="settings-input" id="editProfileUsername" placeholder="@Áî®Êà∑Âêç">
          </div>

          <!-- Pronouns -->
          <div class="settings-input-group">
            <label class="settings-label">‰ª£Áß∞</label>
            <input type="text" class="settings-input" id="editProfilePronouns" placeholder="‰ªñ / Â•π / TA">
          </div>

          <!-- Phone Number -->
          <div class="settings-input-group">
            <label class="settings-label">ÊâãÊú∫Âè∑</label>
            <input type="text" class="settings-input" id="editProfilePhone" placeholder="11‰ΩçÊâãÊú∫Âè∑" maxlength="11" pattern="[0-9]*" inputmode="numeric">
          </div>

          <!-- Bio -->
          <div class="settings-input-group">
            <label class="settings-label">ÁÆÄ‰ªã</label>
            <textarea class="settings-textarea" id="editProfileBio" placeholder="ÁÆÄÁü≠ÁöÑËá™Êàë‰ªãÁªç..." style="min-height: 60px;"></textarea>
          </div>

          <!-- Mood -->
          <div class="settings-input-group">
            <label class="settings-label">ÂøÉÊÉÖ</label>
            <input type="text" class="settings-input" id="editProfileMood" placeholder="67% / ÂºÄÂøÉ / Áñ≤ÊÉ´">
          </div>

          <!-- Timezone -->
          <div class="settings-input-group">
            <label class="settings-label">Êó∂Âå∫</label>
            <input type="text" class="settings-input" id="editProfileTimezone" placeholder="UTC / EST / PST">
          </div>

          <!-- About Me -->
          <div class="settings-input-group">
            <label class="settings-label">ÂÖ≥‰∫éÊàë</label>
            <textarea class="settings-textarea" id="editProfileAboutMe" placeholder="ËØ¶ÁªÜÁöÑËá™ÊàëÊèèËø∞..." style="min-height: 100px;"></textarea>
          </div>

          <!-- Tags Yes -->
          <div class="settings-input-group">
            <label class="settings-label">ÂÖ¥Ë∂£Áà±Â•Ω (Yes!)</label>
            <div class="profile-tags-editor" id="tagsYesEditor"></div>
            <div class="profile-tag-add-btn" onclick="addTagYes()">
              <span>+</span>
              <span>Ê∑ªÂä†Ê†áÁ≠æ</span>
            </div>
          </div>

          <!-- Tags No -->
          <div class="settings-input-group">
            <label class="settings-label">‰∏çÂñúÊ¨¢ÁöÑ (No!)</label>
            <div class="profile-tags-editor" id="tagsNoEditor"></div>
            <div class="profile-tag-add-btn" onclick="addTagNo()">
              <span>+</span>
              <span>Ê∑ªÂä†Ê†áÁ≠æ</span>
            </div>
          </div>

          <!-- Custom Lists -->
          <div class="settings-input-group">
            <label class="settings-label">Ëá™ÂÆö‰πâÂàóË°®</label>
            <div id="customListsEditor">
              <!-- Lists will be dynamically added -->
            </div>
            <button class="settings-btn" onclick="addCustomList()" style="margin-top: 8px; width: 100%;">
              + Ê∑ªÂä†Êñ∞ÂàóË°®
            </button>
          </div>

        </div>
        <div class="modal-actions">
          <div class="modal-btn" onclick="closeUserProfileEditModal()">ÂèñÊ∂à</div>
          <div class="modal-btn primary" onclick="saveUserProfile()">‰øùÂ≠ò</div>
        </div>
      </div>

      <!-- Profile Management Modal - Â§öË¥¶Âè∑ÁÆ°ÁêÜ -->
      <div class="irregular-modal" id="profileManagementModal" style="width: 66.67%; max-width: 400px; max-height: 85vh;">
        <div class="modal-title">Áî®Êà∑ËµÑÊñôÁÆ°ÁêÜ</div>
        <div class="modal-subtitle" style="font-size: 13px; color: var(--text-secondary); margin-top: 4px; margin-bottom: 16px;">
          ÁÆ°ÁêÜÂ§ö‰∏™Áî®Êà∑ËµÑÊñôÔºåÁî®‰∫é‰∏é‰∏çÂêå‰∏ñÁïåËßÇÁöÑËßíËâ≤ËÅäÂ§©
        </div>
        <div class="modal-content profile-edit-modal-content">

          <!-- New Profile Button -->
          <div class="profile-mgmt-new-btn" onclick="createNewProfile()">
            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 2;">
              <circle cx="12" cy="12" r="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 8v8M8 12h8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>ÂàõÂª∫Êñ∞ËµÑÊñô</span>
          </div>

          <!-- Profile List -->
          <div id="profileList" style="display: flex; flex-direction: column; gap: 12px; margin-top: 16px;">
            <!-- Profiles will be dynamically loaded here -->
          </div>

        </div>
        <div class="modal-actions">
          <div class="modal-btn" onclick="closeProfileManagementModal()">ÂÖ≥Èó≠</div>
        </div>
      </div>

      <!-- Knowledge Modal -->
      <div class="irregular-modal" id="knowledgeModal" style="max-width: 400px;">
        <div class="modal-title" id="knowledgeModalTitle">Ê∑ªÂä†Áü•ËØÜÊù°ÁõÆ</div>
        <div class="modal-content">
          <form id="knowledgeForm" onsubmit="event.preventDefault(); saveKnowledge();">
            <input type="hidden" id="knowledgeId" />
            <div class="settings-input-group">
              <label class="settings-label">Êù°ÁõÆÂêçÁß∞</label>
              <input type="text" class="settings-input" id="knowledgeName" placeholder="‰æãÂ¶ÇÔºö‰∏ú‰∫¨„ÄÅÁ≤æÁÅµÊóè„ÄÅÈ≠îÊ≥ïËßÑÂàô..." required />
            </div>
            <div class="settings-input-group">
              <label class="settings-label">ÂàÜÁ±ª</label>
              <select class="settings-select" id="knowledgeCategory">
                <option value="location">Âú∞ÁÇπ</option>
                <option value="race">ÁßçÊóè</option>
                <option value="important">ÈáçË¶Å‰ø°ÊÅØ</option>
                <option value="character">ËßíËâ≤</option>
                <option value="item">Áâ©ÂìÅ</option>
                <option value="event">‰∫ã‰ª∂</option>
                <option value="custom">Ëá™ÂÆö‰πâ</option>
              </select>
            </div>
            <div class="settings-input-group">
              <label class="settings-label">ËØ¶ÁªÜÂÜÖÂÆπ</label>
              <textarea class="settings-textarea" id="knowledgeContent" placeholder="ÊèèËø∞ËØ•Áü•ËØÜÊù°ÁõÆÁöÑËØ¶ÁªÜ‰ø°ÊÅØ..." style="min-height: 100px;"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-actions">
          <div class="modal-btn" onclick="closeKnowledgeModal()">ÂèñÊ∂à</div>
          <div class="modal-btn primary" onclick="saveKnowledge()">‰øùÂ≠ò</div>
        </div>
      </div>

      <!-- Preset Manager Modal -->
      <div class="irregular-modal" id="presetManagerModal" style="max-width: 360px;">
        <div class="modal-title">ÁÆ°ÁêÜÈ¢ÑËÆæ</div>
        <div class="modal-content">
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="settings-btn primary" onclick="saveAsNewPreset()" style="width: 100%;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                <path d="M17 21v-8H7v8M7 3v5h8" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
              </svg>
              ‰øùÂ≠òÂΩìÂâç‰∏∫Êñ∞È¢ÑËÆæ
            </button>
            <button class="settings-btn" onclick="deleteSelectedPreset()" style="width: 100%;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke-linecap="round" stroke="currentColor" fill="none" stroke-width="2" />
              </svg>
              Âà†Èô§ÈÄâ‰∏≠ÁöÑÈ¢ÑËÆæ
            </button>
          </div>
          <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
            <div style="font-size: 12px; color: var(--text-tertiary); line-height: 1.6;">
              ‚Ä¢ ‰øùÂ≠òÈ¢ÑËÆæ‰ºöÂåÖÂê´ÂΩìÂâçÁöÑ‰∏ñÁïåËßÇËÆæÂÆöÂíåÊâÄÊúâÁü•ËØÜÂ∫ìÊù°ÁõÆ<br/>
              ‚Ä¢ Âä†ËΩΩÈ¢ÑËÆæ‰ºöÊõøÊç¢ÂΩìÂâçÁöÑËÆæÁΩÆ
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <div class="modal-btn primary" onclick="closePresetManagerModal()">ÂÖ≥Èó≠</div>
        </div>
      </div>

      <!-- API Preset Manager Modal -->
      <div class="irregular-modal" id="apiPresetManagerModal" style="max-width: 360px;">
        <div class="modal-title">ÁÆ°ÁêÜAPIÈ¢ÑËÆæ</div>
        <div class="modal-content">
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="settings-btn primary" onclick="saveAsNewAPIPreset()" style="width: 100%;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                <path d="M17 21v-8H7v8M7 3v5h8" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
              </svg>
              ‰øùÂ≠òÂΩìÂâç‰∏∫Êñ∞È¢ÑËÆæ
            </button>
            <button class="settings-btn" onclick="deleteSelectedAPIPreset()" style="width: 100%;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke-linecap="round" stroke="currentColor" fill="none" stroke-width="2" />
              </svg>
              Âà†Èô§ÈÄâ‰∏≠ÁöÑÈ¢ÑËÆæ
            </button>
          </div>
          <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
            <div style="font-size: 12px; color: var(--text-tertiary); line-height: 1.6;">
              ‚Ä¢ ‰øùÂ≠òÈ¢ÑËÆæ‰ºöÂåÖÂê´ÂΩìÂâçÁöÑAPIÈÖçÁΩÆÔºàÂú∞ÂùÄ„ÄÅÂØÜÈí•„ÄÅÊ®°ÂûãÔºâ<br/>
              ‚Ä¢ Âä†ËΩΩÈ¢ÑËÆæ‰ºöÊõøÊç¢ÂΩìÂâçÁöÑÈÖçÁΩÆ
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <div class="modal-btn primary" onclick="closeAPIPresetManagerModal()">ÂÖ≥Èó≠</div>
        </div>
      </div>

      <!-- Wallpaper Management Modal - Â£ÅÁ∫∏ÁÆ°ÁêÜ -->
      <div class="wallpaper-modal" id="wallpaperModal">
        <div class="wallpaper-container">
          <!-- Ë£ÖÈ•∞ÊÄßÂÉèÁ¥†ÂÖÉÁ¥† -->
          <div class="wallpaper-deco-pixels">
            <div class="deco-pixel-dot" style="top: 10%; left: 5%;"></div>
            <div class="deco-pixel-dot" style="top: 15%; right: 8%;"></div>
            <div class="deco-pixel-dot" style="bottom: 20%; left: 10%;"></div>
            <div class="deco-star-small" style="top: 25%; right: 15%;"></div>
            <div class="deco-star-small" style="bottom: 30%; right: 5%;"></div>
          </div>

          <!-- Header -->
          <div class="wallpaper-header">
            <div class="wallpaper-title-area">
              <svg class="wallpaper-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" />
                <circle cx="8.5" cy="8.5" r="1.5" />
                <path d="M21 15l-5-5L5 21" stroke-linecap="round" />
              </svg>
              <div>
                <div class="wallpaper-title">Â£ÅÁ∫∏ÁÆ°ÁêÜ</div>
                <div class="wallpaper-subtitle">[ wallpaper_settings ]</div>
              </div>
            </div>
            <div class="wallpaper-close" onclick="closeWallpaperModal()">
              <svg viewBox="0 0 24 24">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- „ÄêËÄÅÁéãÈáçÊñ∞ËÆæËÆ°„ÄëÂèåÈ¢ÑËßàÂå∫Âüü - ‰∏ªÂ±èÂíåÂºÄÊú∫ -->
          <div class="wallpaper-preview-section">
            <div class="wallpaper-dual-preview-grid">
              <!-- ‰∏ªÂ±èÂ£ÅÁ∫∏È¢ÑËßà -->
              <div class="wallpaper-preview-card">
                <div class="preview-label">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px; margin-right: 6px;">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                  </svg>
                  ‰∏ªÂ±èÂ£ÅÁ∫∏
                </div>
                <div class="wallpaper-preview-frame" id="homeWallpaperPreview">
                  <div class="preview-screen">
                    <div class="preview-time">12:00</div>
                    <div class="preview-date">ÊòüÊúü‰∏Ä, 12Êúà10Êó•</div>
                  </div>
                </div>
              </div>

              <!-- ÂºÄÊú∫Â£ÅÁ∫∏È¢ÑËßà -->
              <div class="wallpaper-preview-card">
                <div class="preview-label">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px; margin-right: 6px;">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 6v6l4 2" stroke-linecap="round" />
                  </svg>
                  ÂºÄÊú∫Â£ÅÁ∫∏
                </div>
                <div class="wallpaper-preview-frame boot-preview" id="bootWallpaperPreview">
                  <!-- ÂºÄÊú∫Âä®ÁîªÈ¢ÑËßà -->
                  <div class="boot-animation-preview">
                    <div class="boot-dots">
                      <div class="boot-dot"></div>
                      <div class="boot-dot"></div>
                      <div class="boot-dot"></div>
                    </div>
                    <div class="boot-text">Loading...</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Â£ÅÁ∫∏ÁîüÊàêÂô®ÂàÜÁ±ª -->
          <div class="wallpaper-category-section">
            <div class="category-filter-scroll">
              <button class="category-filter-btn active" onclick="switchWallpaperType('solid')">Á∫ØËâ≤</button>
              <button class="category-filter-btn" onclick="switchWallpaperType('stripe')">Êù°Á∫π</button>
              <button class="category-filter-btn" onclick="switchWallpaperType('dot')">Ê≥¢ÁÇπ</button>
            </div>
          </div>

          <!-- Á∫ØËâ≤Â£ÅÁ∫∏ÁîüÊàêÂô® -->
          <div class="wallpaper-generator-section" id="solidGenerator" style="display: block;">
            <div class="wallpaper-section-header">
              <span>Á∫ØËâ≤Â£ÅÁ∫∏</span>
            </div>
            <div class="color-palette-grid">
              <!-- È¢ÑËÆæËâ≤Á≥ª -->
              <div class="color-option" data-color="#ffffff" style="background: #ffffff;"></div>
              <div class="color-option" data-color="#f5f5f5" style="background: #f5f5f5;"></div>
              <div class="color-option" data-color="#e0e0e0" style="background: #e0e0e0;"></div>
              <div class="color-option" data-color="#000000" style="background: #000000;"></div>
              <div class="color-option" data-color="#1a1a1a" style="background: #1a1a1a;"></div>
              <div class="color-option" data-color="#2a2a2a" style="background: #2a2a2a;"></div>
              <div class="color-option" data-color="#ffd1dc" style="background: #ffd1dc;"></div>
              <div class="color-option" data-color="#ffb3c1" style="background: #ffb3c1;"></div>
              <div class="color-option" data-color="#e0f7e9" style="background: #e0f7e9;"></div>
              <div class="color-option" data-color="#c1ead4" style="background: #c1ead4;"></div>
              <div class="color-option" data-color="#d4e7ff" style="background: #d4e7ff;"></div>
              <div class="color-option" data-color="#b3d9ff" style="background: #b3d9ff;"></div>
              <div class="color-option" data-color="#fff9d4" style="background: #fff9d4;"></div>
              <div class="color-option" data-color="#ffe0b3" style="background: #ffe0b3;"></div>
              <div class="color-option" data-color="#e8d4ff" style="background: #e8d4ff;"></div>
            </div>
            <div class="generator-custom-input">
              <input type="color" id="solidColorPicker" value="#ffffff">
              <button class="generator-apply-btn" onclick="applySolidColor()">Â∫îÁî®Á∫ØËâ≤</button>
            </div>
          </div>

          <!-- Êù°Á∫πÂ£ÅÁ∫∏ÁîüÊàêÂô® -->
          <div class="wallpaper-generator-section" id="stripeGenerator" style="display: none;">
            <div class="wallpaper-section-header">
              <span>Êù°Á∫πÂ£ÅÁ∫∏</span>
            </div>
            <div class="generator-preview" id="stripePreview"></div>
            <div class="generator-controls">
              <div class="control-group">
                <label>È¢úËâ≤1</label>
                <input type="color" id="stripeColor1" value="#1a1a1a">
              </div>
              <div class="control-group">
                <label>È¢úËâ≤2</label>
                <input type="color" id="stripeColor2" value="#2a2a2a">
              </div>
              <div class="control-group">
                <label>Êù°Á∫πÂÆΩÂ∫¶ <span id="stripeWidthValue">20px</span></label>
                <input type="range" id="stripeWidth" min="5" max="80" value="20">
              </div>
              <div class="control-group">
                <label>ÊñπÂêë</label>
                <select id="stripeDirection">
                  <option value="0deg">Ê®™Âêë</option>
                  <option value="90deg">Á´ñÂêë</option>
                  <option value="45deg">ÊñúÂêë45¬∞</option>
                  <option value="135deg">ÊñúÂêë135¬∞</option>
                </select>
              </div>
            </div>
            <button class="generator-apply-btn" onclick="applyStripeWallpaper()">Â∫îÁî®Êù°Á∫π</button>
          </div>

          <!-- Ê≥¢ÁÇπÂ£ÅÁ∫∏ÁîüÊàêÂô® -->
          <div class="wallpaper-generator-section" id="dotGenerator" style="display: none;">
            <div class="wallpaper-section-header">
              <span>Ê≥¢ÁÇπÂ£ÅÁ∫∏</span>
            </div>
            <div class="generator-preview" id="dotPreview"></div>
            <div class="generator-controls">
              <div class="control-group">
                <label>ËÉåÊôØËâ≤</label>
                <input type="color" id="dotBgColor" value="#ffffff">
              </div>
              <div class="control-group">
                <label>Ê≥¢ÁÇπÈ¢úËâ≤</label>
                <input type="color" id="dotColor" value="#000000">
              </div>
              <div class="control-group">
                <label>Ê≥¢ÁÇπÂ§ßÂ∞è <span id="dotSizeValue">10px</span></label>
                <input type="range" id="dotSize" min="3" max="30" value="10">
              </div>
              <div class="control-group">
                <label>Ê≥¢ÁÇπÈó¥Ë∑ù <span id="dotSpacingValue">30px</span></label>
                <input type="range" id="dotSpacing" min="15" max="80" value="30">
              </div>
            </div>
            <button class="generator-apply-btn" onclick="applyDotWallpaper()">Â∫îÁî®Ê≥¢ÁÇπ</button>
          </div>

          <!-- Ëá™ÂÆö‰πâ‰∏ä‰º† -->
          <div class="wallpaper-upload-section">
            <div class="wallpaper-section-header">
              <span>‰∏ä‰º†Â£ÅÁ∫∏</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <path d="M12 5v14M5 12h14" stroke-linecap="round" />
              </svg>
            </div>
            <div class="wallpaper-upload-grid">
              <!-- ‰∏ªÂ±èÂ£ÅÁ∫∏‰∏ä‰º† -->
              <div class="wallpaper-upload-card" onclick="document.getElementById('homeWallpaperFileInput').click()">
                <div class="upload-card-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                  </svg>
                </div>
                <div class="upload-card-title">‰∏ªÂ±èÂ£ÅÁ∫∏</div>
                <div class="upload-card-desc">JPG, PNG, WebP</div>
              </div>
              <!-- ÂºÄÊú∫Â£ÅÁ∫∏‰∏ä‰º† -->
              <div class="wallpaper-upload-card" onclick="document.getElementById('bootWallpaperFileInput').click()">
                <div class="upload-card-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 6v6l4 2" stroke-linecap="round" />
                  </svg>
                </div>
                <div class="upload-card-title">ÂºÄÊú∫Â£ÅÁ∫∏</div>
                <div class="upload-card-desc">JPG, PNG, WebP</div>
              </div>
            </div>
            <input type="file" id="homeWallpaperFileInput" accept="image/*" style="display: none;" onchange="handleWallpaperUpload(event, 'home')">
            <input type="file" id="bootWallpaperFileInput" accept="image/*" style="display: none;" onchange="handleWallpaperUpload(event, 'boot')">
          </div>

          <!-- ÂºÄÊú∫Âä®ÁîªÈÄâÊã©Âô® -->
          <div class="boot-animation-selector-section">
            <div class="wallpaper-section-header">
              <span>ÂºÄÊú∫Âä®Áîª</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <circle cx="12" cy="12" r="10" />
                <path d="M8 12l2 2 4-4" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
            <div class="boot-animation-scroll">
              <!-- DefaultÂä®Áîª -->
              <div class="boot-animation-option active" data-animation="default" onclick="selectBootAnimation('default')">
                <div class="boot-animation-preview-mini">
                  <div class="mini-default">
                    <div class="mini-default-dots">
                      <div class="mini-default-dot"></div>
                      <div class="mini-default-dot"></div>
                      <div class="mini-default-dot"></div>
                    </div>
                  </div>
                </div>
                <div class="boot-animation-name">Default</div>
              </div>

              <!-- BlogÂä®Áîª -->
              <div class="boot-animation-option" data-animation="blog" onclick="selectBootAnimation('blog')">
                <div class="boot-animation-preview-mini">
                  <div class="mini-blog">
                    <div class="mini-blog-card">
                      <div class="mini-blog-line"></div>
                      <div class="mini-blog-line"></div>
                      <div class="mini-blog-line"></div>
                    </div>
                  </div>
                </div>
                <div class="boot-animation-name">Blog</div>
              </div>

              <!-- RingÂä®Áîª -->
              <div class="boot-animation-option" data-animation="ring" onclick="selectBootAnimation('ring')">
                <div class="boot-animation-preview-mini">
                  <div class="mini-ring">
                    <div class="mini-ring-circle">
                      <div class="mini-ring-bg"></div>
                      <div class="mini-ring-progress"></div>
                    </div>
                  </div>
                </div>
                <div class="boot-animation-name">Ring</div>
              </div>

              <!-- PulseÂä®Áîª -->
              <div class="boot-animation-option" data-animation="pulse" onclick="selectBootAnimation('pulse')">
                <div class="boot-animation-preview-mini">
                  <div class="mini-pulse">
                    <div class="mini-pulse-squares">
                      <div class="mini-pulse-square"></div>
                      <div class="mini-pulse-square"></div>
                      <div class="mini-pulse-square"></div>
                    </div>
                  </div>
                </div>
                <div class="boot-animation-name">Pulse</div>
              </div>
            </div>
          </div>

          <!-- „ÄêËÄÅÁéãÂà†Èô§„ÄëÂ∫îÁî®ÊåâÈíÆÂ∑≤Âà†Èô§ÔºåÁé∞Âú®‰∏ä‰º†ÂêéËá™Âä®Â∫îÁî® -->
        </div>
      </div>

      <!-- Typography Management Modal - ÊéíÁâàÁÆ°ÁêÜ -->
      <div class="wallpaper-modal typography-modal" id="typographyModal">
        <div class="wallpaper-container typography-container">
          <!-- Ë£ÖÈ•∞ÊÄßÂÉèÁ¥†ÂÖÉÁ¥† -->
          <div class="wallpaper-deco-pixels">
            <div class="deco-pixel-dot" style="top: 12%; left: 8%;"></div>
            <div class="deco-pixel-dot" style="top: 18%; right: 10%;"></div>
            <div class="deco-pixel-dot" style="bottom: 22%; left: 12%;"></div>
            <div class="deco-star-small" style="top: 28%; right: 18%;"></div>
            <div class="deco-star-small" style="bottom: 32%; right: 8%;"></div>
          </div>

          <!-- Header -->
          <div class="wallpaper-header typography-header">
            <div class="wallpaper-title-area">
              <svg class="wallpaper-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 20h16M6 16h12M8 12h8M10 8h4" stroke-linecap="round" />
              </svg>
              <div>
                <div class="wallpaper-title">ÊéíÁâàÁÆ°ÁêÜ</div>
                <div class="wallpaper-subtitle">[ typography_settings ]</div>
              </div>
            </div>
            <div class="wallpaper-close typography-close" onclick="closeTypographyModal()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- ‰∏ªÈ¢òÂàáÊç¢Âå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707" stroke-linecap="round" />
              </svg>
              <span>Â§ñËßÇÊ®°Âºè</span>
            </div>

            <div class="theme-toggle-cards">
              <!-- Êó•Èó¥Ê®°ÂºèÂç°Áâá -->
              <div class="theme-card" id="lightThemeCard" onclick="switchToTheme('light')">
                <div class="theme-card-preview light-preview">
                  <!-- Ê®°ÊãüÊµÖËâ≤ÁïåÈù¢ -->
                  <div class="preview-window">
                    <div class="preview-bar light-bar"></div>
                    <div class="preview-content">
                      <div class="preview-box light-box"></div>
                      <div class="preview-box light-box small"></div>
                      <div class="preview-box light-box small"></div>
                    </div>
                  </div>
                  <!-- Â§™Èò≥ÂõæÊ†á -->
                  <div class="theme-icon-overlay">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="5" />
                      <line x1="12" y1="1" x2="12" y2="3" />
                      <line x1="12" y1="21" x2="12" y2="23" />
                      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                      <line x1="1" y1="12" x2="3" y2="12" />
                      <line x1="21" y1="12" x2="23" y2="12" />
                      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                    </svg>
                  </div>
                </div>
                <div class="theme-card-label">
                  <div class="theme-card-name">Êó•Èó¥Ê®°Âºè</div>
                  <div class="theme-card-desc">Êòé‰∫ÆÊ∏ÖÁàΩÁöÑÊµÖËâ≤‰∏ªÈ¢ò</div>
                </div>
                <div class="theme-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Â§úÈó¥Ê®°ÂºèÂç°Áâá -->
              <div class="theme-card" id="darkThemeCard" onclick="switchToTheme('dark')">
                <div class="theme-card-preview dark-preview">
                  <!-- Ê®°ÊãüÊ∑±Ëâ≤ÁïåÈù¢ -->
                  <div class="preview-window">
                    <div class="preview-bar dark-bar"></div>
                    <div class="preview-content">
                      <div class="preview-box dark-box"></div>
                      <div class="preview-box dark-box small"></div>
                      <div class="preview-box dark-box small"></div>
                    </div>
                  </div>
                  <!-- Êúà‰∫ÆÂõæÊ†á -->
                  <div class="theme-icon-overlay">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                    </svg>
                  </div>
                </div>
                <div class="theme-card-label">
                  <div class="theme-card-name">Â§úÈó¥Ê®°Âºè</div>
                  <div class="theme-card-desc">ÊüîÂíåÊä§ÁúºÁöÑÊ∑±Ëâ≤‰∏ªÈ¢ò</div>
                </div>
                <div class="theme-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- Â≠ó‰ΩìÁÆ°ÁêÜÂå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <path d="M4 7V4h16v3M9 20h6M12 4v16" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Â≠ó‰ΩìÁÆ°ÁêÜ</span>
            </div>

            <!-- ÈªòËÆ§Â≠ó‰ΩìÊ†áÁ≠æ -->
            <div class="font-section-label">ÈªòËÆ§Â≠ó‰Ωì</div>

            <!-- ÈªòËÆ§Â≠ó‰ΩìÁΩëÊ†º - Âõ∫ÂÆö2x2Â∏ÉÂ±Ä -->
            <div class="font-cards-grid default-fonts-grid" id="defaultFontsGrid">
              <!-- ÈªòËÆ§Â≠ó‰ΩìÔºöInter -->
              <div class="font-card active" data-font="Inter" onclick="selectFont('Inter', 'default')">
                <div class="font-card-preview" style="font-family: 'Inter', sans-serif;">
                  <div class="font-preview-text">Aa</div>
                  <div class="font-preview-sample">The quick brown fox</div>
                </div>
                <div class="font-card-label">
                  <div class="font-card-name">Inter</div>
                  <div class="font-card-type">ÈªòËÆ§ ¬∑ Sans-serif</div>
                </div>
                <div class="font-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- JetBrains Mono -->
              <div class="font-card" data-font="JetBrains Mono" onclick="selectFont('JetBrains Mono', 'default')">
                <div class="font-card-preview" style="font-family: 'JetBrains Mono', monospace;">
                  <div class="font-preview-text">Aa</div>
                  <div class="font-preview-sample">The quick brown fox</div>
                </div>
                <div class="font-card-label">
                  <div class="font-card-name">JetBrains Mono</div>
                  <div class="font-card-type">‰ª£Á†Å ¬∑ Monospace</div>
                </div>
                <div class="font-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Georgia -->
              <div class="font-card" data-font="Georgia" onclick="selectFont('Georgia', 'system')">
                <div class="font-card-preview" style="font-family: Georgia, serif;">
                  <div class="font-preview-text">Aa</div>
                  <div class="font-preview-sample">The quick brown fox</div>
                </div>
                <div class="font-card-label">
                  <div class="font-card-name">Georgia</div>
                  <div class="font-card-type">Á≥ªÁªü ¬∑ Serif</div>
                </div>
                <div class="font-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Courier New -->
              <div class="font-card" data-font="Courier New" onclick="selectFont('Courier New', 'system')">
                <div class="font-card-preview" style="font-family: 'Courier New', monospace;">
                  <div class="font-preview-text">Aa</div>
                  <div class="font-preview-sample">The quick brown fox</div>
                </div>
                <div class="font-card-label">
                  <div class="font-card-name">Courier New</div>
                  <div class="font-card-type">Á≥ªÁªü ¬∑ Monospace</div>
                </div>
                <div class="font-card-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Ëá™ÂÆö‰πâÂ≠ó‰ΩìÂå∫Âüü - Ê®™ÂêëÊªöÂä® -->
            <div class="custom-fonts-section" id="customFontsSection" style="display: none;">
              <div class="font-section-label">Ëá™ÂÆö‰πâÂ≠ó‰Ωì</div>
              <div class="custom-fonts-scroll" id="customFontsScroll">
                <!-- Ëá™ÂÆö‰πâÂ≠ó‰ΩìÂç°ÁâáÂ∞ÜÂä®ÊÄÅÊ∑ªÂä†Âà∞ËøôÈáå -->
              </div>
            </div>

            <!-- Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠ó‰Ωì -->
            <div class="add-custom-font-area">
              <div class="custom-font-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px; opacity: 0.6;">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="16" stroke-linecap="round"/>
                  <line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round"/>
                </svg>
                <span>Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠ó‰Ωì</span>
              </div>
              <div class="custom-font-form">
                <input type="text" id="customFontName" class="custom-font-input" placeholder="Â≠ó‰ΩìÂêçÁß∞ (‰æãÂ¶Ç: Roboto)">
                <input type="text" id="customFontUrl" class="custom-font-input" placeholder="Google Fonts URL Êàñ @font-face URL">
                <button class="custom-font-add-btn" onclick="addCustomFont()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 6px;">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Ê∑ªÂä†Â≠ó‰Ωì
                </button>
              </div>
              <div class="custom-font-hint">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 12px; height: 12px; margin-right: 6px; opacity: 0.4;">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 16v-4M12 8h.01" stroke-linecap="round"/>
                </svg>
                <span>ÊîØÊåÅ Google Fonts URL„ÄÅÂ≠ó‰ΩìÊñá‰ª∂URL (.ttf/.otf/.woff/.woff2) Êàñ @font-face CSS</span>
              </div>
            </div>
          </div>

          <!-- ÊâãÊú∫È¢úËâ≤ÁÆ°ÁêÜÂå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <path d="M7 21a4 4 0 0 1-4-4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v12a4 4 0 0 1-4 4H7z" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 18h1" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>ÊâãÊú∫È¢úËâ≤</span>
            </div>

            <!-- È¢úËâ≤ÊñπÊ°àÊ†áÁ≠æ -->
            <div class="font-section-label">È¢ÑËÆæËâ≤Á≥ª</div>

            <!-- È¢úËâ≤ÊñπÊ°àÊ®™ÂêëÊªöÂä® -->
            <div class="color-schemes-scroll" id="colorSchemesScroll">
              <!-- ÁªèÂÖ∏Èªë -->
              <div class="color-scheme-card active" data-scheme="classic-black" onclick="selectColorScheme('classic-black')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #1a1a1a;"></div>
                    <div class="color-preview-notch" style="background: #0a0a0a;"></div>
                    <div class="color-preview-island" style="background: #1a1a1a;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">ÁªèÂÖ∏Èªë</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #1a1a1a;"></span>
                    <span class="color-dot" style="background: #0a0a0a;"></span>
                    <span class="color-dot" style="background: #1a1a1a;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Á∫ØÁôΩ -->
              <div class="color-scheme-card" data-scheme="pure-white" onclick="selectColorScheme('pure-white')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #ffffff;"></div>
                    <div class="color-preview-notch" style="background: #f5f5f5;"></div>
                    <div class="color-preview-island" style="background: #e8e8e8;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">Á∫ØÁôΩ</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #ffffff; border: 1px solid #e0e0e0;"></span>
                    <span class="color-dot" style="background: #f5f5f5;"></span>
                    <span class="color-dot" style="background: #e8e8e8;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Ê∑±ÁÅ∞ -->
              <div class="color-scheme-card" data-scheme="dark-gray" onclick="selectColorScheme('dark-gray')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #4a4a4a;"></div>
                    <div class="color-preview-notch" style="background: #2a2a2a;"></div>
                    <div class="color-preview-island" style="background: #3a3a3a;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">Ê∑±ÁÅ∞</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #4a4a4a;"></span>
                    <span class="color-dot" style="background: #2a2a2a;"></span>
                    <span class="color-dot" style="background: #3a3a3a;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Èì∂ÁÅ∞ -->
              <div class="color-scheme-card" data-scheme="silver-gray" onclick="selectColorScheme('silver-gray')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #d0d0d0;"></div>
                    <div class="color-preview-notch" style="background: #c0c0c0;"></div>
                    <div class="color-preview-island" style="background: #c8c8c8;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">Èì∂ÁÅ∞</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #d0d0d0;"></span>
                    <span class="color-dot" style="background: #c0c0c0;"></span>
                    <span class="color-dot" style="background: #c8c8c8;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- ÂçàÂ§úËìù -->
              <div class="color-scheme-card" data-scheme="midnight-blue" onclick="selectColorScheme('midnight-blue')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #1a1a2e;"></div>
                    <div class="color-preview-notch" style="background: #0f0f1e;"></div>
                    <div class="color-preview-island" style="background: #16162a;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">ÂçàÂ§úËìù</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #1a1a2e;"></span>
                    <span class="color-dot" style="background: #0f0f1e;"></span>
                    <span class="color-dot" style="background: #16162a;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <!-- Á¢≥ÁÅ∞ -->
              <div class="color-scheme-card" data-scheme="carbon-gray" onclick="selectColorScheme('carbon-gray')">
                <div class="color-scheme-preview">
                  <div class="color-preview-phone">
                    <div class="color-preview-frame" style="border-color: #2c2c2c;"></div>
                    <div class="color-preview-notch" style="background: #1c1c1c;"></div>
                    <div class="color-preview-island" style="background: #242424;"></div>
                  </div>
                </div>
                <div class="color-scheme-label">
                  <div class="color-scheme-name">Á¢≥ÁÅ∞</div>
                  <div class="color-scheme-colors">
                    <span class="color-dot" style="background: #2c2c2c;"></span>
                    <span class="color-dot" style="background: #1c1c1c;"></span>
                    <span class="color-dot" style="background: #242424;"></span>
                  </div>
                </div>
                <div class="color-scheme-checkmark">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Ëá™ÂÆö‰πâÈ¢úËâ≤ËæìÂÖ• -->
            <div class="add-custom-color-area">
              <div class="custom-font-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px; opacity: 0.6;">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="16" stroke-linecap="round"/>
                  <line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round"/>
                </svg>
                <span>Ëá™ÂÆö‰πâÈ¢úËâ≤</span>
              </div>
              <div class="custom-color-form">
                <div class="custom-color-row">
                  <label class="custom-color-label">ÊâãÊú∫Ê°Ü</label>
                  <input type="color" id="customFrameColor" class="custom-color-input" value="#1a1a1a">
                </div>
                <div class="custom-color-row">
                  <label class="custom-color-label">ÂàòÊµ∑Â±è</label>
                  <input type="color" id="customNotchColor" class="custom-color-input" value="#0a0a0a">
                </div>
                <div class="custom-color-row">
                  <label class="custom-color-label">ÁÅµÂä®Â≤õ</label>
                  <input type="color" id="customIslandColor" class="custom-color-input" value="#1a1a1a">
                </div>
                <button class="custom-font-add-btn" onclick="applyCustomPhoneColors()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 6px;">
                    <polyline points="20 6 9 17 4 12" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Â∫îÁî®Ëá™ÂÆö‰πâÈ¢úËâ≤
                </button>
              </div>
              <div class="custom-font-hint">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 12px; height: 12px; margin-right: 6px; opacity: 0.4;">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 16v-4M12 8h.01" stroke-linecap="round"/>
                </svg>
                <span>ÂèØ‰ª•ÂàÜÂà´ËÆæÁΩÆÊâãÊú∫Ê°Ü„ÄÅÂàòÊµ∑Â±èÂíåÁÅµÂä®Â≤õÁöÑÈ¢úËâ≤</span>
              </div>
            </div>
          </div>

          <!-- ÂÖ®Â±èÈÄÇÈÖçÂå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>ÂÖ®Â±èÈÄÇÈÖç</span>
            </div>

            <!-- ÂÖ®Â±èÈÄÇÈÖçÈÄâÈ°πÂàóË°® -->
            <div class="fullscreen-options-list">
              <!-- ÈöêËóèÂàòÊµ∑Â±è -->
              <div class="fullscreen-option-item">
                <div class="fullscreen-option-info">
                  <div class="fullscreen-option-name">ÈöêËóèÂàòÊµ∑Â±è</div>
                  <div class="fullscreen-option-desc">Âú®ÂÖ®Â±èÊ®°Âºè‰∏ãÈöêËóèÂàòÊµ∑Â±èË£ÖÈ•∞</div>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="hideNotchToggle" onchange="toggleHideNotch()">
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <!-- Êó∂Èó¥Ê°ÜË¥¥È°∂ -->
              <div class="fullscreen-option-item">
                <div class="fullscreen-option-info">
                  <div class="fullscreen-option-name">Êó∂Èó¥Ê°ÜË¥¥È°∂</div>
                  <div class="fullscreen-option-desc">Â∞ÜÁä∂ÊÄÅÊ†èÊó∂Èó¥Ê°ÜÁßªËá≥È°µÈù¢ÊúÄÈ°∂Á´Ø</div>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="statusBarTopToggle" onchange="toggleStatusBarTop()">
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <!-- ÁÅµÂä®Â≤õË¥¥È°∂ -->
              <div class="fullscreen-option-item">
                <div class="fullscreen-option-info">
                  <div class="fullscreen-option-name">ÁÅµÂä®Â≤õË¥¥È°∂</div>
                  <div class="fullscreen-option-desc">Â∞ÜÁÅµÂä®Â≤õÁßªËá≥È°µÈù¢ÊúÄÈ°∂Á´Ø</div>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="dynamicIslandTopToggle" onchange="toggleDynamicIslandTop()">
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <!-- üî• „ÄêËÄÅÁéãÊñ∞Â¢û„ÄëÈöêËóèÊó∂Èó¥Ê°Ü - Ëß£ÂÜ≥iOSÊó∂Èó¥ÈáçÂè†ÈóÆÈ¢ò -->
              <div class="fullscreen-option-item">
                <div class="fullscreen-option-info">
                  <div class="fullscreen-option-name">ÈöêËóèÊó∂Èó¥Ê°Ü</div>
                  <div class="fullscreen-option-desc">ÈöêËóèÁä∂ÊÄÅÊ†èÊó∂Èó¥ÔºàËß£ÂÜ≥iOSÊó∂Èó¥ÈáçÂè†Ôºâ</div>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="hideStatusBarToggle" onchange="toggleHideStatusBar()">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="custom-font-hint">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 12px; height: 12px; margin-right: 6px; opacity: 0.4;">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4M12 8h.01" stroke-linecap="round"/>
              </svg>
              <span>ÂÖ®Â±èÊ®°Âºè‰∏ãÂèØÈöêËóèÂàòÊµ∑Â±èÂπ∂Ë∞ÉÊï¥UI‰ΩçÁΩÆ‰ª•Ëé∑ÂæóÊõ¥Â•ΩÁöÑÊòæÁ§∫ÊïàÊûú</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Sticker Management Modal - Ë¥¥Á∫∏ÁÆ°ÁêÜ -->
      <div class="wallpaper-modal typography-modal" id="stickerModal">
        <div class="wallpaper-container typography-container">
          <!-- Ë£ÖÈ•∞ÊÄßÂÉèÁ¥†ÂÖÉÁ¥† -->
          <div class="wallpaper-deco-pixels">
            <div class="deco-pixel-dot" style="top: 10%; left: 6%;"></div>
            <div class="deco-pixel-dot" style="top: 16%; right: 9%;"></div>
            <div class="deco-pixel-dot" style="bottom: 24%; left: 11%;"></div>
            <div class="deco-star-small" style="top: 30%; right: 16%;"></div>
            <div class="deco-star-small" style="bottom: 35%; right: 7%;"></div>
          </div>

          <!-- Header -->
          <div class="wallpaper-header typography-header">
            <div class="wallpaper-title-area">
              <svg class="wallpaper-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" stroke-linecap="round" />
              </svg>
              <div>
                <div class="wallpaper-title">Ë¥¥Á∫∏ÁÆ°ÁêÜ</div>
                <div class="wallpaper-subtitle">[ sticker_settings ]</div>
              </div>
            </div>
            <div class="wallpaper-close typography-close" onclick="closeStickerSettings()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- ÊâãÊú∫Ê°ÜË¥¥Á∫∏‰∏ä‰º†Âå∫Âüü -->
          <div class="typography-section">
            <div class="typography-section-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; margin-right: 8px; opacity: 0.6;">
                <path d="M7 21a4 4 0 0 1-4-4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v12a4 4 0 0 1-4 4H7z" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="9" cy="10" r="1" fill="currentColor"/>
                <circle cx="13" cy="10" r="1" fill="currentColor"/>
                <circle cx="9" cy="14" r="1" fill="currentColor"/>
                <circle cx="13" cy="14" r="1" fill="currentColor"/>
              </svg>
              <span>ÊâãÊú∫Ê°ÜË¥¥Á∫∏</span>
            </div>

            <!-- ÂõæÁâá‰∏ä‰º†Âå∫ -->
            <div class="sticker-upload-section">
              <!-- ÂΩìÂâçË¥¥Á∫∏È¢ÑËßà -->
              <div class="sticker-current-preview" id="stickerCurrentPreview">
                <div class="sticker-preview-empty">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21 15 16 10 5 21" />
                  </svg>
                  <p>Êú™ËÆæÁΩÆË¥¥Á∫∏</p>
                </div>
              </div>

              <!-- ‰∏ä‰º†ÊåâÈíÆÁªÑ -->
              <div class="sticker-button-group">
                <label class="sticker-upload-btn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="17 8 12 3 7 8" />
                    <line x1="12" y1="3" x2="12" y2="15" />
                  </svg>
                  <span>‰∏ä‰º†Ë¥¥Á∫∏</span>
                  <input type="file" id="stickerUploadInput" accept="image/*" onchange="handleStickerUpload(event)" style="display: none;">
                </label>

                <button class="sticker-remove-btn" onclick="removeStickerImage()" id="stickerRemoveBtn" style="display: none;">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6" />
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                    <line x1="10" y1="11" x2="10" y2="17" />
                    <line x1="14" y1="11" x2="14" y2="17" />
                  </svg>
                  <span>ÁßªÈô§Ë¥¥Á∫∏</span>
                </button>
              </div>
            </div>

            <!-- Ë¥¥Á∫∏ÊèêÁ§∫ -->
            <div class="custom-font-hint">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 12px; height: 12px; margin-right: 6px; opacity: 0.4;">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4M12 8h.01" stroke-linecap="round"/>
              </svg>
              <span>Ë¥¥Á∫∏‰ªÖË¶ÜÁõñÊâãÊú∫Â§ñÊ°ÜÔºå‰∏çÂΩ±ÂìçÂ±èÂπïÂÜÖÂÆπ„ÄÇÂª∫ËÆÆ‰ΩøÁî®ÈÄèÊòéPNGÊàñÈáçÂ§çÁ∫πÁêÜÂõæÁâá</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Character Detail Modal -->
      <div class="character-modal" id="characterDetailModal">
        <div class="id-card">
          <!-- Corner Decorations -->
          <div class="corner-decoration top-left"></div>
          <div class="corner-decoration bottom-right"></div>

          <!-- Close Button -->
          <div class="id-card-close" onclick="closeCharacterDetail()">
            <svg viewBox="0 0 24 24">
              <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>

          <!-- Card Header -->
          <div class="id-card-header">
            <div>
              <div class="id-card-title">Character ID</div>
              <div class="id-card-number" id="detailCardNumber">#0000-000</div>
            </div>
          </div>

          <!-- Card Body -->
          <div class="id-card-body">
            <!-- Profile Section -->
            <div class="id-profile">
              <div class="id-avatar-large" id="detailAvatar">
                <svg viewBox="0 0 24 24">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
                <!-- Barcode -->
                <div class="id-barcode">
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                  <div class="barcode-line"></div>
                </div>
              </div>

              <div class="id-info-main">
                <div class="id-name" id="detailCharName">ËßíËâ≤Âêç</div>
                <div class="id-role" id="detailCharRole">ËÅå‰∏ö</div>

                <div class="id-meta-grid">
                  <div class="id-meta-label">Birth</div>
                  <div class="id-meta-value" id="detailCharBirth">----/--/--</div>
                  <div class="id-meta-label">Gender</div>
                  <div class="id-meta-value" id="detailCharGender">---</div>
                  <div class="id-meta-label">World</div>
                  <div class="id-meta-value" id="detailCharWorld">Êú™ÁªëÂÆö</div>
                </div>
              </div>
            </div>

            <!-- Bio Section -->
            <div class="id-section">
              <div class="id-section-header">Character Bio</div>
              <div class="id-bio-text" id="detailCharBio">ÊöÇÊó†‰∫∫ËÆæÊèèËø∞„ÄÇ</div>
            </div>

            <!-- Actions Section -->
            <div class="id-section">
              <div style="display: flex; gap: 6px;">
                <button class="char-action-btn primary" onclick="editCurrentCharacter()" style="flex: 1;">
                  <svg viewBox="0 0 24 24" style="width: 12px; height: 12px;">
                    <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" stroke-width="2" />
                  </svg>
                  ÁºñËæë
                </button>
                <button class="char-action-btn danger" onclick="deleteCurrentCharacter()" style="flex: 1;">
                  <svg viewBox="0 0 24 24" style="width: 12px; height: 12px;">
                    <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke-linecap="round" stroke="currentColor" fill="none" stroke-width="2" />
                  </svg>
                  Âà†Èô§
                </button>
              </div>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="id-card-footer">
            <div class="id-watermark">SYS_v3.0</div>
            <div class="id-status-badge">
              <div class="id-status-dot"></div>
              <span id="detailStatus">ACTIVE</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Create/Edit Character Modal -->
      <div class="character-edit-modal" id="characterEditModal">
        <div class="edit-card">
          <!-- Header -->
          <div class="edit-card-header">
            <div class="edit-card-title" id="editModalTitle">ÂàõÂª∫Êñ∞ËßíËâ≤</div>
            <div class="edit-card-close" onclick="closeCharacterEditModal()">
              <svg viewBox="0 0 24 24">
                <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </div>

          <!-- Body -->
          <div class="edit-card-body">
            <!-- Avatar Upload -->
            <div class="edit-section">
              <div class="edit-section-label">ËßíËâ≤Â§¥ÂÉè</div>
              <div class="avatar-upload-area" onclick="document.getElementById('avatarUploadInput').click()">
                <div class="avatar-preview" id="avatarPreview">
                  <svg viewBox="0 0 24 24">
                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="7" r="4" />
                  </svg>
                </div>
                <div class="avatar-upload-hint">ÁÇπÂáª‰∏ä‰º†ÂõæÁâá</div>
                <input type="file" id="avatarUploadInput" accept="image/*" style="display: none;" onchange="handleAvatarUpload(event)" />
              </div>
            </div>

            <!-- Character Name -->
            <div class="edit-section">
              <div class="edit-section-label">ËßíËâ≤ÂêçÂ≠ó</div>
              <input type="text" class="edit-input" id="editCharName" placeholder="‰æãÂ¶ÇÔºöËâæËéâÂ®Ö¬∑Êô®Êòü" />
            </div>

            <!-- Character Role/Profession -->
            <div class="edit-section">
              <div class="edit-section-label">ËßíËâ≤Ë∫´‰ªΩ</div>
              <input type="text" class="edit-input" id="editCharRole" placeholder="‰æãÂ¶ÇÔºöÈ≠îÊ≥ïÂ∏à" />
            </div>

            <!-- Birth Date & Gender -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div class="edit-section">
                <div class="edit-section-label">Âá∫ÁîüÊó•Êúü</div>
                <input type="date" class="edit-input" id="editCharBirth" />
              </div>
              <div class="edit-section">
                <div class="edit-section-label">ÊÄßÂà´</div>
                <select class="edit-input" id="editCharGender">
                  <option value="">ÈÄâÊã©ÊÄßÂà´</option>
                  <option value="Male">Áî∑ÊÄß</option>
                  <option value="Female">Â•≥ÊÄß</option>
                  <option value="Other">ÂÖ∂‰ªñ</option>
                </select>
              </div>
            </div>

            <!-- Worldview Binding -->
            <div class="edit-section">
              <div class="edit-section-label">‰∏ñÁïåËßÇÁªëÂÆö</div>
              <select class="edit-input" id="editCharWorldview">
                <option value="">Êú™ÁªëÂÆö</option>
                <!-- ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
              </select>
            </div>

            <!-- BaoBaoBook Binding - ÁôæÂÆù‰π¶ÁªëÂÆöÔºàÂõ∫ÂÆöËß¶ÂèëÔºåÊó†ÈúÄÂÖ≥ÈîÆËØçÔºâ -->
            <div class="edit-section">
              <div class="edit-section-label">
                ÁôæÂÆù‰π¶ÁªëÂÆö
                <span class="edit-section-hint">ÔºàÂõ∫ÂÆöËß¶ÂèëÔºåÊó†ÈúÄÂÖ≥ÈîÆËØçÂåπÈÖçÔºâ</span>
              </div>
              <div class="baobaobook-binding-container" id="baobaobookBindingContainer">
                <div class="baobaobook-binding-header" onclick="toggleBaobaobookBindingList()">
                  <span class="baobaobook-binding-summary" id="baobaobookBindingSummary">Êú™ÈÄâÊã©‰ªª‰ΩïÊù°ÁõÆ</span>
                  <svg class="baobaobook-binding-arrow" viewBox="0 0 24 24" id="baobaobookBindingArrow">
                    <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="baobaobook-binding-list" id="baobaobookBindingList">
                  <!-- ÁôæÂÆù‰π¶Êù°ÁõÆÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                  <div class="baobaobook-binding-empty" id="baobaobookBindingEmpty">
                    ÊöÇÊó†ÁôæÂÆù‰π¶Êù°ÁõÆÔºåËØ∑ÂÖàÂú®ÁôæÂÆù‰π¶App‰∏≠ÂàõÂª∫
                  </div>
                </div>
              </div>
            </div>

            <!-- Character Bio -->
            <div class="edit-section">
              <div class="edit-section-label">ËßíËâ≤‰∫∫ËÆæ</div>
              <textarea class="edit-textarea" id="editCharBio" placeholder="ÊèèËø∞ËßíËâ≤ÁöÑËÉåÊôØÊïÖ‰∫ã„ÄÅÊÄßÊ†ºÁâπÁÇπ„ÄÅËÉΩÂäõÁâπÈïøÁ≠â..."></textarea>
            </div>
          </div>

          <!-- Footer -->
          <div class="edit-card-footer">
            <button class="edit-btn" onclick="closeCharacterEditModal()">ÂèñÊ∂à</button>
            <button class="edit-btn primary" onclick="saveCharacter()">‰øùÂ≠ò</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ËßíËâ≤ÂäüËÉΩÂç°ÁâáËÉåÊôØÈÅÆÁΩ© -->
    <div class="char-profile-backdrop" id="charProfileBackdrop" onclick="closeCharProfile()"></div>

    <!-- ËßíËâ≤ÂäüËÉΩÂç°Áâá - Èü≥‰πêÊí≠ÊîæÂô®È£éÊ†º (ÊîæÂú®phone-containerÁ∫ßÂà´) -->
    <div class="char-profile-overlay" id="charProfileOverlay">
      <!-- Music Player View -->
      <div class="music-player-view">
        <div class="now-playing-widget">
        <div class="player-layout">
          <!-- Album Cover - Left Side -->
          <div class="album-section">
            <div class="album-cover" onclick="togglePlaylistView()" style="cursor: pointer;">
              <img id="charProfileAvatar" src="" alt="album cover">
            </div>
          </div>

          <!-- Player Controls - Right Side (symmetric with album) -->
          <div class="player-controls-section">
            <!-- Device indicator: Headphone + Character Remark -->
            <div class="device-indicator">
              <svg viewBox="0 0 24 24"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3v5z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3v5z"/></svg>
              <span id="charProfileDeviceName">Heavenly</span>
            </div>

            <!-- Song Title: Fixed Text -->
            <div class="song-title">Cigarettes After Sex ‚Äî Heavenly</div>

            <!-- Progress -->
            <div class="progress-section">
              <div class="progress-bar-wrap">
                <span class="progress-time">0:10</span>
                <div class="progress-track">
                  <div class="progress-filled" style="width: 20%;"></div>
                </div>
                <span class="progress-time end">-4:39</span>
              </div>
              <div class="current-lyric-line">
                <span class="lyric-text" id="charProfileStatus">Online ¬∑ Online ¬∑ Online ¬∑ </span>
              </div>
            </div>

            <!-- Playback Buttons (smaller, inside right section) -->
            <div class="playback-buttons">
              <button class="ctrl-btn">
                <svg viewBox="0 0 24 24"><path d="M19 20L9 12l10-8v16z"/><rect x="5" y="4" width="2" height="16"/></svg>
              </button>
              <button class="ctrl-btn play-btn">
                <svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/></svg>
              </button>
              <button class="ctrl-btn">
                <svg viewBox="0 0 24 24"><path d="M5 4l10 8-10 8V4z"/><rect x="17" y="4" width="2" height="16"/></svg>
              </button>
              <button class="ctrl-btn small-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"/>
                  <circle cx="2" cy="20" r="1" fill="currentColor"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Extended Lyrics - iOS style scrolling -->
        <div class="extended-lyrics">
          <div class="lyrics-container">
            <div class="lyrics-line active">this is where I want to be where it's so sweet and heavenly</div>
            <div class="lyrics-line">I'm giving you all my love, needing you to coming into me</div>
            <div class="lyrics-line">feeling it slow over this dream, tell me it's love, tell me it's real</div>
            <div class="lyrics-line">you look so beautiful tonight, underneath the city lights</div>
            <div class="lyrics-line">there's a movie playing in my mind, turning my head around</div>
            <div class="lyrics-line">nothing's gonna hurt you baby, as long as you're with me</div>
            <div class="lyrics-line">touch me with a kiss, feel me on your lips</div>
            <div class="lyrics-line">each moment with you, is a moment I treasure</div>
          </div>
        </div>

        <!-- Volume Slider -->
        <div class="volume-slider">
          <div class="vol-icon">
            <svg viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/></svg>
          </div>
          <div class="vol-track">
            <div class="vol-filled"></div>
          </div>
          <div class="vol-icon">
            <svg viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07M19.07 4.93a10 10 0 0 1 0 14.14" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
          </div>
        </div>
      </div>
    </div>

      <!-- Playlist View -->
      <div class="playlist-view">
        <!-- Playlist Section -->
        <div class="playlist-section">
          <div class="playlist-header">
            <div class="playlist-thumb" onclick="togglePlaylistView()">
              <img id="playlistAvatar" src="" alt="playlist">
            </div>
            <div class="playlist-info">
              <div class="playlist-name" id="playlistCharName">Character Name</div>
              <div class="playlist-meta">Single ¬∑ <span id="playlistArtistName">Character Remark</span></div>
            </div>
            <div class="playlist-play-btn" onclick="toggleAlbumEditMode()">
              <svg viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
            </div>
          </div>

          <div class="album-grid">
            <div class="album-thumb" id="diaryAlbumThumb">
              <img src="https://picsum.photos/100?random=11" alt="album">
              <div class="album-thumb-label">MOMENTS</div>
            </div>
            <div class="album-thumb">
              <img src="https://picsum.photos/100?random=12" alt="album">
              <div class="album-thumb-label">MEMORIES</div>
            </div>
            <div class="album-thumb">
              <img src="https://picsum.photos/100?random=13" alt="album">
              <div class="album-thumb-label">STORIES</div>
            </div>
            <div class="album-thumb">
              <img src="https://picsum.photos/100?random=14" alt="album">
              <div class="album-thumb-label">DREAMS</div>
            </div>
          </div>

          <!-- ÁºñËæëÊåâÈíÆÂå∫Âüü - ÂèØÊäòÂè† -->
          <div class="album-edit-actions" id="albumEditActions">
            <div class="edit-action-item">
              <button class="edit-action-btn" onclick="triggerAlbumImageUpload(0)" title="Êú¨Âú∞ÂõæÁâá">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <circle cx="8.5" cy="8.5" r="1.5"></circle>
                  <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
              </button>
              <button class="edit-action-btn" onclick="triggerAlbumUrlInput(0)" title="URLÈìæÊé•">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
              </button>
            </div>
            <div class="edit-action-item">
              <button class="edit-action-btn" onclick="triggerAlbumImageUpload(1)" title="Êú¨Âú∞ÂõæÁâá">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <circle cx="8.5" cy="8.5" r="1.5"></circle>
                  <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
              </button>
              <button class="edit-action-btn" onclick="triggerAlbumUrlInput(1)" title="URLÈìæÊé•">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
              </button>
            </div>
            <div class="edit-action-item">
              <button class="edit-action-btn" onclick="triggerAlbumImageUpload(2)" title="Êú¨Âú∞ÂõæÁâá">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <circle cx="8.5" cy="8.5" r="1.5"></circle>
                  <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
              </button>
              <button class="edit-action-btn" onclick="triggerAlbumUrlInput(2)" title="URLÈìæÊé•">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
              </button>
            </div>
            <div class="edit-action-item">
              <button class="edit-action-btn" onclick="triggerAlbumImageUpload(3)" title="Êú¨Âú∞ÂõæÁâá">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <circle cx="8.5" cy="8.5" r="1.5"></circle>
                  <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
              </button>
              <button class="edit-action-btn" onclick="triggerAlbumUrlInput(3)" title="URLÈìæÊé•">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- ÈöêËóèÁöÑÊñá‰ª∂ËæìÂÖ• -->
          <input type="file" id="albumImageUpload" accept="image/*" style="display: none;" onchange="handleAlbumImageUpload(event)">
        </div>
      </div>
    </div>

    <!-- Êó•ËÆ∞Êú¨Á≥ªÁªü - ÁøªÈ°µÊó•ËÆ∞ -->
    <div class="diary-overlay" id="diaryOverlay">
      <div class="diary-wrap">
        <div class="diary-book" id="diaryBook">

          <!-- Â∞ÅÈù¢ -->
          <div class="diary-page diary-cover" id="diaryPage0">
            <div class="diary-page-face">
              <div class="diary-spine"></div>
              <div class="diary-cover-inner">
                <div class="diary-cover-deco">
                  <div class="diary-star-deco"></div>
                  <div class="diary-star-deco"></div>
                  <div class="diary-star-deco"></div>
                  <div class="diary-star-deco"></div>
                  <div class="diary-star-deco"></div>
                </div>
                <div class="diary-cover-frame"></div>

                <!-- ËøîÂõûÊåâÈíÆ -->
                <div class="diary-back-btn" onclick="closeDiary()">
                  <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
                </div>

                <div class="diary-browser-bar">
                  <div class="diary-browser-dots"><i></i><i></i><i></i></div>
                  <div class="diary-browser-url">diary://private.notes</div>
                </div>

                <div class="diary-avatar-area">
                  <div class="diary-avatar-wrap">
                    <div class="diary-avatar-frame"></div>
                    <div class="diary-avatar-img" id="diaryAvatarImg">
                      <img id="diaryCoverAvatar" src="" alt="avatar" onerror="this.style.display='none'; this.parentNode.textContent='?';">
                    </div>
                  </div>
                </div>

                <div class="diary-char-name">
                  <h2 id="diaryCoverName">Character Name</h2>
                  <span>PRIVATE DIARY</span>
                </div>

                <div class="diary-stats-row">
                  <div class="diary-stat-box">
                    <strong id="diaryStatDays">0</strong>
                    <small>Days</small>
                  </div>
                  <div class="diary-stat-box">
                    <strong id="diaryStatNotes">0</strong>
                    <small>Notes</small>
                  </div>
                  <div class="diary-stat-box">
                    <strong id="diaryStatSince">--</strong>
                    <small>Since</small>
                  </div>
                </div>

                <div class="diary-bio-box">
                  <div class="diary-bio-head">
                    <svg viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="15" rx="2"/><polyline points="17 2 12 7 7 2"/></svg>
                    <span>ABOUT</span>
                  </div>
                  <div class="diary-bio-text" id="diaryCoverBio">ËøôÊòØÂ±û‰∫éËßíËâ≤ÁöÑÁßÅ‰∫∫Êó•ËÆ∞ÔºåËÆ∞ÂΩïÁùÄ‰∏éÁî®Êà∑Áõ∏Â§ÑÁöÑÁÇπÁÇπÊª¥Êª¥...</div>
                </div>

                <div class="diary-cover-foot">
                  <time id="diaryCoverSince">Since --</time>
                </div>

                <div class="diary-flip-btn next" onclick="diaryFlip(1)">
                  <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                </div>
              </div>
            </div>
          </div>

          <!-- ÁõÆÂΩïÈ°µ -->
          <div class="diary-page diary-inner" id="diaryPage1">
            <div class="diary-page-face">
              <div class="diary-spine diary-spine-inner"></div>
              <div class="diary-holes"><div class="diary-hole"></div><div class="diary-hole"></div><div class="diary-hole"></div><div class="diary-hole"></div></div>

              <div class="diary-page-inner">
                <div class="diary-idx-head">
                  <h3>
                    <svg viewBox="0 0 24 24"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                    Index
                  </h3>
                  <small>TABLE OF CONTENTS</small>
                </div>

                <div class="diary-idx-list" id="diaryIndexList">
                  <!-- Á©∫Êó•ËÆ∞ÊèêÁ§∫ -->
                  <div class="diary-empty-hint" id="diaryEmptyHint">
                    <svg viewBox="0 0 24 24">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                      <polyline points="14 2 14 8 20 8"/>
                      <line x1="12" y1="18" x2="12" y2="12"/>
                      <line x1="9" y1="15" x2="15" y2="15"/>
                    </svg>
                    <p>ËøòÊ≤°ÊúâÊó•ËÆ∞ÂÜÖÂÆπ</p>
                    <span>Êó•ËÆ∞‰ºöÂú®ËÅäÂ§©‰∏≠Ëá™Âä®ÁîüÊàê</span>
                  </div>
                  <!-- ÁõÆÂΩïÈ°πÂ∞ÜÂä®ÊÄÅÊ∏≤Êüì -->
                </div>

                <div class="diary-page-foot">
                  <span class="diary-page-num">- i -</span>
                  <div class="diary-page-deco"><i></i><i></i><i></i></div>
                </div>

                <div class="diary-page-btn prev" onclick="diaryFlip(-1)">
                  <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
                </div>
                <div class="diary-page-btn next" onclick="diaryFlip(1)">
                  <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
                </div>
              </div>
            </div>
          </div>

          <!-- Âä®ÊÄÅÊó•ËÆ∞È°µÈù¢Â∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
          <div id="diaryDynamicPages"></div>

        </div>
      </div>
    </div>
  </div>

  <!-- Áî®Êà∑Â•ΩÊÑüÂ∫¶Ë∞ÉÊï¥Ê®°ÊÄÅÊ°Ü - ÂºÇÂΩ¢‰ø°Â∞ÅËÆæËÆ° -->
  <div class="user-affection-overlay" id="userAffectionOverlay" onclick="closeUserAffectionModal()"></div>
  <div class="user-affection-modal" id="userAffectionModal">
    <button class="user-affection-close" onclick="closeUserAffectionModal()"></button>
    <div class="user-affection-header">
      <h3>Affection Adjust</h3>
      <p>User Feelings</p>
    </div>
    <div class="user-affection-body">
      <div class="user-affection-slider-container">
        <label>Affection Level: <span id="userAffectionValue">0</span>/100</label>
        <input type="range" id="userAffectionSlider" min="0" max="100" value="0" oninput="onUserAffectionSliderChange(this.value)">
      </div>
      <div class="user-affection-reason-container">
        <label>Reason (Required)</label>
        <textarea id="userAffectionReason" placeholder="‰∏∫‰ªÄ‰πàË∞ÉÊï¥Â•ΩÊÑüÂ∫¶Ôºü&#10;‰æãÂ¶ÇÔºöËøôÂè•ËØùËÆ©ÊàëËßâÂæóÂæàÊ∏©Êöñ&#10;ÊàñËÄÖÔºöTAËøô‰∏™ÊÄÅÂ∫¶ËÆ©ÊàëÊúâÁÇπÂ§±Êúõ" rows="3"></textarea>
      </div>
      <div class="user-affection-footer">
        <button class="user-affection-cancel" onclick="closeUserAffectionModal()">Cancel</button>
        <button class="user-affection-save" onclick="saveUserAffection()">Save</button>
      </div>
    </div>
  </div>

  <!-- Call Floating Ball - ÈÄöËØùÊÇ¨ÊµÆÁêÉÔºàÂÖ®Â±ÄÁ∫ßÂà´Ôºå‰∏çÂèóÈ°µÈù¢ÂàáÊç¢ÂΩ±ÂìçÔºâ -->
  <div class="call-floating-ball hidden" id="callFloatingBall" onclick="expandCallScreen()">
    <div class="call-floating-avatar" id="callFloatingAvatar">
      <!-- ÈªòËÆ§ÂõæÊ†á -->
      <svg viewBox="0 0 24 24" id="callFloatingDefaultIcon">
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      <!-- ËßíËâ≤Â§¥ÂÉè -->
      <img id="callFloatingImage" src="" alt="Avatar" style="display: none;">
    </div>
    <div class="call-floating-pulse"></div>
    <div class="call-floating-pulse"></div>
  </div>

  <script src="ovo-script.js"></script>

</body>
</html>
